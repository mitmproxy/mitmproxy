import{c as ue,R as Po,a as _e,r as A,b as Te,d as je,j as r,e as N,f as xi,u as Oo,g as qo,h as vi,s as Jt,i as Ho,l as Bt,k as Vo,m as Uo,n as Bo,y as Wo,o as Ko,p as zo,q as Yt,Q as Go,t as Jo,P as Yo}from"./vendor-BS4xPthR.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const n of l)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function s(l){const n={};return l.integrity&&(n.integrity=l.integrity),l.referrerPolicy&&(n.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?n.credentials="include":l.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(l){if(l.ep)return;l.ep=!0;const n=s(l);fetch(l.href,n)}})();const Qo={tab:"request",contentViewFor:{}},Xo=ue({name:"ui/flow",initialState:Qo,reducers:{selectTab(t,e){t.tab=e.payload},setContentViewFor(t,e){t.contentViewFor[e.payload.messageId]=e.payload.contentView}}}),{actions:Zo,reducer:ec}=Xo,{selectTab:Kt,setContentViewFor:_i}=Zo;window.React=Po;const ji=function(t){if(t===0)return"0";const e=["b","kb","mb","gb","tb"];let s=0;for(;s<e.length&&!(Math.pow(1024,s+1)>t);s++);let i;return t%Math.pow(1024,s)===0?i=0:i=1,(t/Math.pow(1024,s)).toFixed(i)+e[s]},yi=function(t){let e=t;const s=["ms","s","min","h"],i=[1e3,60,60];let l=0;for(;Math.abs(e)>=i[l]&&l<i.length;)e=e/i[l],l++;return Math.round(e)+s[l]},dt=function(t,{includeMilliseconds:e=!0}={}){const s=new Date(t*1e3),i=String(s.getFullYear()),l=String(s.getMonth()+1).padStart(2,"0"),n=String(s.getDate()).padStart(2,"0"),o=String(s.getHours()).padStart(2,"0"),a=String(s.getMinutes()).padStart(2,"0"),d=String(s.getSeconds()).padStart(2,"0"),f=String(s.getMilliseconds()).padStart(3,"0");let h=`${i}-${l}-${n} ${o}:${a}:${d}`;return e&&(h+=`.${f}`),h};function zn(t){return t[0].includes(":")?`[${t[0]}]:${t[1]}`:`${t[0]}:${t[1]}`}function tc(t){const e=document.cookie.match(new RegExp("\\b"+t+"=([^;]*)\\b"));return e?e[1]:void 0}let vs=()=>{const t=tc("_xsrf");return vs=()=>t,vs()};function se(t,e={}){return e.method&&e.method!=="GET"&&(e.headers=e.headers||{},e.headers["X-XSRFToken"]=vs()),t.startsWith("/")&&(t="."+t),fetch(t,{credentials:"same-origin",...e})}se.put=(t,e,s={})=>se(t,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),...s});se.post=(t,e,s={})=>se(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),...s});async function zt(t,...e){return await(await se(`/commands/${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({arguments:e})})).json()}async function bi(t){try{await navigator.clipboard.write([new ClipboardItem({"text/plain":t})]);return}catch(i){console.warn(i)}const e=await t;try{await navigator.clipboard.writeText(e);return}catch(i){console.warn(i)}const s=document.createElement("textarea");s.value=e,s.style.position="absolute",s.style.opacity="0",document.body.appendChild(s);try{if(s.focus(),s.select(),!document.execCommand("copy"))throw"failed to copy"}catch{alert(e)}finally{s.remove()}}async function sc(t){await bi(Promise.resolve(t?.text||""))}function _s(t,e){const s=t.lastIndexOf(e);if(s===-1)return["",t];const i=t.slice(0,s),l=t.slice(s+e.length);return[i,l]}function wi(t,e){const s=t.indexOf(e);if(s===-1)return[t,""];const i=t.slice(0,s),l=t.slice(s+e.length);return[i,l]}function kt(t){throw new Error(`Unreachable: ${JSON.stringify(t)}`)}const Si={http:80,https:443},Gn=new WeakMap;class be{static getContentType(e){const s=be.get_first_header(e,/^Content-Type$/i);if(s)return s.split(";")[0].trim()}static get_first_header(e,s){let i=Gn.get(e);i||(i=new Map,Gn.set(e,i));let l=i.get(s);if(l===void 0){const n=e.headers.find(([o,a])=>s.test(o));l=n?n[1]:!1,i.set(s,l)}return l!==!1?l:void 0}static match_header(e,s){const i=e.headers;if(!i)return!1;let l=i.length;for(;l--;)if(s.test(i[l].join(" ")))return i[l];return!1}static getContentURL(e,s,i,l){e.type==="http"&&s===e.request?s="request":e.type==="http"&&s===e.response&&(s="response");const n=l?`?lines=${l}`:"";return`./flows/${e.id}/${s}/`+(i?`content/${encodeURIComponent(i)}.json${n}`:"content.data")}}class ct extends be{static pretty_url(e){let s="";return Si[e.scheme]!==e.port&&(s=":"+e.port),e.scheme+"://"+e.pretty_host+s+e.path}}class xt extends be{}const nc=/^(?:(https?):\/\/)?([^/:]+)?(?::(\d+))?(\/.*)?$/i,$i=function(t){const e=nc.exec(t);if(!e)return;const s=e[1],i=e[2],l=parseInt(e[3]),n=e[4],o=s?l||Si[s]:l,a={};return s&&(a.scheme=s),i&&(a.host=i),o&&(a.port=o),n&&(a.path=n),a},ic=/^HTTP\/\d+(\.\d+)*$/i,Ni=function(t){return ic.test(t)};function Gt(t){switch(t.type){case"http":return t.request.timestamp_start;case"tcp":case"udp":return t.client_conn.timestamp_start;case"dns":return t.request.timestamp}}function Ci(t){switch(t.type){case"http":if(t.websocket){if(t.websocket.timestamp_end)return t.websocket.timestamp_end;if(t.websocket.messages_meta.timestamp_last)return t.websocket.messages_meta.timestamp_last}return t.response?t.response.timestamp_end:void 0;case"tcp":return t.server_conn?.timestamp_end;case"udp":return t.messages_meta.timestamp_last;case"dns":return t.response?.timestamp}}const ki=t=>{switch(t.type){case"http":{let e=t.request.contentLength||0;return t.response&&(e+=t.response.contentLength||0),t.websocket&&(e+=t.websocket.messages_meta.contentLength||0),e}case"tcp":case"udp":return t.messages_meta.contentLength||0;case"dns":return t.response?.size??0}},Ss=t=>t.type==="http"&&!t.websocket,Ei=t=>t.modified,$s=t=>t.intercepted,Ti=t=>{if(t.type!=="http")return t.client_conn.tls_version==="QUICv1"?"resource-icon-quic":`resource-icon-${t.type}`;if(t.websocket)return"resource-icon-websocket";if(!t.response)return"resource-icon-plain";const e=xt.getContentType(t.response)||"";return t.response.status_code===304?"resource-icon-not-modified":300<=t.response.status_code&&t.response.status_code<400?"resource-icon-redirect":e.indexOf("image")>=0?"resource-icon-image":e.indexOf("javascript")>=0?"resource-icon-js":e.indexOf("css")>=0?"resource-icon-css":e.indexOf("html")>=0?"resource-icon-document":"resource-icon-plain"},Li=t=>{switch(t.type){case"http":return ct.pretty_url(t.request);case"tcp":case"udp":return`${t.client_conn.peername.join(":")} ↔ ${t.server_conn?.address?.join(":")}`;case"dns":return`${t.request.questions.map(e=>`${e.name} ${e.type}`).join(", ")} = ${(t.response?.answers.map(e=>e.data).join(", ")??"...")||"?"}`}},Ri=t=>{switch(t.type){case"http":return t.response?.status_code;case"dns":return t.response?.response_code;default:return}},Ai=t=>{switch(t.type){case"http":return t.websocket?t.client_conn.tls_established?"WSS":"WS":t.request.method;case"dns":return t.request.op_code;default:return t.type.toUpperCase()}},Fi=t=>{switch(t.type){case"http":return t.request.http_version;default:return""}},Di={tls:t=>t.type==="http"&&t.request.scheme,icon:Ti,index:()=>0,path:Li,method:Ai,version:Fi,status:Ri,size:ki,time:t=>{const e=Gt(t),s=Ci(t);return e&&s&&s-e},timestamp:Gt,quickactions:()=>0,comment:t=>t.comment};function rc(t){return t in Di}var xe=(t=>(t.Search="search",t.Highlight="highlight",t))(xe||{});const Ii={search:"",highlight:""},lc=ue({name:"ui/filters",initialState:Ii,reducers:{setFilter(t,e){t.search=e.payload},setHighlight(t,e){t.highlight=e.payload}}}),{actions:oc,reducer:cc}=lc,{setFilter:Mi,setHighlight:Pi}=oc;function fs(t,e){return t.toSorted?t.toSorted(e):[...t].sort(e)}function Ns(t,...e){if(t.toSpliced)return t.toSpliced(...e);{const s=[...t];return s.splice(...e),s}}function bt(t){return new Map(t.map((e,s)=>[e.id,s]))}function us(t){return new Set(t.map(e=>e.id))}function Jn(t,e){return t.has(e)&&(t=new Set(t),t.delete(e)),t}function Yn(t,e,s){const i=Ns(t,s,1),l=new Map(e);l.delete(t[s].id);for(let n=i.length-1;n>=s;n--)l.set(i[n].id,n);return{view:i,_viewIndex:l}}function ac(t,e,s,i){const l=[...t],n=l.length;let o=e,a=o.get(s.id);if(a+1<n&&i(s,l[a+1])>0){o=new Map(o);do{const d=l[a+1];l[a]=d,o.set(d.id,a),a++}while(a+1<n&&i(s,l[a+1])>0);o.set(s.id,a)}else if(a>0&&i(s,l[a-1])<0){o=new Map(o);do{const d=l[a-1];l[a]=d,o.set(d.id,a),a--}while(a>0&&i(s,l[a-1])<0);o.set(s.id,a)}return l[a]=s,{view:l,_viewIndex:o}}function Qn(t,e,s,i){const l=dc(t,s,i),n=Ns(t,l,0,s),o=new Map(e);for(let a=n.length-1;a>=l;a--)o.set(n[a].id,a);return{view:n,_viewIndex:o}}function dc(t,e,s){let i=0,l=t.length;if(l===0||s(t[l-1],e)<=0)return l;for(;i<l;){const n=i+l>>>1;s(e,t[n])>=0?i=n+1:l=n}return i}function Cs(t){return t=t.filter($s),()=>Promise.all(t.map(e=>se(`/flows/${e.id}/resume`,{method:"POST"})))}function Oi(){return()=>se("/flows/resume",{method:"POST"})}function qi(t){return t=t.filter($s),()=>Promise.all(t.map(e=>se(`/flows/${e.id}/kill`,{method:"POST"})))}function fc(){return()=>se("/flows/kill",{method:"POST"})}function Hi(t){return()=>Promise.all(t.map(e=>se(`/flows/${e.id}`,{method:"DELETE"})))}function Vi(t){return()=>Promise.all(t.map(e=>se(`/flows/${e.id}/duplicate`,{method:"POST"})))}function ks(t){return t=t.filter(Ss),()=>Promise.all(t.map(e=>se(`/flows/${e.id}/replay`,{method:"POST"})))}function Ui(t){return t=t.filter(Ei),()=>Promise.all(t.map(e=>se(`/flows/${e.id}/revert`,{method:"POST"})))}function Xn(t,e){return()=>Promise.all(t.map(s=>Ie(s,{marked:e})()))}function Ie(t,e){return()=>se.put(`/flows/${t.id}`,e)}function uc(t,e,s){const i=new FormData;return e=new window.Blob([e],{type:"plain/text"}),i.append("file",e),()=>se(`/flows/${t.id}/${s}/content.data`,{method:"POST",body:i})}function Bi(){return()=>se("/clear",{method:"POST"})}function pc(t){const e=new FormData;return e.append("file",t),()=>se("/flows/dump",{method:"POST",body:e})}const Wi=_e("flows/add"),Ki=_e("flows/update"),zi=_e("flows/remove"),Es=_e("flows/receive"),Gi=_e("flows/filterUpdate"),Ji=_e("flows/sort"),Ve=_e("flows/select"),hc={list:[],_listIndex:new Map,byId:new Map,view:[],_viewIndex:new Map,sort:{column:void 0,desc:!1},selected:[],selectedIds:new Set,highlightedIds:new Set};function mc(t=hc,e){if(Es.match(e)){const{sort:s}=t,i=e.payload,l=bt(i),n=new Map(i.map(p=>[p.id,p])),o=fs(i,mt(s)),a=bt(o),d=t.selected.map(p=>n.get(p.id)).filter(p=>p!==void 0),f=us(d);return{list:i,_listIndex:l,byId:n,view:o,_viewIndex:a,sort:s,selected:d,selectedIds:f,highlightedIds:new Set}}else if(Wi.match(e)){const{flow:s,matching_filters:i}=e.payload;if(t._listIndex.has(s.id))return t;const{sort:l,selected:n,selectedIds:o}=t;let{view:a,_viewIndex:d,highlightedIds:f}=t;const h=new Map(t._listIndex);h.set(s.id,t.list.length);const p=[...t.list,s],g=new Map(t.byId);return g.set(s.id,s),(i[xe.Search]===!0||i[xe.Search]===void 0)&&({view:a,_viewIndex:d}=Qn(a,d,s,mt(l))),i[xe.Highlight]===!0&&(f=new Set(f),f.add(s.id)),{list:p,_listIndex:h,byId:g,view:a,_viewIndex:d,sort:l,selected:n,selectedIds:o,highlightedIds:f}}else if(Ki.match(e)){const{flow:s,matching_filters:i}=e.payload,{_listIndex:l,sort:n,selectedIds:o}=t;let{view:a,_viewIndex:d,selected:f,highlightedIds:h}=t;const p=t._listIndex.get(s.id),g=[...t.list];p!==void 0?g[p]=s:g.push(s);const x=new Map(t.byId);x.set(s.id,s);const v=d.get(s.id),_=v!==void 0,b=i[xe.Search]===!0||i[xe.Search]===void 0;return b&&!_?{view:a,_viewIndex:d}=Qn(a,d,s,mt(n)):!b&&_?{view:a,_viewIndex:d}=Yn(a,d,v):b&&_&&({view:a,_viewIndex:d}=ac(a,d,s,mt(n))),o.has(s.id)&&(f=f.map(w=>w.id===s.id?s:w)),i[xe.Highlight]===!0?h.has(s.id)||(h=new Set(h),h.add(s.id)):h=Jn(h,s.id),{list:g,_listIndex:l,byId:x,view:a,_viewIndex:d,sort:n,selected:f,selectedIds:o,highlightedIds:h}}else if(zi.match(e)){const s=e.payload,{sort:i}=t;let{view:l,_viewIndex:n,selected:o,selectedIds:a}=t;const d=t._listIndex.get(s);if(d===void 0)return t;const f=Ns(t.list,d,1),h=bt(f),p=new Map(t.byId);p.delete(s);const g=n.get(s);if(g!==void 0&&({view:l,_viewIndex:n}=Yn(l,n,g)),a.has(s)){if(o.length===1&&g!==void 0){const v=l[g]??l[g-1];o=v?[v]:[]}else o=o.filter(v=>v.id!==s);a=us(o)}const x=Jn(t.highlightedIds,s);return{list:f,_listIndex:h,byId:p,view:l,_viewIndex:n,sort:i,selected:o,selectedIds:a,highlightedIds:x}}else if(Gi.match(e)){const{name:s,matching_flow_ids:i}=e.payload;switch(s){case xe.Search:{const l=fs(i===null?t.list:i.map(o=>t.byId.get(o)).filter(o=>o!==void 0),mt(t.sort)),n=bt(l);return{...t,view:l,_viewIndex:n}}case xe.Highlight:return{...t,highlightedIds:new Set(i)};default:kt(s)}}else if(Ji.match(e)){const s=e.payload;let i;s.column?i=fs(t.view,mt(s)):i=t.list.filter(n=>t._viewIndex.has(n.id));const l=bt(i);return{...t,sort:s,view:i,_viewIndex:l}}else return Ve.match(e)?{...t,selected:e.payload,selectedIds:us(e.payload)}:t}function mt({column:t,desc:e}){if(!t)return(i,l)=>0;const s=Di[t];return(i,l)=>{const n=s(i),o=s(l);return n>o?e?-1:1:n<o?e?1:-1:0}}function gt(t,e){const s=t.selected[t.selected.length-1],i=t._viewIndex.get(s?.id),l=0,n=t.view.length-1;let o;i===void 0?o=e<0?l:n:(o=i+e,o=window.Math.max(o,l),o=window.Math.min(o,n));const a=t.view[o];return Ve(a?[a]:[])}function gc(t){return(e,s)=>{const{flows:i}=s();i.selectedIds.has(t.id)?e(Ve(i.selected.filter(l=>l!==t))):e(Ve([...i.selected,t]))}}function xc(t){return(e,s)=>{const{flows:i}=s(),l=i.selected[i.selected.length-1],n=i._viewIndex.get(t.id),o=i._viewIndex.get(l?.id);if(n===void 0||o===void 0)return e(Ve([t]));let a;return n<=o?a=i.view.slice(n,o+1):(a=i.view.slice(o+1,n+1),a.push(l)),e(Ve(a))}}const vc={activeModal:void 0},Yi=ue({name:"ui/modal",initialState:vc,reducers:{setActiveModal(t,e){t.activeModal=e.payload},hideModal(t){t.activeModal=void 0}}}),{actions:_c,reducer:jc}=Yi,yc=Yi.actions.hideModal.type,{setActiveModal:bc,hideModal:Qi}=_c,Zn=(()=>{const t=document.createElement("div");return t.setAttribute("contenteditable","PLAINTEXT-ONLY"),t.contentEditable==="plaintext-only"?"plaintext-only":"true"})();class ce extends A.Component{input=Te.createRef();render(){const e=je("inline-input",this.props.className);return r.jsx("span",{ref:this.input,tabIndex:0,className:e,placeholder:this.props.placeholder,onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown,onInput:this.onInput,onPaste:this.onPaste,onMouseDown:this.onMouseDown,onClick:this.onClick,children:this.props.content})}componentDidUpdate(e){e.content!==this.props.content&&this.props.onInput?.(this.props.content)}isEditing=()=>this.input.current?.contentEditable===Zn;startEditing=()=>{if(!this.input.current)return console.error("unreachable");this.isEditing()||(this.suppress_events=!0,this.input.current.blur(),this.input.current.contentEditable=Zn,window.requestAnimationFrame(()=>{if(this.input.current){if(this.input.current.focus(),this.suppress_events=!1,this.props.selectAllOnClick){const e=document.createRange();e.selectNodeContents(this.input.current);const s=window.getSelection();s?.removeAllRanges(),s?.addRange(e)}this.props.onEditStart?.()}}))};resetValue=()=>{if(!this.input.current)return console.error("unreachable");this.input.current.textContent=this.props.content,this.props.onInput?.(this.props.content)};finishEditing=()=>{if(!this.input.current)return console.error("unreachable");this.props.onEditDone(this.input.current.textContent||""),this.input.current.blur(),this.input.current.contentEditable="inherit"};onPaste=e=>{e.preventDefault();const s=e.clipboardData.getData("text/plain");document.execCommand("insertHTML",!1,s)};suppress_events=!1;onMouseDown=e=>{this.suppress_events=!0,window.addEventListener("mouseup",this.onMouseUp,{once:!0})};onMouseUp=e=>{const s=e.target===this.input.current,i=!window.getSelection()?.toString();this.props.selectAllOnClick?s&&i&&this.startEditing():s&&this.startEditing(),this.suppress_events=!1};onClick=e=>{};onFocus=e=>{if(!this.input.current)throw"unreachable";this.suppress_events||this.startEditing()};onInput=e=>{this.props.onInput?.(this.input.current?.textContent||"")};onBlur=e=>{this.suppress_events||this.finishEditing()};onKeyDown=e=>{switch(e.stopPropagation(),e.key){case"Escape":e.preventDefault(),this.resetValue(),this.finishEditing();break;case"Enter":e.shiftKey||(e.preventDefault(),this.finishEditing());break}this.props.onKeyDown?.(e)}}function $t(t){const e=N.c(15);let s;e[0]!==t.content||e[1]!==t.isValid?(s=t.isValid(t.content),e[0]=t.content,e[1]=t.isValid,e[2]=s):s=e[2];const[i,l]=A.useState(s),n=A.useRef(null);let o;e[3]!==t?(o=x=>{t.isValid(x)?t.onEditDone(x):n.current?.resetValue()},e[3]=t,e[4]=o):o=e[4];const a=o,d=i?"has-success":"has-warning";let f;e[5]!==t.className||e[6]!==d?(f=je(t.className,d),e[5]=t.className,e[6]=d,e[7]=f):f=e[7];const h=f;let p;e[8]!==t?(p=x=>l(t.isValid(x)),e[8]=t,e[9]=p):p=e[9];let g;return e[10]!==h||e[11]!==a||e[12]!==t||e[13]!==p?(g=r.jsx(ce,{...t,className:h,onInput:p,onEditDone:a,ref:n}),e[10]=h,e[11]=a,e[12]=t,e[13]=p,e[14]=g):g=e[14],g}const G=()=>Oo(),F=qo,wc=xi.withTypes(),Ts=_e("EVENTS_ADD"),Xi=_e("EVENTS_RECEIVE"),Qt=_e("events/toggleVisibility"),Zi=_e("events/toggleFilter");var er=(t=>(t.debug="debug",t.info="info",t.web="web",t.warn="warn",t.error="error",t))(er||{});const Sc={visible:!1,filters:{debug:!1,info:!0,web:!0,warn:!0,error:!0},list:[],view:[]};function $c(t=Sc,e){if(Ts.match(e)){const s=e.payload;return{...t,list:[...t.list,s],view:t.filters[s.level]?[...t.view,s]:t.view}}else{if(Xi.match(e))return{...t,list:e.payload,view:e.payload.filter(s=>t.filters[s.level])};if(Qt.match(e))return{...t,visible:!t.visible};if(Zi.match(e)){const s={...t.filters,[e.payload]:!t.filters[e.payload]};return{...t,filters:s,view:t.list.filter(i=>s[i.level])}}else return t}}function Nc(t,e="web"){return Ts({id:Math.random().toString(),message:t,level:e})}const ei={},Cc=ue({name:"ui/optionsEditor",initialState:ei,reducers:{startUpdate(t,e){t[e.payload.option]={isUpdating:!0,value:e.payload.value,error:!1}},updateSuccess(t,e){t[e.payload.option]=void 0},updateError(t,e){let s=t[e.payload.option].value;typeof s=="boolean"&&(s=!s),t[e.payload.option]={value:s,isUpdating:!1,error:e.payload.error}}},extraReducers:t=>{t.addCase(yc,()=>ei)}}),{actions:kc,reducer:Ec}=Cc,{startUpdate:Tc,updateSuccess:Lc,updateError:Rc}=kc;var ve=(t=>(t[t.Capture=0]="Capture",t[t.FlowList=1]="FlowList",t[t.Options=2]="Options",t[t.Flow=3]="Flow",t))(ve||{});const Ac=ue({name:"ui/tabs",initialState:{current:1},reducers:{setCurrent(t,e){t.current=e.payload}}}),{actions:Fc,reducer:Dc}=Ac,{setCurrent:Wt}=Fc,Ic=vi({flow:ec,modal:jc,optionsEditor:Ec,tabs:Dc,filter:cc});var St=(t=>(t.INIT="CONNECTION_INIT",t.FETCHING="CONNECTION_FETCHING",t.ESTABLISHED="CONNECTION_ESTABLISHED",t.ERROR="CONNECTION_ERROR",t))(St||{});const Mc={state:"CONNECTION_INIT",message:void 0},tr=ue({name:"connection",initialState:Mc,reducers:{startFetching:t=>{t.state==="CONNECTION_INIT"&&(t.state="CONNECTION_FETCHING")},finishFetching:t=>{t.state==="CONNECTION_FETCHING"&&(t.state="CONNECTION_ESTABLISHED")},connectionError:(t,e)=>{t.state="CONNECTION_ERROR",t.message=e.payload}}}),{startFetching:Pc,finishFetching:Oc,connectionError:qc}=tr.actions,Hc=tr.reducer,Vc={add_upstream_certs_to_client_chain:!1,allow_hosts:[],anticache:!1,anticomp:!1,block_global:!0,block_list:[],block_private:!1,body_size_limit:void 0,cert_passphrase:void 0,certs:[],ciphers_client:void 0,ciphers_server:void 0,client_certs:void 0,client_replay:[],client_replay_concurrency:1,command_history:!0,confdir:"~/.mitmproxy",connect_addr:void 0,connection_strategy:"eager",console_focus_follow:!1,content_view_lines_cutoff:512,dns_name_servers:[],dns_use_hosts_file:!0,export_preserve_original_ip:!1,hardump:"",http2:!0,http2_ping_keepalive:58,http3:!0,http_connect_send_host_header:!0,ignore_hosts:[],intercept:void 0,intercept_active:!1,keep_alt_svc_header:!1,keep_host_header:!1,key_size:2048,listen_host:"",listen_port:void 0,map_local:[],map_remote:[],mode:["regular"],modify_body:[],modify_headers:[],normalize_outbound_headers:!0,onboarding:!0,onboarding_host:"mitm.it",protobuf_definitions:void 0,proxy_debug:!1,proxyauth:void 0,rawtcp:!0,readfile_filter:void 0,request_client_cert:!1,rfile:void 0,save_stream_file:void 0,save_stream_filter:void 0,scripts:[],server:!0,server_replay:[],server_replay_extra:"forward",server_replay_ignore_content:!1,server_replay_ignore_host:!1,server_replay_ignore_params:[],server_replay_ignore_payload_params:[],server_replay_ignore_port:!1,server_replay_kill_extra:!1,server_replay_nopop:!1,server_replay_refresh:!0,server_replay_reuse:!1,server_replay_use_headers:[],show_ignored_hosts:!1,showhost:!1,ssl_insecure:!1,ssl_verify_upstream_trusted_ca:void 0,ssl_verify_upstream_trusted_confdir:void 0,stickyauth:void 0,stickycookie:void 0,store_streamed_bodies:!1,stream_large_bodies:void 0,strip_ech:!0,tcp_hosts:[],tcp_timeout:600,termlog_verbosity:"info",tls_ecdh_curve_client:void 0,tls_ecdh_curve_server:void 0,tls_version_client_max:"UNBOUNDED",tls_version_client_min:"TLS1_2",tls_version_server_max:"UNBOUNDED",tls_version_server_min:"TLS1_2",udp_hosts:[],upstream_auth:void 0,upstream_cert:!0,validate_inbound_headers:!0,view_filter:void 0,view_order:"time",view_order_reversed:!1,web_columns:["tls","icon","path","method","status","size","time"],web_debug:!1,web_host:"127.0.0.1",web_open_browser:!0,web_password:"",web_port:8081,web_static_viewer:"",websocket:!0},Xt=_e("OPTIONS_RECEIVE"),Ls=_e("OPTIONS_UPDATE"),Uc=ue({name:"options",initialState:Vc,reducers:{},extraReducers:t=>{t.addCase(Xt,(e,s)=>{const i={};for(const[l,{value:n}]of Object.entries(s.payload))i[l]=n;return i}).addCase(Ls,(e,s)=>{for(const[i,{value:l}]of Object.entries(s.payload))e[i]=l})}}),Bc=Uc.reducer;async function Wc(t,e,s){try{const i=await se.put("/options",{[t]:e});if(i.status===200)s(Lc({option:t}));else throw await i.text()}catch(i){s(Rc({option:t,error:i.toString()}))}}const Kc=Wc;function Rs(t,e){return s=>{s(Tc({option:t,value:e})),Kc(t,e,s)}}const zc={visible:!1},Gc=ue({name:"commandBar",initialState:zc,reducers:{toggleVisibility(t){t.visible=!t.visible}}}),{actions:Jc,reducer:Yc}=Gc,{toggleVisibility:sr}=Jc,Ue=_e("STATE_RECEIVE"),Be=_e("STATE_UPDATE"),Qc={available:!1,version:"",contentViews:[],servers:{},platform:"",localModeUnavailable:null},Xc=ue({name:"backendState",initialState:Qc,reducers:{},extraReducers:t=>{t.addCase(Ue,(e,s)=>({...e,available:!0,...s.payload})).addCase(Be,(e,s)=>({...e,...s.payload}))}}),Zc=Xc.reducer,ea={},ta=ue({name:"optionsMeta",initialState:ea,reducers:{},extraReducers:t=>{t.addCase(Xt,(e,s)=>s.payload).addCase(Ls,(e,s)=>({...e,...s.payload}))}}),sa=ta.reducer,ut=(t,e)=>e.listen_host&&e.listen_port?`${t}@${e.listen_host}:${e.listen_port}`:e.listen_port?`${t}@${e.listen_port}`:t,nr=t=>{let[e,s]=_s(t,"@");e||(e=s,s="");const[i,l]=wi(e,":");let n,o;if(s){let a;if(s.includes(":")?[n,a]=_s(s,":"):(n="",a=s),a&&(o=parseInt(a,10),isNaN(o)||o<0||o>65535))throw new Error(`invalid port: ${a}`)}return{full_spec:t,name:i,data:l,listen_host:n,listen_port:o}},ir=t=>ut("regular",t),ti=({listen_host:t,listen_port:e})=>({ui_id:Math.random(),active:!0,listen_host:t,listen_port:e}),rr=t=>t.selectedProcesses?`local:${t.selectedProcesses}`:"local",si=({data:t})=>({ui_id:Math.random(),active:!0,selectedProcesses:t}),lr=t=>{const e=t.file_path?`wireguard:${t.file_path}`:"wireguard";return ut(e,t)},ni=({data:t,listen_host:e,listen_port:s})=>({ui_id:Math.random(),active:!0,listen_host:e,listen_port:s,file_path:t});var Zt=(t=>(t.HTTP="http",t.HTTPS="https",t.HTTP3="http3",t.TLS="tls",t.DTLS="dtls",t.TCP="tcp",t.UDP="udp",t.DNS="dns",t.QUIC="quic",t))(Zt||{}),lt=(t=>(t.CSS="css",t.JAVASCRIPT="javascript",t.XML="xml",t.YAML="yaml",t.NONE="none",t.ERROR="error",t))(lt||{});const js=()=>({active:!1,protocol:Zt.HTTPS,destination:"",ui_id:Math.random()}),As=t=>ut(`reverse:${t.protocol}://${t.destination}`,t),na=({data:t,listen_host:e,listen_port:s})=>{let[i,l]=wi(t,"://");return l||(l=i,i=Zt.HTTPS),{ui_id:Math.random(),active:!0,protocol:i,destination:l,listen_host:e,listen_port:s}},or=t=>ut("transparent",t),ii=({listen_host:t,listen_port:e})=>({ui_id:Math.random(),active:!0,listen_host:t,listen_port:e}),cr=t=>ut("socks5",t),ri=({listen_host:t,listen_port:e})=>({ui_id:Math.random(),active:!0,listen_host:t,listen_port:e}),ar=t=>ut(`upstream:${t.destination}`,t),li=({data:t,listen_host:e,listen_port:s})=>({ui_id:Math.random(),active:!0,destination:t||"",listen_host:e,listen_port:s}),dr=t=>ut("dns",t),oi=({listen_host:t,listen_port:e})=>({ui_id:Math.random(),active:!0,listen_host:t,listen_port:e}),Xe=t=>t.active&&!t.error;async function ia(t,e){const s=e.getState().modes,i=[...s.regular.filter(Xe).map(ir),...s.local.filter(Xe).map(rr),...s.wireguard.filter(Xe).map(lr),...s.reverse.filter(Xe).map(As),...s.transparent.filter(Xe).map(or),...s.socks.filter(Xe).map(cr),...s.upstream.filter(Xe).map(ar),...s.dns.filter(Xe).map(dr)],l=await se.put("/options",{mode:i});if(l.status!==200)throw new Error(await l.text())}function ie(t){return wc(t,ia)}function ne(t,e,s){t.addCase(s.pending,(i,l)=>{const{server:n,value:o}=l.meta.arg,a=i.findIndex(d=>d.ui_id===n.ui_id);a>=0&&(i[a][e]=o,i[a].error=void 0)}),t.addCase(s.rejected,(i,l)=>{const{server:n}=l.meta.arg,o=i.findIndex(a=>a.ui_id===n.ui_id);o>=0&&(i[o].error=l.error.message)})}function we(t,e){return function(i,l){if(l.payload.servers){const n=Object.values(l.payload.servers).filter(o=>o.type===t).map(o=>nr(o.full_spec));if(n.length>0)return n.map(e);for(const o of i)o.active=!1}}}const fr=ie("modes/regular/setActive"),ur=ie("modes/regular/setListenHost"),pr=ie("modes/regular/setListenPort"),ra=[{active:!0,ui_id:Math.random()}],la=ue({name:"modes/regular",initialState:ra,reducers:{},extraReducers:t=>{ne(t,"active",fr),ne(t,"listen_host",ur),ne(t,"listen_port",pr),t.addCase(Ue,we("regular",ti)),t.addCase(Be,we("regular",ti))}}),oa=la.reducer,hr=ie("modes/local/setActive"),Nt=ie("modes/local/setSelectedProcesses"),ca=[{active:!1,selectedProcesses:"",ui_id:Math.random()}],aa=ue({name:"modes/local",initialState:ca,reducers:{},extraReducers:t=>{ne(t,"active",hr),ne(t,"selectedProcesses",Nt),t.addCase(Ue,we("local",si)),t.addCase(Be,we("local",si))}}),da=aa.reducer,mr=ie("modes/wireguard/setActive"),gr=ie("modes/wireguard/setListenHost"),xr=ie("modes/wireguard/setListenPort"),vr=ie("modes/wireguard/setFilePath"),fa=[{active:!1,ui_id:Math.random()}],ua=ue({name:"modes/wireguard",initialState:fa,reducers:{},extraReducers:t=>{ne(t,"active",mr),ne(t,"listen_host",gr),ne(t,"listen_port",xr),ne(t,"file_path",vr),t.addCase(Ue,we("wireguard",ni)),t.addCase(Be,we("wireguard",ni))}}),pa=ua.reducer,ys=ie("modes/reverse/setActive"),_r=ie("modes/reverse/setListenHost"),jr=ie("modes/reverse/setListenPort"),yr=ie("modes/reverse/setProtocol"),br=ie("modes/reverse/setDestination"),ha=[js()],wr=ue({name:"modes/reverse",initialState:ha,reducers:{addServer:t=>{t.push(js())},removeServer:(t,e)=>{const s=t.findIndex(i=>i.ui_id===e.payload.ui_id);s!==-1&&(t[s].active&&console.error("servers should be deactivated before removal"),t.splice(s,1))}},extraReducers:t=>{ne(t,"active",ys),ne(t,"listen_host",_r),ne(t,"listen_port",jr),ne(t,"protocol",yr),ne(t,"destination",br),t.addCase(Ue,e),t.addCase(Be,e);function e(s,i){if(i.payload.servers){const l=Object.fromEntries(Object.entries(i.payload.servers).filter(([o,a])=>a.type==="reverse").map(([o,a])=>[o,nr(o)])),n=[];for(const o of s){const a=As(o),d=a in l;delete l[a],n.push({...o,active:d})}for(const o of Object.values(l))n.push(na(o));return n.length>1&&Jt({...n[0],ui_id:void 0},{...js(),ui_id:void 0})&&n.shift(),n}}}}),{addServer:ma,removeServer:ga}=wr.actions,xa=wr.reducer,Sr=ie("modes/transparent/setActive"),$r=ie("modes/transparent/setListenHost"),Nr=ie("modes/transparent/setListenPort"),va=[{active:!1,ui_id:Math.random()}],_a=ue({name:"modes/transparent",initialState:va,reducers:{},extraReducers:t=>{ne(t,"active",Sr),ne(t,"listen_host",$r),ne(t,"listen_port",Nr),t.addCase(Ue,we("transparent",ii)),t.addCase(Be,we("transparent",ii))}}),ja=_a.reducer,Cr=ie("modes/socks5/setActive"),kr=ie("modes/socks5/setListenHost"),Er=ie("modes/socks5/setListenPort"),ya=[{active:!1,ui_id:Math.random()}],ba=ue({name:"modes/socks5",initialState:ya,reducers:{},extraReducers:t=>{ne(t,"active",Cr),ne(t,"listen_host",kr),ne(t,"listen_port",Er),t.addCase(Ue,we("socks5",ri)),t.addCase(Be,we("socks5",ri))}}),wa=ba.reducer,Tr=ie("modes/upstream/setActive"),Lr=ie("modes/upstream/setListenHost"),Rr=ie("modes/upstream/setListenPort"),Ar=ie("modes/upstream/setDestination"),Sa=[{active:!1,destination:"",ui_id:Math.random()}],$a=ue({name:"modes/upstream",initialState:Sa,reducers:{},extraReducers:t=>{ne(t,"active",Tr),ne(t,"listen_host",Lr),ne(t,"listen_port",Rr),ne(t,"destination",Ar),t.addCase(Ue,we("upstream",li)),t.addCase(Be,we("upstream",li))}}),Na=$a.reducer,Fr=ie("modes/dns/setActive"),Dr=ie("modes/dns/setListenHost"),Ir=ie("modes/dns/setListenPort"),Ca=[{active:!0,ui_id:Math.random()}],ka=ue({name:"modes/dns",initialState:Ca,reducers:{},extraReducers:t=>{ne(t,"active",Fr),ne(t,"listen_host",Dr),ne(t,"listen_port",Ir),t.addCase(Ue,we("dns",oi)),t.addCase(Be,we("dns",oi))}}),Ea=ka.reducer,Ta=vi({regular:oa,local:da,wireguard:pa,reverse:xa,transparent:ja,socks:wa,upstream:Na,dns:Ea}),Ct=xi("fetchProcesses",async(t,{rejectWithValue:e})=>{try{return(await se("/processes")).json()}catch(s){return e(s.message)}}),La={currentProcesses:[],isLoading:!1},Ra=ue({name:"processes",initialState:La,reducers:{},extraReducers:t=>{t.addCase(Ct.pending,e=>{e.isLoading=!0,e.error=void 0}),t.addCase(Ct.fulfilled,(e,s)=>{e.isLoading=!1,e.currentProcesses=s.payload}),t.addCase(Ct.rejected,(e,s)=>{e.isLoading=!1,e.error=s.payload})}}),Aa=Ra.reducer,Fa={commandBar:Yc,eventLog:$c,flows:mc,connection:Hc,modes:Ta,ui:Ic,options:Bc,options_meta:sa,backendState:Zc,processes:Aa},Da={immutableCheck:{warnAfter:5e5},serializableCheck:{warnAfter:5e5,ignoredPaths:["flows"]}},Et=Ho({reducer:Fa,middleware:t=>t(Da),devTools:!1});class Ia extends A.Component{container=Te.createRef();nameInput=Te.createRef();valueInput=Te.createRef();render=()=>{const[e,s]=this.props.item;return r.jsxs("div",{ref:this.container,className:"kv-row",onClick:this.onClick,onKeyDownCapture:this.onKeyDown,children:[r.jsx(ce,{ref:this.nameInput,className:"kv-key",content:e,onEditStart:this.props.onEditStart,onEditDone:i=>this.props.onEditDone([i,s]),selectAllOnClick:!0}),": ",r.jsx(ce,{ref:this.valueInput,className:"kv-value",content:s,onEditStart:this.props.onEditStart,onEditDone:i=>this.props.onEditDone([e,i]),placeholder:"empty",selectAllOnClick:!0})]})};onClick=e=>{e.target===this.container.current&&this.props.onClickEmptyArea()};onKeyDown=e=>{e.target===this.valueInput.current?.input.current&&e.key==="Tab"&&this.props.onTabNext()}}class Mr extends A.Component{rowRefs={};currentlyEditing;justFinishedEditing;state={currentList:this.props.data||[],initialList:this.props.data};static getDerivedStateFromProps(e,s){return e.data!==s.initialList?{currentList:e.data||[],initialList:e.data}:null}render=()=>{this.rowRefs={};const e=this.state.currentList.map((s,i)=>r.jsx(Ia,{item:s,onEditStart:()=>this.currentlyEditing=i,onEditDone:l=>this.onEditDone(i,l),onClickEmptyArea:()=>this.onClickEmptyArea(i),onTabNext:()=>this.onTabNext(i),ref:l=>{this.rowRefs[i]=l}},i));return r.jsxs("div",{className:je("kv-editor",this.props.className),onMouseDown:this.onMouseDown,children:[e,r.jsx("div",{onClick:s=>{s.preventDefault(),this.onClickEmptyArea(this.state.currentList.length-1)},className:"kv-add-row fa fa-plus-square-o",role:"button","aria-label":"Add"})]})};onEditDone=(e,s)=>{const i=[...this.state.currentList];s[0]?i[e]=s:i.splice(e,1),this.currentlyEditing=void 0,Bt.isEqual(this.state.currentList,i)||this.props.onChange(i),this.setState({currentList:i})};onClickEmptyArea=e=>{if(this.justFinishedEditing)return;const s=[...this.state.currentList];s.splice(e+1,0,["",""]),this.setState({currentList:s},()=>this.rowRefs[e+1]?.nameInput.current?.startEditing())};onTabNext=e=>{e==this.state.currentList.length-1&&this.onClickEmptyArea(e)};onMouseDown=e=>{this.justFinishedEditing=this.currentlyEditing}}function Pr(t,e){const s=N.c(6),[i,l]=A.useState(),[n,o]=A.useState();let a;s[0]!==n||s[1]!==t?(a=()=>{n&&n.abort();const f=new AbortController;return se(t,{signal:f.signal}).then(Ma).then(h=>{l(h)}).catch(h=>{f.signal.aborted||l(`Error getting content: ${h}.`)}),o(f),()=>{f.signal.aborted||f.abort()}},s[0]=n,s[1]=t,s[2]=a):a=s[2];let d;return s[3]!==e||s[4]!==t?(d=[t,e],s[3]=e,s[4]=t,s[5]=d):d=s[5],A.useEffect(a,d),i}function Ma(t){if(!t.ok)throw`${t.status} ${t.statusText}`.trim();return t.text()}function Or(t,e,s,i,l){const n=N.c(11);let o;n[0]!==t||n[1]!==i||n[2]!==e||n[3]!==s?(o=be.getContentURL(t,e,s,i),n[0]=t,n[1]=i,n[2]=e,n[3]=s,n[4]=o):o=n[4];const d=Pr(o,l);let f;if(d)try{let h;n[5]!==d?(h=JSON.parse(d),n[5]=d,n[6]=h):h=n[6],f=h}catch{let h;n[7]!==d?(h={text:d,description:"Network Error",syntax_highlight:"error",view_name:"raw"},n[7]=d,n[8]=h):h=n[8];const p=h;if(e==="messages"){let g;n[9]!==p?(g=[p],n[9]=p,n[10]=g):g=n[10],f=g}else f=p}else f=void 0;return f}const qr=Te.memo(function({icon:e,text:s,className:i,title:l,onOpenFile:n,onClick:o}){let a;return r.jsxs("a",{href:"#",onClick:d=>{a.click(),o&&o(d)},className:i,title:l,children:[r.jsx("i",{className:"fa fa-fw "+e}),s,r.jsx("input",{ref:d=>{a=d},className:"hidden",type:"file",onChange:d=>{d.preventDefault(),d.target.files&&d.target.files.length>0&&n(d.target.files[0]),a.value=""}})]})});function pe(t){const e=N.c(11),{onClick:s,children:i,icon:l,disabled:n,className:o,title:a}=t;let d;e[0]!==o?(d=je(o,"btn btn-default"),e[0]=o,e[1]=d):d=e[1];const f=n?void 0:s;let h;e[2]!==l?(h=l&&r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fa "+l})," "]}),e[2]=l,e[3]=h):h=e[3];let p;return e[4]!==i||e[5]!==n||e[6]!==d||e[7]!==f||e[8]!==h||e[9]!==a?(p=r.jsxs("button",{className:d,onClick:f,disabled:n,title:a,children:[h,i]}),e[4]=i,e[5]=n,e[6]=d,e[7]=f,e[8]=h,e[9]=a,e[10]=p):p=e[10],p}function Pa(t){const e=N.c(11),{initialContent:s,onChange:i,language:l,readonly:n}=t,o=n===void 0?!1:n,a=Oa;let d;e:switch(l){case lt.YAML:{let p;e[0]===Symbol.for("react.memo_cache_sentinel")?(p=[Wo()],e[0]=p):p=e[0],d=p;break e}case lt.XML:{let p;e[1]===Symbol.for("react.memo_cache_sentinel")?(p=[Bo()],e[1]=p):p=e[1],d=p;break e}case lt.JAVASCRIPT:{let p;e[2]===Symbol.for("react.memo_cache_sentinel")?(p=[Uo()],e[2]=p):p=e[2],d=p;break e}case lt.CSS:{let p;e[3]===Symbol.for("react.memo_cache_sentinel")?(p=[Vo()],e[3]=p):p=e[3],d=p;break e}case void 0:case null:case lt.NONE:case lt.ERROR:{let p;e[4]===Symbol.for("react.memo_cache_sentinel")?(p=[],e[4]=p):p=e[4],d=p;break e}default:{console.error("Unexpected syntax highlighting language: ",l);let g;e[5]===Symbol.for("react.memo_cache_sentinel")?(g=[],e[5]=g):g=e[5],d=g}}const f=d;let h;return e[6]!==f||e[7]!==s||e[8]!==i||e[9]!==o?(h=r.jsx("div",{className:"codeeditor",onKeyDown:a,children:r.jsx(Ko,{value:s,onChange:i,readOnly:o,extensions:f})}),e[6]=f,e[7]=s,e[8]=i,e[9]=o,e[10]=h):h=e[10],h}function Oa(t){return t.stopPropagation()}const Hr=Te.memo(function(e){const s=N.c(9),{content:i,maxLines:l,showMore:n}=e;if(i.length===0)return null;let o;if(s[0]!==i||s[1]!==l||s[2]!==n){let d;s[4]!==l||s[5]!==n?(d=(f,h)=>h===l?r.jsxs("button",{onClick:n,className:"btn btn-xs btn-info",children:[r.jsx("i",{className:"fa fa-angle-double-down","aria-hidden":"true"})," ","Show more"]},"showmore"):r.jsx("div",{children:f},h),s[4]=l,s[5]=n,s[6]=d):d=s[6],o=i.split(`
`).map(d),s[0]=i,s[1]=l,s[2]=n,s[3]=o}else o=s[3];let a;return s[7]!==o?(a=r.jsx("pre",{children:o}),s[7]=o,s[8]=a):a=s[8],a}),qa=()=>{const t=N.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=r.jsx("li",{role:"separator",className:"divider"}),t[0]=e):e=t[0],e};function ke(t){const e=N.c(8);let s,i,l;if(e[0]!==t){const{onClick:a,children:d,...f}=t;i=d,s=f,l=h=>{h.preventDefault(),a()},e[0]=t,e[1]=s,e[2]=i,e[3]=l}else s=e[1],i=e[2],l=e[3];const n=l;let o;return e[4]!==s||e[5]!==i||e[6]!==n?(o=r.jsx("li",{children:r.jsx("a",{href:"#",onClick:n,...s,children:i})}),e[4]=s,e[5]=i,e[6]=n,e[7]=o):o=e[7],o}const Lt=Te.memo(function({text:e,children:s,options:i,className:l,onOpen:n,...o}){const[a,d]=A.useState(!1),{refs:f,floatingStyles:h}=zo(i),p=x=>{d(x),n&&n(x)};A.useEffect(()=>{f.floating.current&&document.addEventListener("click",x=>{f.floating.current?.contains(x.target)?document.addEventListener("click",()=>p(!1),{once:!0}):(x.preventDefault(),x.stopPropagation(),p(!1))},{once:!0,capture:!0})},[f.floating.current]);let g;return a?g=r.jsx("ul",{className:"dropdown-menu show",ref:f.setFloating,style:h,children:s}):g=null,r.jsxs(r.Fragment,{children:[r.jsx("a",{href:"#",ref:f.setReference,className:je(l,{open:a}),onClick:x=>{x.preventDefault(),p(!0)},...o,children:e}),g]})});function Vr(t){const e=N.c(16),{value:s,onChange:i}=t,l=F(Ha);let n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n=r.jsx("i",{className:"fa fa-fw fa-files-o"}),e[0]=n):n=e[0];let o;e[1]===Symbol.for("react.memo_cache_sentinel")?(o=r.jsx("b",{children:"View:"}),e[1]=o):o=e[1];let a;e[2]!==s?(a=s.toLowerCase(),e[2]=s,e[3]=a):a=e[3];let d;e[4]===Symbol.for("react.memo_cache_sentinel")?(d=r.jsx("span",{className:"caret"}),e[4]=d):d=e[4];let f;e[5]!==a?(f=r.jsxs("span",{children:[n," ",o," ",a," ",d]}),e[5]=a,e[6]=f):f=e[6];const h=f;let p;e[7]===Symbol.for("react.memo_cache_sentinel")?(p={placement:"top-end"},e[7]=p):p=e[7];let g;if(e[8]!==l||e[9]!==i){let v;e[11]!==i?(v=_=>r.jsx(ke,{onClick:()=>i(_),children:_.toLowerCase().replace("_"," ")},_),e[11]=i,e[12]=v):v=e[12],g=l.map(v),e[8]=l,e[9]=i,e[10]=g}else g=e[10];let x;return e[13]!==h||e[14]!==g?(x=r.jsx(Lt,{text:h,className:"btn btn-default btn-xs",options:p,children:g}),e[13]=h,e[14]=g,e[15]=x):x=e[15],x}function Ha(t){return t.backendState.contentViews||[]}function Va(t){const e=N.c(8),{flow:s,message:i}=t,[l,n]=A.useState(!1);if(l){let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=()=>n(!1),e[0]=o):o=e[0];let a;return e[1]!==s||e[2]!==i?(a=r.jsx(Ua,{flow:s,message:i,stopEdit:o}),e[1]=s,e[2]=i,e[3]=a):a=e[3],a}else{let o;e[4]===Symbol.for("react.memo_cache_sentinel")?(o=()=>n(!0),e[4]=o):o=e[4];let a;return e[5]!==s||e[6]!==i?(a=r.jsx(Ba,{flow:s,message:i,startEdit:o}),e[5]=s,e[6]=i,e[7]=a):a=e[7],a}}function Ua(t){const e=N.c(23),{flow:s,message:i,stopEdit:l}=t,n=G(),o=s.request===i?"request":"response";let a;e[0]!==s||e[1]!==i?(a=be.getContentURL(s,i),e[0]=s,e[1]=i,e[2]=a):a=e[2];const f=Pr(a,i.contentHash),[h,p]=A.useState();let g;e[3]!==f||e[4]!==n||e[5]!==h||e[6]!==s||e[7]!==o||e[8]!==l?(g=async()=>{await n(Ie(s,{[o]:{content:h||f||""}})),l()},e[3]=f,e[4]=n,e[5]=h,e[6]=s,e[7]=o,e[8]=l,e[9]=g):g=e[9];const x=g;let v;e[10]===Symbol.for("react.memo_cache_sentinel")?(v=r.jsx("h5",{children:"[Editing]"}),e[10]=v):v=e[10];let _;e[11]!==x?(_=r.jsx(pe,{onClick:x,icon:"fa-check text-success",className:"btn-xs",children:"Done"}),e[11]=x,e[12]=_):_=e[12];let b;e[13]!==l?(b=r.jsx(pe,{onClick:()=>l(),icon:"fa-times text-danger",className:"btn-xs",children:"Cancel"}),e[13]=l,e[14]=b):b=e[14];let w;e[15]!==_||e[16]!==b?(w=r.jsxs("div",{className:"controls",children:[v,_," ",b]}),e[15]=_,e[16]=b,e[17]=w):w=e[17];const C=f||"";let k;e[18]!==C?(k=r.jsx(Pa,{initialContent:C,onChange:p}),e[18]=C,e[19]=k):k=e[19];let T;return e[20]!==w||e[21]!==k?(T=r.jsxs("div",{className:"contentview",children:[w,k]},"edit"),e[20]=w,e[21]=k,e[22]=T):T=e[22],T}function Ba(t){const e=N.c(43),{flow:s,message:i,startEdit:l}=t,n=G(),o=s.request===i?"request":"response";let a;e[0]!==s.id||e[1]!==o?(a=V=>V.ui.flow.contentViewFor[s.id+o]||"Auto",e[0]=s.id,e[1]=o,e[2]=a):a=e[2];const d=F(a),[f,h]=A.useState(F(Wa));let p;e[3]!==f?(p=()=>h(Math.max(1024,f*2)),e[3]=f,e[4]=p):p=e[4];const g=p,x=Or(s,i,d,f+1,i.contentHash);let v;if(i.contentLength===0)v="No content";else if(x===void 0)v="Loading...";else{const V=`${x.view_name} ${x.description}`;let W;e[5]!==V?(W=V.trimEnd(),e[5]=V,e[6]=W):W=e[6],v=W}let _;e[7]!==v?(_=r.jsx("h5",{children:v}),e[7]=v,e[8]=_):_=e[8];let b;e[9]!==x||e[10]!==s||e[11]!==i?(b=x&&x?.text.length>0&&r.jsx(Ka,{flow:s,message:i}),e[9]=x,e[10]=s,e[11]=i,e[12]=b):b=e[12];let w;e[13]!==l?(w=r.jsx(pe,{onClick:l,icon:"fa-edit",className:"btn-xs",children:"Edit"}),e[13]=l,e[14]=w):w=e[14];let C;e[15]!==n||e[16]!==s||e[17]!==o?(C=r.jsx(qr,{icon:"fa-upload",text:"Replace",title:"Upload a file to replace the content.",onOpenFile:V=>n(uc(s,V,o)),className:"btn btn-default btn-xs"}),e[15]=n,e[16]=s,e[17]=o,e[18]=C):C=e[18];let k;e[19]!==n||e[20]!==s.id||e[21]!==o?(k=V=>n(_i({messageId:s.id+o,contentView:V})),e[19]=n,e[20]=s.id,e[21]=o,e[22]=k):k=e[22];let T;e[23]!==d||e[24]!==k?(T=r.jsx(Vr,{value:d,onChange:k}),e[23]=d,e[24]=k,e[25]=T):T=e[25];let M;e[26]!==_||e[27]!==b||e[28]!==w||e[29]!==C||e[30]!==T?(M=r.jsxs("div",{className:"controls",children:[_,b," ",w," ",C," ",T]}),e[26]=_,e[27]=b,e[28]=w,e[29]=C,e[30]=T,e[31]=M):M=e[31];let I;e[32]!==s||e[33]!==i?(I=bs.matches(i)&&r.jsx(bs,{flow:s,message:i}),e[32]=s,e[33]=i,e[34]=I):I=e[34];const P=x?.text??"";let O;e[35]!==f||e[36]!==g||e[37]!==P?(O=r.jsx(Hr,{content:P,maxLines:f,showMore:g}),e[35]=f,e[36]=g,e[37]=P,e[38]=O):O=e[38];let U;return e[39]!==I||e[40]!==O||e[41]!==M?(U=r.jsxs("div",{className:"contentview",children:[M,I,O]},"view"),e[39]=I,e[40]=O,e[41]=M,e[42]=U):U=e[42],U}function Wa(t){return t.options.content_view_lines_cutoff}function Ka({flow:t,message:e}){const s=t.request===e?"request":"response",i=F(f=>f.ui.flow.contentViewFor[t.id+s]||"Auto"),[l,n]=A.useState(!1),[o,a]=A.useState(!1),d=async()=>{try{const f=be.getContentURL(t,e,i);a(!0);const h=await se(f);if(!h.ok)throw new Error(`${h.status} ${h.statusText}`.trim());const p=await h.json();await sc(p),n(!0),setTimeout(()=>n(!1),2e3)}catch(f){console.error(f)}finally{a(!1)}};return r.jsx(pe,{onClick:d,icon:"fa-clipboard",className:"btn-xs",disabled:o,children:l?"Copied!":"Copy"})}const za=/^image\/(png|jpe?g|gif|webp|vnc.microsoft.icon|x-icon|svg\+xml)$/i;bs.matches=t=>za.test(be.getContentType(t)||"");function bs(t){const e=N.c(5),{flow:s,message:i}=t;let l;e[0]!==s||e[1]!==i?(l=be.getContentURL(s,i),e[0]=s,e[1]=i,e[2]=l):l=e[2];let n;return e[3]!==l?(n=r.jsx("div",{className:"flowview-image",children:r.jsx("img",{src:l,alt:"preview",className:"img-thumbnail"})}),e[3]=l,e[4]=n):n=e[4],n}function Ga(t){const e=N.c(24),{flow:s}=t,i=G();let l;e[0]!==i||e[1]!==s?(l=g=>i(Ie(s,{request:{method:g}})),e[0]=i,e[1]=s,e[2]=l):l=e[2];let n;e[3]!==s.request.method||e[4]!==l?(n=r.jsx($t,{content:s.request.method,onEditDone:l,isValid:Ya,selectAllOnClick:!0}),e[3]=s.request.method,e[4]=l,e[5]=n):n=e[5];let o;e[6]!==s.request?(o=ct.pretty_url(s.request),e[6]=s.request,e[7]=o):o=e[7];let a;e[8]!==i||e[9]!==s?(a=g=>i(Ie(s,{request:{path:"",...$i(g)}})),e[8]=i,e[9]=s,e[10]=a):a=e[10];let d;e[11]!==o||e[12]!==a?(d=r.jsx($t,{content:o,onEditDone:a,isValid:Ja}),e[11]=o,e[12]=a,e[13]=d):d=e[13];let f;e[14]!==i||e[15]!==s?(f=g=>i(Ie(s,{request:{http_version:g}})),e[14]=i,e[15]=s,e[16]=f):f=e[16];let h;e[17]!==s.request.http_version||e[18]!==f?(h=r.jsx($t,{content:s.request.http_version,onEditDone:f,isValid:Ni,selectAllOnClick:!0}),e[17]=s.request.http_version,e[18]=f,e[19]=h):h=e[19];let p;return e[20]!==n||e[21]!==d||e[22]!==h?(p=r.jsx("div",{className:"first-line request-line",children:r.jsxs("div",{children:[n," ",d," ",h]})}),e[20]=n,e[21]=d,e[22]=h,e[23]=p):p=e[23],p}function Ja(t){return!!$i(t)?.host}function Ya(t){return t.length>0}function Qa(t){const e=N.c(19),{flow:s}=t,i=G();let l;e[0]!==i||e[1]!==s?(l=p=>i(Ie(s,{response:{http_version:p}})),e[0]=i,e[1]=s,e[2]=l):l=e[2];let n;e[3]!==s.response.http_version||e[4]!==l?(n=r.jsx($t,{content:s.response.http_version,onEditDone:l,isValid:Ni,selectAllOnClick:!0}),e[3]=s.response.http_version,e[4]=l,e[5]=n):n=e[5];const o=s.response.status_code+"";let a;e[6]!==i||e[7]!==s?(a=p=>i(Ie(s,{response:{code:parseInt(p)}})),e[6]=i,e[7]=s,e[8]=a):a=e[8];let d;e[9]!==o||e[10]!==a?(d=r.jsx($t,{content:o,onEditDone:a,isValid:Xa,selectAllOnClick:!0}),e[9]=o,e[10]=a,e[11]=d):d=e[11];let f;e[12]!==i||e[13]!==s?(f=s.response.http_version!=="HTTP/2.0"&&r.jsxs(r.Fragment,{children:[" ",r.jsx(ce,{content:s.response.reason,onEditDone:p=>i(Ie(s,{response:{msg:p}})),selectAllOnClick:!0})]}),e[12]=i,e[13]=s,e[14]=f):f=e[14];let h;return e[15]!==n||e[16]!==d||e[17]!==f?(h=r.jsxs("div",{className:"first-line response-line",children:[n," ",d,f]}),e[15]=n,e[16]=d,e[17]=f,e[18]=h):h=e[18],h}function Xa(t){return/^\d+$/.test(t)}function Za(t){const e=N.c(7),{flow:s,message:i}=t,l=G(),n=s.request===i?"request":"response";let o;e[0]!==l||e[1]!==s||e[2]!==n?(o=d=>l(Ie(s,{[n]:{headers:d}})),e[0]=l,e[1]=s,e[2]=n,e[3]=o):o=e[3];let a;return e[4]!==i.headers||e[5]!==o?(a=r.jsx(Mr,{className:"headers",data:i.headers,onChange:o}),e[4]=i.headers,e[5]=o,e[6]=a):a=e[6],a}function ed(t){const e=N.c(9),{flow:s,message:i}=t,l=G(),n=s.request===i?"request":"response";if(!!!be.get_first_header(i,/^trailer$/i))return null;let a,d;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=r.jsx("hr",{}),d=r.jsx("h5",{children:"HTTP Trailers"}),e[0]=a,e[1]=d):(a=e[0],d=e[1]);let f;e[2]!==l||e[3]!==s||e[4]!==n?(f=p=>l(Ie(s,{[n]:{trailers:p}})),e[2]=l,e[3]=s,e[4]=n,e[5]=f):f=e[5];let h;return e[6]!==i.trailers||e[7]!==f?(h=r.jsxs(r.Fragment,{children:[a,d,r.jsx(Mr,{className:"trailers",data:i.trailers,onChange:f})]}),e[6]=i.trailers,e[7]=f,e[8]=h):h=e[8],h}const Ur=A.memo(function(e){const s=N.c(20),{flow:i,message:l}=e,n=i.request===l?"request":"response",o=i.request===l?Ga:Qa;let a;s[0]!==o||s[1]!==i?(a=r.jsx(o,{flow:i}),s[0]=o,s[1]=i,s[2]=a):a=s[2];let d;s[3]!==i||s[4]!==l?(d=r.jsx(Za,{flow:i,message:l}),s[3]=i,s[4]=l,s[5]=d):d=s[5];let f;s[6]===Symbol.for("react.memo_cache_sentinel")?(f=r.jsx("hr",{}),s[6]=f):f=s[6];const h=i.id+n;let p;s[7]!==i||s[8]!==l||s[9]!==h?(p=r.jsx(Va,{flow:i,message:l},h),s[7]=i,s[8]=l,s[9]=h,s[10]=p):p=s[10];let g;s[11]!==i||s[12]!==l?(g=r.jsx(ed,{flow:i,message:l}),s[11]=i,s[12]=l,s[13]=g):g=s[13];let x;return s[14]!==n||s[15]!==a||s[16]!==d||s[17]!==p||s[18]!==g?(x=r.jsxs("section",{className:n,children:[a,d,f,p,g]}),s[14]=n,s[15]=a,s[16]=d,s[17]=p,s[18]=g,s[19]=x):x=s[19],x});function Br(){const t=N.c(2),e=F(td);let s;return t[0]!==e?(s=r.jsx(Ur,{flow:e,message:e.request}),t[0]=e,t[1]=s):s=t[1],s}function td(t){return t.flows.selected[0]}Br.displayName="Request";function Wr(){const t=N.c(2),e=F(sd);let s;return t[0]!==e?(s=r.jsx(Ur,{flow:e,message:e.response}),t[0]=e,t[1]=s):s=t[1],s}function sd(t){return t.flows.selected[0]}Wr.displayName="Response";const nd=t=>{const e=N.c(3),{message:s}=t,i=s.query?s.op_code:s.response_code,l=s.truncation?"(Truncated)":"";let n;return e[0]!==i||e[1]!==l?(n=r.jsxs("div",{children:[i," ",l]}),e[0]=i,e[1]=l,e[2]=n):n=e[2],n},id=t=>{const e=N.c(10),{message:s}=t,i=s.recursion_desired?"Recursive ":"";let l;e[0]!==i?(l=r.jsxs("h5",{children:[i,"Question"]}),e[0]=i,e[1]=l):l=e[1];let n;e[2]===Symbol.for("react.memo_cache_sentinel")?(n=r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Type"}),r.jsx("th",{children:"Class"})]})}),e[2]=n):n=e[2];let o;e[3]!==s.questions?(o=s.questions.map(od),e[3]=s.questions,e[4]=o):o=e[4];let a;e[5]!==o?(a=r.jsxs("table",{children:[n,r.jsx("tbody",{children:o})]}),e[5]=o,e[6]=a):a=e[6];let d;return e[7]!==l||e[8]!==a?(d=r.jsxs(r.Fragment,{children:[l,a]}),e[7]=l,e[8]=a,e[9]=d):d=e[9],d},ps=t=>{const e=N.c(7),{name:s,values:i}=t;let l;e[0]!==s?(l=r.jsx("h5",{children:s}),e[0]=s,e[1]=l):l=e[1];let n;e[2]!==i?(n=i.length>0?r.jsxs("table",{children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Type"}),r.jsx("th",{children:"Class"}),r.jsx("th",{children:"TTL"}),r.jsx("th",{children:"Data"})]})}),r.jsx("tbody",{children:i.map(cd)})]}):"—",e[2]=i,e[3]=n):n=e[3];let o;return e[4]!==l||e[5]!==n?(o=r.jsxs(r.Fragment,{children:[l,n]}),e[4]=l,e[5]=n,e[6]=o):o=e[6],o},Kr=t=>{const e=N.c(24),{type:s,message:i}=t,l="dns-"+s,n=`first-line ${s}-line`;let o;e[0]!==i?(o=r.jsx(nd,{message:i}),e[0]=i,e[1]=o):o=e[1];let a;e[2]!==n||e[3]!==o?(a=r.jsx("div",{className:n,children:o}),e[2]=n,e[3]=o,e[4]=a):a=e[4];let d;e[5]!==i?(d=r.jsx(id,{message:i}),e[5]=i,e[6]=d):d=e[6];let f;e[7]===Symbol.for("react.memo_cache_sentinel")?(f=r.jsx("hr",{}),e[7]=f):f=e[7];const h=`${i.authoritative_answer?"Authoritative ":""}${i.recursion_available?"Recursive ":""}Answer`;let p;e[8]!==i.answers||e[9]!==h?(p=r.jsx(ps,{name:h,values:i.answers}),e[8]=i.answers,e[9]=h,e[10]=p):p=e[10];let g;e[11]===Symbol.for("react.memo_cache_sentinel")?(g=r.jsx("hr",{}),e[11]=g):g=e[11];let x;e[12]!==i.authorities?(x=r.jsx(ps,{name:"Authority",values:i.authorities}),e[12]=i.authorities,e[13]=x):x=e[13];let v;e[14]===Symbol.for("react.memo_cache_sentinel")?(v=r.jsx("hr",{}),e[14]=v):v=e[14];let _;e[15]!==i.additionals?(_=r.jsx(ps,{name:"Additional",values:i.additionals}),e[15]=i.additionals,e[16]=_):_=e[16];let b;return e[17]!==l||e[18]!==x||e[19]!==_||e[20]!==a||e[21]!==d||e[22]!==p?(b=r.jsxs("section",{className:l,children:[a,d,f,p,g,x,v,_]}),e[17]=l,e[18]=x,e[19]=_,e[20]=a,e[21]=d,e[22]=p,e[23]=b):b=e[23],b};function zr(){const t=N.c(2),e=F(rd);let s;return t[0]!==e.request?(s=r.jsx(Kr,{type:"request",message:e.request}),t[0]=e.request,t[1]=s):s=t[1],s}function rd(t){return t.flows.selected[0]}zr.displayName="Request";function Gr(){const t=N.c(2),e=F(ld);let s;return t[0]!==e.response?(s=r.jsx(Kr,{type:"response",message:e.response}),t[0]=e.response,t[1]=s):s=t[1],s}function ld(t){return t.flows.selected[0]}Gr.displayName="Response";function od(t,e){return r.jsxs("tr",{children:[r.jsx("td",{children:t.name}),r.jsx("td",{children:t.type}),r.jsx("td",{children:t.class})]},e)}function cd(t,e){return r.jsxs("tr",{children:[r.jsx("td",{children:t.name}),r.jsx("td",{children:t.type}),r.jsx("td",{children:t.class}),r.jsx("td",{children:t.ttl}),r.jsx("td",{children:JSON.stringify(t.data).replace(/^"|"$/g,"")})]},e)}function Ht(t,e){return e?(e=[e[0],e[1]],e[0].includes(":")&&(e[0]=`[${e[0]}]`),r.jsxs("tr",{children:[r.jsxs("td",{children:[t,":"]}),r.jsx("td",{children:e.join(":")})]})):r.jsx(r.Fragment,{})}function ci(t){const e=N.c(26),{conn:s}=t;let i;if("address"in s){let f;e[0]!==s.address?(f=Ht("Address",s.address),e[0]=s.address,e[1]=f):f=e[1];let h;e[2]!==s.peername?(h=Ht("Resolved address",s.peername),e[2]=s.peername,e[3]=h):h=e[3];let p;e[4]!==s.sockname?(p=Ht("Source address",s.sockname),e[4]=s.sockname,e[5]=p):p=e[5];let g;e[6]!==f||e[7]!==h||e[8]!==p?(g=r.jsxs(r.Fragment,{children:[f,h,p]}),e[6]=f,e[7]=h,e[8]=p,e[9]=g):g=e[9],i=g}else{let f;e[10]!==s.peername?(f=Ht("Address",s.peername),e[10]=s.peername,e[11]=f):f=e[11],i=f}let l;e[12]!==s.sni?(l=s.sni?r.jsxs("tr",{children:[r.jsxs("td",{children:[r.jsx("abbr",{title:"TLS Server Name Indication",children:"SNI"}),":"]}),r.jsx("td",{children:s.sni})]}):null,e[12]=s.sni,e[13]=l):l=e[13];let n;e[14]!==s.alpn?(n=s.alpn?r.jsxs("tr",{children:[r.jsxs("td",{children:[r.jsx("abbr",{title:"ALPN protocol negotiated",children:"ALPN"}),":"]}),r.jsx("td",{children:s.alpn})]}):null,e[14]=s.alpn,e[15]=n):n=e[15];let o;e[16]!==s.tls_version?(o=s.tls_version?r.jsxs("tr",{children:[r.jsx("td",{children:"TLS Version:"}),r.jsx("td",{children:s.tls_version})]}):null,e[16]=s.tls_version,e[17]=o):o=e[17];let a;e[18]!==s.cipher?(a=s.cipher?r.jsxs("tr",{children:[r.jsx("td",{children:"TLS Cipher:"}),r.jsx("td",{children:s.cipher})]}):null,e[18]=s.cipher,e[19]=a):a=e[19];let d;return e[20]!==i||e[21]!==l||e[22]!==n||e[23]!==o||e[24]!==a?(d=r.jsx("table",{className:"connection-table",children:r.jsxs("tbody",{children:[i,l,n,o,a]})}),e[20]=i,e[21]=l,e[22]=n,e[23]=o,e[24]=a,e[25]=d):d=e[25],d}function ai(t){return r.jsx("dl",{className:"cert-attributes",children:t.map(([e,s])=>r.jsxs(A.Fragment,{children:[r.jsx("dt",{children:e}),r.jsx("dd",{children:s})]},e))})}function ad(t){const e=N.c(46),{flow:s}=t,i=s.server_conn?.cert;if(!i){let W;return e[0]===Symbol.for("react.memo_cache_sentinel")?(W=r.jsx(r.Fragment,{}),e[0]=W):W=e[0],W}let l;e[1]===Symbol.for("react.memo_cache_sentinel")?(l=r.jsx("h4",{children:"Server Certificate"},"name"),e[1]=l):l=e[1];let n;e[2]===Symbol.for("react.memo_cache_sentinel")?(n=r.jsx("td",{children:"Type"}),e[2]=n):n=e[2];let o;e[3]!==i.keyinfo[0]||e[4]!==i.keyinfo[1]?(o=r.jsxs("tr",{children:[n,r.jsxs("td",{children:[i.keyinfo[0],", ",i.keyinfo[1]," bits"]})]}),e[3]=i.keyinfo[0],e[4]=i.keyinfo[1],e[5]=o):o=e[5];let a;e[6]===Symbol.for("react.memo_cache_sentinel")?(a=r.jsx("td",{children:"SHA256 digest"}),e[6]=a):a=e[6];let d;e[7]!==i.sha256?(d=r.jsxs("tr",{children:[a,r.jsx("td",{children:i.sha256})]}),e[7]=i.sha256,e[8]=d):d=e[8];let f;e[9]===Symbol.for("react.memo_cache_sentinel")?(f=r.jsx("td",{children:"Valid from"}),e[9]=f):f=e[9];let h;e[10]!==i.notbefore?(h=dt(i.notbefore,{includeMilliseconds:!1}),e[10]=i.notbefore,e[11]=h):h=e[11];let p;e[12]!==h?(p=r.jsxs("tr",{children:[f,r.jsx("td",{children:h})]}),e[12]=h,e[13]=p):p=e[13];let g;e[14]===Symbol.for("react.memo_cache_sentinel")?(g=r.jsx("td",{children:"Valid to"}),e[14]=g):g=e[14];let x;e[15]!==i.notafter?(x=dt(i.notafter,{includeMilliseconds:!1}),e[15]=i.notafter,e[16]=x):x=e[16];let v;e[17]!==x?(v=r.jsxs("tr",{children:[g,r.jsx("td",{children:x})]}),e[17]=x,e[18]=v):v=e[18];let _;e[19]===Symbol.for("react.memo_cache_sentinel")?(_=r.jsx("td",{children:"Subject Alternative Names"}),e[19]=_):_=e[19];let b;e[20]!==i.altnames?(b=i.altnames.join(", "),e[20]=i.altnames,e[21]=b):b=e[21];let w;e[22]!==b?(w=r.jsxs("tr",{children:[_,r.jsx("td",{children:b})]}),e[22]=b,e[23]=w):w=e[23];let C;e[24]===Symbol.for("react.memo_cache_sentinel")?(C=r.jsx("td",{children:"Subject"}),e[24]=C):C=e[24];let k;e[25]!==i.subject?(k=ai(i.subject),e[25]=i.subject,e[26]=k):k=e[26];let T;e[27]!==k?(T=r.jsxs("tr",{children:[C,r.jsx("td",{children:k})]}),e[27]=k,e[28]=T):T=e[28];let M;e[29]===Symbol.for("react.memo_cache_sentinel")?(M=r.jsx("td",{children:"Issuer"}),e[29]=M):M=e[29];let I;e[30]!==i.issuer?(I=ai(i.issuer),e[30]=i.issuer,e[31]=I):I=e[31];let P;e[32]!==I?(P=r.jsxs("tr",{children:[M,r.jsx("td",{children:I})]}),e[32]=I,e[33]=P):P=e[33];let O;e[34]===Symbol.for("react.memo_cache_sentinel")?(O=r.jsx("td",{children:"Serial"}),e[34]=O):O=e[34];let U;e[35]!==i.serial?(U=r.jsxs("tr",{children:[O,r.jsx("td",{children:i.serial})]}),e[35]=i.serial,e[36]=U):U=e[36];let V;return e[37]!==v||e[38]!==w||e[39]!==T||e[40]!==P||e[41]!==U||e[42]!==o||e[43]!==d||e[44]!==p?(V=r.jsxs(r.Fragment,{children:[l,r.jsx("table",{className:"certificate-table",children:r.jsxs("tbody",{children:[o,d,p,v,w,T,P,U]})})]}),e[37]=v,e[38]=w,e[39]=T,e[40]=P,e[41]=U,e[42]=o,e[43]=d,e[44]=p,e[45]=V):V=e[45],V}function Jr(t){const e=N.c(11),{flow:s}=t;let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=r.jsx("h4",{children:"Client Connection"}),e[0]=i):i=e[0];let l;e[1]!==s.client_conn?(l=r.jsx(ci,{conn:s.client_conn}),e[1]=s.client_conn,e[2]=l):l=e[2];let n;e[3]!==s.server_conn?(n=s.server_conn?.address&&r.jsxs(r.Fragment,{children:[r.jsx("h4",{children:"Server Connection"}),r.jsx(ci,{conn:s.server_conn})]}),e[3]=s.server_conn,e[4]=n):n=e[4];let o;e[5]!==s?(o=r.jsx(ad,{flow:s}),e[5]=s,e[6]=o):o=e[6];let a;return e[7]!==l||e[8]!==n||e[9]!==o?(a=r.jsxs("section",{className:"detail",children:[i,l,n,o]}),e[7]=l,e[8]=n,e[9]=o,e[10]=a):a=e[10],a}Jr.displayName="Connection";function Yr(t){const e=N.c(7),{flow:s}=t,i=s.error.msg;let l;e[0]!==s.error.timestamp?(l=dt(s.error.timestamp),e[0]=s.error.timestamp,e[1]=l):l=e[1];let n;e[2]!==l?(n=r.jsx("div",{children:r.jsx("small",{children:l})}),e[2]=l,e[3]=n):n=e[3];let o;return e[4]!==s.error.msg||e[5]!==n?(o=r.jsx("section",{className:"error",children:r.jsxs("div",{className:"alert alert-warning",children:[i,n]})}),e[4]=s.error.msg,e[5]=n,e[6]=o):o=e[6],o}Yr.displayName="Error";function dd(t){const e=N.c(4),{t:s,deltaTo:i,title:l}=t;let n;return e[0]!==i||e[1]!==s||e[2]!==l?(n=s?r.jsxs("tr",{children:[r.jsxs("td",{children:[l,":"]}),r.jsxs("td",{children:[dt(s),i&&r.jsxs("span",{className:"text-muted",children:["(",yi(1e3*(s-i)),")"]})]})]}):r.jsx("tr",{}),e[0]=i,e[1]=s,e[2]=l,e[3]=n):n=e[3],n}function Qr(t){const e=N.c(26),{flow:s}=t;let i;s.type==="http"?i=s.request.timestamp_start:i=s.client_conn.timestamp_start;const l=s.server_conn?.timestamp_start;let n,o,a,d;if(e[0]!==s.client_conn.timestamp_end||e[1]!==s.client_conn.timestamp_start||e[2]!==s.client_conn.timestamp_tls_setup||e[3]!==s.request||e[4]!==s.response?.timestamp_end||e[5]!==s.response?.timestamp_start||e[6]!==s.server_conn?.timestamp_end||e[7]!==s.server_conn?.timestamp_tcp_setup||e[8]!==s.server_conn?.timestamp_tls_setup||e[9]!==s.type||e[10]!==i||e[11]!==l){const g=[{title:"Server conn. initiated",t:l,deltaTo:i},{title:"Server conn. TCP handshake",t:s.server_conn?.timestamp_tcp_setup,deltaTo:i},{title:"Server conn. TLS handshake",t:s.server_conn?.timestamp_tls_setup,deltaTo:i},{title:"Server conn. closed",t:s.server_conn?.timestamp_end,deltaTo:i},{title:"Client conn. established",t:s.client_conn.timestamp_start,deltaTo:s.type==="http"?i:void 0},{title:"Client conn. TLS handshake",t:s.client_conn.timestamp_tls_setup,deltaTo:i},{title:"Client conn. closed",t:s.client_conn.timestamp_end,deltaTo:i}];s.type==="http"&&g.push({title:"First request byte",t:s.request.timestamp_start},{title:"Request complete",t:s.request.timestamp_end,deltaTo:i},{title:"First response byte",t:s.response?.timestamp_start,deltaTo:i},{title:"Response complete",t:s.response?.timestamp_end,deltaTo:i}),a="timing",e[16]===Symbol.for("react.memo_cache_sentinel")?(d=r.jsx("h4",{children:"Timing"}),e[16]=d):d=e[16],o="timing-table",n=g.filter(pd).sort(ud).map(fd),e[0]=s.client_conn.timestamp_end,e[1]=s.client_conn.timestamp_start,e[2]=s.client_conn.timestamp_tls_setup,e[3]=s.request,e[4]=s.response?.timestamp_end,e[5]=s.response?.timestamp_start,e[6]=s.server_conn?.timestamp_end,e[7]=s.server_conn?.timestamp_tcp_setup,e[8]=s.server_conn?.timestamp_tls_setup,e[9]=s.type,e[10]=i,e[11]=l,e[12]=n,e[13]=o,e[14]=a,e[15]=d}else n=e[12],o=e[13],a=e[14],d=e[15];let f;e[17]!==n?(f=r.jsx("tbody",{children:n}),e[17]=n,e[18]=f):f=e[18];let h;e[19]!==o||e[20]!==f?(h=r.jsx("table",{className:o,children:f}),e[19]=o,e[20]=f,e[21]=h):h=e[21];let p;return e[22]!==a||e[23]!==d||e[24]!==h?(p=r.jsxs("section",{className:a,children:[d,h]}),e[22]=a,e[23]=d,e[24]=h,e[25]=p):p=e[25],p}function fd(t){const{title:e,t:s,deltaTo:i}=t;return r.jsx(dd,{title:e,t:s,deltaTo:i},e)}function ud(t,e){return t.t-e.t}function pd(t){return!!t.t}Qr.displayName="Timing";function Fs({flow:t,messages_meta:e}){const s=G(),i=F(f=>f.ui.flow.contentViewFor[t.id+"messages"]||"Auto"),[l,n]=A.useState(F(f=>f.options.content_view_lines_cutoff)),o=A.useCallback(()=>n(Math.max(1024,l*2)),[l]),a=Or(t,"messages",i,l+1,t.id+e.count)??[];let d=l;return r.jsxs("div",{className:"contentview",children:[r.jsxs("div",{className:"controls",children:[r.jsxs("h5",{children:[e.count," Messages"]}),r.jsx(Vr,{value:i,onChange:f=>s(_i({messageId:t.id+"messages",contentView:f}))})]}),a.map((f,h)=>{const p=`fa fa-fw fa-arrow-${f.from_client?"right text-primary":"left text-danger"}`,g=r.jsxs("div",{children:[r.jsxs("small",{children:[r.jsx("i",{className:p}),r.jsx("span",{className:"pull-right",children:f.timestamp&&dt(f.timestamp)})]}),r.jsx(Hr,{content:f.text,maxLines:d,showMore:o})]},h);return d-=f.text.split(`
`).length,g})]})}function Xr(t){const e=N.c(8),{flow:s}=t;let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=r.jsx("h4",{children:"WebSocket"}),e[0]=i):i=e[0];let l;e[1]!==s?(l=r.jsx(Fs,{flow:s,messages_meta:s.websocket.messages_meta}),e[1]=s,e[2]=l):l=e[2];let n;e[3]!==s.websocket?(n=r.jsx(hd,{websocket:s.websocket}),e[3]=s.websocket,e[4]=n):n=e[4];let o;return e[5]!==l||e[6]!==n?(o=r.jsxs("section",{className:"websocket",children:[i,l,n]}),e[5]=l,e[6]=n,e[7]=o):o=e[7],o}Xr.displayName="WebSocket";function hd(t){const e=N.c(10),{websocket:s}=t;if(!s.timestamp_end)return null;const i=s.close_reason?`(${s.close_reason})`:"";let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=r.jsx("i",{className:"fa fa-fw fa-window-close text-muted"}),e[0]=l):l=e[0];const n=s.closed_by_client?"client":"server",o=s.close_code;let a;e[1]!==s.timestamp_end?(a=dt(s.timestamp_end),e[1]=s.timestamp_end,e[2]=a):a=e[2];let d;e[3]!==a?(d=r.jsx("small",{className:"pull-right",children:a}),e[3]=a,e[4]=d):d=e[4];let f;return e[5]!==i||e[6]!==n||e[7]!==d||e[8]!==s.close_code?(f=r.jsxs("div",{children:[l,"  Closed by ",n," ","with code ",o," ",i,".",d]}),e[5]=i,e[6]=n,e[7]=d,e[8]=s.close_code,e[9]=f):f=e[9],f}function Zr(t){const e=N.c(7),{flow:s}=t,i=G();let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=r.jsx("h4",{children:"Comment"}),e[0]=l):l=e[0];let n;e[1]!==i||e[2]!==s?(n=a=>{i(Ie(s,{comment:a}))},e[1]=i,e[2]=s,e[3]=n):n=e[3];let o;return e[4]!==s.comment||e[5]!==n?(o=r.jsxs("section",{className:"timing",children:[l,r.jsx(ce,{className:"kv-value",content:s.comment,onEditDone:n,placeholder:"empty",selectAllOnClick:!0})]}),e[4]=s.comment,e[5]=n,e[6]=o):o=e[6],o}Zr.displayName="Comment";function es(t){const e=N.c(3),[s,i]=A.useState();let l,n;return e[0]!==t?(l=()=>{const o=new AbortController;return se(`./flows/${t}/llm.json`,{signal:o.signal}).then(md).then(a=>i(a)).catch(a=>{o.signal.aborted||(console.warn("Failed to load LLM data:",a),i("error"))}),()=>o.abort()},n=[t],e[0]=t,e[1]=l,e[2]=n):(l=e[1],n=e[2]),A.useEffect(l,n),s}function md(t){if(!t.ok)throw new Error(`${t.status}`);return t.json()}function el(){const t=N.c(20),e=F(vd),s=es(e.id);if(!s||s==="error"||!s.request){const x=s==="error"?"Failed to load LLM data.":"Loading...";let v;return t[0]!==x?(v=r.jsx("section",{className:"llm-tab",children:r.jsx("div",{className:"llm-loading",children:x})}),t[0]=x,t[1]=v):v=t[1],v}const i=s.request,l=s.provider||"unknown";let n;t[2]!==l?(n=r.jsx("span",{className:"llm-provider",children:l}),t[2]=l,t[3]=n):n=t[3];const o=i.model||"unknown";let a;t[4]!==o?(a=r.jsx("span",{className:"llm-model",children:o}),t[4]=o,t[5]=a):a=t[5];let d;t[6]!==n||t[7]!==a?(d=r.jsxs("div",{className:"llm-header",children:[n,a]}),t[6]=n,t[7]=a,t[8]=d):d=t[8];let f;t[9]!==i.system?(f=i.system&&r.jsx(at,{title:"System Prompt",defaultCollapsed:!0,children:typeof i.system=="string"?r.jsx("pre",{className:"llm-content",children:i.system}):r.jsx(ft,{data:i.system,defaultCollapsed:!1})}),t[9]=i.system,t[10]=f):f=t[10];let h;t[11]!==i.tools?(h=i.tools&&i.tools.length>0&&r.jsx(at,{title:`Tools (${i.tools.length})`,defaultCollapsed:!0,children:i.tools.map(xd)}),t[11]=i.tools,t[12]=h):h=t[12];let p;t[13]!==i.messages?(p=i.messages&&i.messages.length>0&&r.jsx(at,{title:`Messages (${i.messages.length})`,children:i.messages.map(gd)}),t[13]=i.messages,t[14]=p):p=t[14];let g;return t[15]!==d||t[16]!==f||t[17]!==h||t[18]!==p?(g=r.jsxs("section",{className:"llm-tab",children:[d,f,h,p]}),t[15]=d,t[16]=f,t[17]=h,t[18]=p,t[19]=g):g=t[19],g}function gd(t,e){const s=t;return r.jsx(ss,{label:`[${e+1}] ${s.role||"unknown"}`,children:r.jsx(Td,{content:s.content})},e)}function xd(t,e){const s=t;return r.jsxs(ss,{label:`[${e+1}] ${s.name||"unnamed"}`,defaultCollapsed:!0,children:[s.description!=null&&r.jsxs("div",{className:"llm-msg-part",children:[r.jsx("div",{className:"llm-msg-part-label",children:"description"}),r.jsx("pre",{className:"llm-item-content",children:String(s.description)})]}),s.input_schema!=null&&r.jsxs("div",{className:"llm-msg-part",children:[r.jsx("div",{className:"llm-msg-part-label",children:"input_schema"}),r.jsx(ft,{data:s.input_schema})]})]},e)}function vd(t){return t.flows.selected[0]}el.displayName="LLM Request";function tl(){const t=N.c(24),e=F(yd),s=es(e.id);if(!s||s==="error"||!s.response){const v=s==="error"?"Failed to load LLM data.":s?"No LLM response data.":"Loading...";let _;return t[0]!==v?(_=r.jsx("section",{className:"llm-tab",children:r.jsx("div",{className:"llm-loading",children:v})}),t[0]=v,t[1]=_):_=t[1],_}const i=s.response,l=s.provider||"unknown";let n;t[2]!==l?(n=r.jsx("span",{className:"llm-provider",children:l}),t[2]=l,t[3]=n):n=t[3];const o=i.model||"unknown";let a;t[4]!==o?(a=r.jsx("span",{className:"llm-model",children:o}),t[4]=o,t[5]=a):a=t[5];let d;t[6]!==n||t[7]!==a?(d=r.jsxs("div",{className:"llm-header",children:[n,a]}),t[6]=n,t[7]=a,t[8]=d):d=t[8];let f;t[9]!==i.blocks?(f=i.blocks&&i.blocks.length>0&&r.jsx(at,{title:`Content Blocks (${i.blocks.length})`,children:i.blocks.map(jd)}),t[9]=i.blocks,t[10]=f):f=t[10];let h;t[11]!==i.content?(h=i.content&&r.jsx(at,{title:"Content",children:r.jsx("pre",{className:"llm-content",children:i.content})}),t[11]=i.content,t[12]=h):h=t[12];let p;t[13]!==i.tool_calls?(p=i.tool_calls&&i.tool_calls.length>0&&r.jsx(at,{title:`Tool Calls (${i.tool_calls.length})`,children:i.tool_calls.map(_d)}),t[13]=i.tool_calls,t[14]=p):p=t[14];let g;t[15]!==i.finish_reason||t[16]!==i.stop_reason?(g=(i.stop_reason||i.finish_reason)&&r.jsx(at,{title:i.stop_reason?"Stop Reason":"Finish Reason",children:r.jsx("div",{className:"llm-meta-value",children:i.stop_reason||i.finish_reason})}),t[15]=i.finish_reason,t[16]=i.stop_reason,t[17]=g):g=t[17];let x;return t[18]!==d||t[19]!==f||t[20]!==h||t[21]!==p||t[22]!==g?(x=r.jsxs("section",{className:"llm-tab",children:[d,f,h,p,g]}),t[18]=d,t[19]=f,t[20]=h,t[21]=p,t[22]=g,t[23]=x):x=t[23],x}function _d(t,e){return r.jsx(ss,{label:`[${e+1}] ${t.function.name} (${t.id})`,children:typeof t.function.arguments=="object"?r.jsx(ft,{data:t.function.arguments}):r.jsx("pre",{className:"llm-item-content",children:String(t.function.arguments)})},e)}function jd(t,e){return r.jsxs(ss,{label:`[${e+1}] ${t.type}${t.name?` ${t.name}`:""}${t.id?` (${t.id})`:""}`,children:[t.content&&r.jsx("pre",{className:"llm-item-content",children:t.content}),t.input!=null&&t.input!==""&&(typeof t.input=="object"?r.jsx(ft,{data:t.input}):r.jsx("pre",{className:"llm-item-content",children:String(t.input)}))]},e)}function yd(t){return t.flows.selected[0]}tl.displayName="LLM Response";function Vt(t){const e=N.c(7),{className:s,display:i,copyText:l}=t,[n,o]=A.useState(!1);let a;e[0]!==l?(a=g=>{g.stopPropagation(),navigator.clipboard.writeText(l).then(()=>{o(!0),setTimeout(()=>o(!1),1500)})},e[0]=l,e[1]=a):a=e[1];const d=a,f=`${s} json-leaf-copyable${n?" json-leaf-copied":""}`,h=n?"Copied!":"Click to copy";let p;return e[2]!==i||e[3]!==d||e[4]!==f||e[5]!==h?(p=r.jsx("span",{className:f,onClick:d,title:h,children:i}),e[2]=i,e[3]=d,e[4]=f,e[5]=h,e[6]=p):p=e[6],p}function ts(t){const e=N.c(18),{value:s,defaultCollapsed:i}=t;if(s===null){let o;return e[0]===Symbol.for("react.memo_cache_sentinel")?(o=r.jsx(Vt,{className:"json-null",display:"null",copyText:"null"}),e[0]=o):o=e[0],o}if(typeof s=="boolean"){const o=String(s),a=String(s);let d;return e[1]!==o||e[2]!==a?(d=r.jsx(Vt,{className:"json-boolean",display:o,copyText:a}),e[1]=o,e[2]=a,e[3]=d):d=e[3],d}if(typeof s=="number"){const o=String(s),a=String(s);let d;return e[4]!==o||e[5]!==a?(d=r.jsx(Vt,{className:"json-number",display:o,copyText:a}),e[4]=o,e[5]=a,e[6]=d):d=e[6],d}if(typeof s=="string"){const o=`"${s}"`;let a;return e[7]!==o||e[8]!==s?(a=r.jsx(Vt,{className:"json-string",display:o,copyText:s}),e[7]=o,e[8]=s,e[9]=a):a=e[9],a}if(Array.isArray(s)){let o;return e[10]!==i||e[11]!==s?(o=r.jsx(Sd,{items:s,defaultCollapsed:i}),e[10]=i,e[11]=s,e[12]=o):o=e[12],o}if(typeof s=="object"){const o=s;let a;return e[13]!==i||e[14]!==o?(a=r.jsx(bd,{obj:o,defaultCollapsed:i}),e[13]=i,e[14]=o,e[15]=a):a=e[15],a}const l=String(s);let n;return e[16]!==l?(n=r.jsx("span",{children:l}),e[16]=l,e[17]=n):n=e[17],n}function bd(t){const e=N.c(19),{obj:s,defaultCollapsed:i}=t,[l,n]=A.useState(i);let o;e[0]!==s?(o=Object.entries(s),e[0]=s,e[1]=o):o=e[1];const a=o;let d;e[2]===Symbol.for("react.memo_cache_sentinel")?(d=()=>n(wd),e[2]=d):d=e[2];const f=d;if(a.length===0){let _;return e[3]===Symbol.for("react.memo_cache_sentinel")?(_=r.jsx("span",{children:"{}"}),e[3]=_):_=e[3],_}if(l){let _,b;e[4]===Symbol.for("react.memo_cache_sentinel")?(_=r.jsxs("span",{className:"json-toggle",onClick:f,children:["▶"," "]}),b=r.jsx("span",{className:"json-bracket",children:"{"}),e[4]=_,e[5]=b):(_=e[4],b=e[5]);const w=a.length===1?"key":"keys";let C;e[6]!==a.length||e[7]!==w?(C=r.jsxs("span",{className:"json-collapsed-hint",children:[" ",a.length," ",w," "]}),e[6]=a.length,e[7]=w,e[8]=C):C=e[8];let k;e[9]===Symbol.for("react.memo_cache_sentinel")?(k=r.jsx("span",{className:"json-bracket",children:"}"}),e[9]=k):k=e[9];let T;return e[10]!==C?(T=r.jsxs("span",{children:[_,b,C,k]}),e[10]=C,e[11]=T):T=e[11],T}let h,p;e[12]===Symbol.for("react.memo_cache_sentinel")?(h=r.jsxs("span",{className:"json-toggle",onClick:f,children:["▼"," "]}),p=r.jsx("span",{className:"json-bracket",children:"{"}),e[12]=h,e[13]=p):(h=e[12],p=e[13]);let g;e[14]!==a?(g=r.jsx("div",{className:"json-indent",children:a.map((_,b)=>{const[w,C]=_;return r.jsxs("div",{className:"json-entry",children:[r.jsxs("span",{className:"json-key",children:['"',w,'"']}),r.jsx("span",{className:"json-colon",children:": "}),r.jsx(ts,{value:C,defaultCollapsed:!0}),b<a.length-1&&r.jsx("span",{children:","})]},w)})}),e[14]=a,e[15]=g):g=e[15];let x;e[16]===Symbol.for("react.memo_cache_sentinel")?(x=r.jsx("span",{className:"json-bracket",children:"}"}),e[16]=x):x=e[16];let v;return e[17]!==g?(v=r.jsxs("span",{children:[h,p,g,x]}),e[17]=g,e[18]=v):v=e[18],v}function wd(t){return!t}function Sd(t){const e=N.c(21),{items:s,defaultCollapsed:i}=t,[l,n]=A.useState(i);let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=()=>n($d),e[0]=o):o=e[0];const a=o;if(s.length===0){let v;return e[1]===Symbol.for("react.memo_cache_sentinel")?(v=r.jsx("span",{children:"[]"}),e[1]=v):v=e[1],v}if(l){let v,_;e[2]===Symbol.for("react.memo_cache_sentinel")?(v=r.jsxs("span",{className:"json-toggle",onClick:a,children:["▶"," "]}),_=r.jsx("span",{className:"json-bracket",children:"["}),e[2]=v,e[3]=_):(v=e[2],_=e[3]);const b=s.length===1?"item":"items";let w;e[4]!==s.length||e[5]!==b?(w=r.jsxs("span",{className:"json-collapsed-hint",children:[" ",s.length," ",b," "]}),e[4]=s.length,e[5]=b,e[6]=w):w=e[6];let C;e[7]===Symbol.for("react.memo_cache_sentinel")?(C=r.jsx("span",{className:"json-bracket",children:"]"}),e[7]=C):C=e[7];let k;return e[8]!==w?(k=r.jsxs("span",{children:[v,_,w,C]}),e[8]=w,e[9]=k):k=e[9],k}let d,f;e[10]===Symbol.for("react.memo_cache_sentinel")?(d=r.jsxs("span",{className:"json-toggle",onClick:a,children:["▼"," "]}),f=r.jsx("span",{className:"json-bracket",children:"["}),e[10]=d,e[11]=f):(d=e[10],f=e[11]);let h;if(e[12]!==s){let v;e[14]!==s.length?(v=(_,b)=>r.jsxs("div",{className:"json-entry",children:[r.jsx(ts,{value:_,defaultCollapsed:!0}),b<s.length-1&&r.jsx("span",{children:","})]},b),e[14]=s.length,e[15]=v):v=e[15],h=s.map(v),e[12]=s,e[13]=h}else h=e[13];let p;e[16]!==h?(p=r.jsx("div",{className:"json-indent",children:h}),e[16]=h,e[17]=p):p=e[17];let g;e[18]===Symbol.for("react.memo_cache_sentinel")?(g=r.jsx("span",{className:"json-bracket",children:"]"}),e[18]=g):g=e[18];let x;return e[19]!==p?(x=r.jsxs("span",{children:[d,f,p,g]}),e[19]=p,e[20]=x):x=e[20],x}function $d(t){return!t}function sl(t){const e=N.c(2),{data:s}=t;let i;return e[0]!==s?(i=r.jsx("pre",{className:"llm-json json-viewer",children:r.jsx(ts,{value:s,defaultCollapsed:!1})}),e[0]=s,e[1]=i):i=e[1],i}function ft(t){const e=N.c(3),{data:s,defaultCollapsed:i}=t,l=i===void 0?!0:i;let n;return e[0]!==s||e[1]!==l?(n=r.jsx("div",{className:"llm-inline-json json-viewer",children:r.jsx(ts,{value:s,defaultCollapsed:l})}),e[0]=s,e[1]=l,e[2]=n):n=e[2],n}function nl(){const t=N.c(4),e=F(Nd),s=es(e.id);if(!s||s==="error"||!s.request_json){const l=s==="error"?"Failed to load LLM data.":s?"No LLM request JSON.":"Loading...";let n;return t[0]!==l?(n=r.jsx("section",{className:"llm-tab",children:r.jsx("div",{className:"llm-loading",children:l})}),t[0]=l,t[1]=n):n=t[1],n}let i;return t[2]!==s.request_json?(i=r.jsx("section",{className:"llm-tab",children:r.jsx(sl,{data:s.request_json})}),t[2]=s.request_json,t[3]=i):i=t[3],i}function Nd(t){return t.flows.selected[0]}nl.displayName="LLM Request JSON";function il(){const t=N.c(4),e=F(Cd),s=es(e.id);if(!s||s==="error"||!s.response_json){const l=s==="error"?"Failed to load LLM data.":s?"No LLM response JSON.":"Loading...";let n;return t[0]!==l?(n=r.jsx("section",{className:"llm-tab",children:r.jsx("div",{className:"llm-loading",children:l})}),t[0]=l,t[1]=n):n=t[1],n}let i;return t[2]!==s.response_json?(i=r.jsx("section",{className:"llm-tab",children:r.jsx(sl,{data:s.response_json})}),t[2]=s.response_json,t[3]=i):i=t[3],i}function Cd(t){return t.flows.selected[0]}il.displayName="LLM Response JSON";function rl(t){const e=N.c(6),{targetRef:s}=t,[i,l]=A.useState(!1);let n;e[0]!==s?(n=h=>{h.stopPropagation();const p=s.current?.innerText??"";navigator.clipboard.writeText(p).then(()=>{l(!0),setTimeout(()=>l(!1),1500)})},e[0]=s,e[1]=n):n=e[1];const o=n,a=`llm-copy-btn${i?" llm-copy-btn-copied":""}`,d=i?"✓":"⎘";let f;return e[2]!==o||e[3]!==a||e[4]!==d?(f=r.jsx("span",{className:a,onClick:o,title:"Copy",children:d}),e[2]=o,e[3]=a,e[4]=d,e[5]=f):f=e[5],f}function at(t){const e=N.c(17),{title:s,defaultCollapsed:i,children:l}=t,n=i===void 0?!1:i,[o,a]=A.useState(n),d=A.useRef(null);let f;e[0]===Symbol.for("react.memo_cache_sentinel")?(f=()=>a(kd),e[0]=f):f=e[0];const h=f,p=o?"▶":"▼";let g;e[1]!==p?(g=r.jsx("span",{className:"llm-toggle-icon",children:p}),e[1]=p,e[2]=g):g=e[2];let x;e[3]!==s?(x=r.jsx("span",{className:"llm-section-title-text",children:s}),e[3]=s,e[4]=x):x=e[4];let v;e[5]!==o?(v=!o&&r.jsx(rl,{targetRef:d}),e[5]=o,e[6]=v):v=e[6];let _;e[7]!==g||e[8]!==x||e[9]!==v?(_=r.jsxs("h5",{className:"llm-section-title llm-section-toggle",onClick:h,children:[g,x,v]}),e[7]=g,e[8]=x,e[9]=v,e[10]=_):_=e[10];let b;e[11]!==l||e[12]!==o?(b=!o&&r.jsx("div",{className:"llm-section-body",ref:d,children:l}),e[11]=l,e[12]=o,e[13]=b):b=e[13];let w;return e[14]!==_||e[15]!==b?(w=r.jsxs("div",{className:"llm-section",children:[_,b]}),e[14]=_,e[15]=b,e[16]=w):w=e[16],w}function kd(t){return!t}function ss(t){const e=N.c(17),{label:s,defaultCollapsed:i,children:l}=t,n=i===void 0?!1:i,[o,a]=A.useState(n),d=A.useRef(null);let f;e[0]===Symbol.for("react.memo_cache_sentinel")?(f=()=>a(Ed),e[0]=f):f=e[0];const h=f,p=o?"▶":"▼";let g;e[1]!==p?(g=r.jsx("span",{className:"llm-toggle-icon",children:p}),e[1]=p,e[2]=g):g=e[2];let x;e[3]!==s?(x=r.jsx("span",{className:"llm-item-header-text",children:s}),e[3]=s,e[4]=x):x=e[4];let v;e[5]!==o?(v=!o&&r.jsx(rl,{targetRef:d}),e[5]=o,e[6]=v):v=e[6];let _;e[7]!==g||e[8]!==x||e[9]!==v?(_=r.jsxs("div",{className:"llm-item-header",onClick:h,children:[g,x,v]}),e[7]=g,e[8]=x,e[9]=v,e[10]=_):_=e[10];let b;e[11]!==l||e[12]!==o?(b=!o&&r.jsx("div",{className:"llm-item-body",ref:d,children:l}),e[11]=l,e[12]=o,e[13]=b):b=e[13];let w;return e[14]!==_||e[15]!==b?(w=r.jsxs("div",{className:"llm-item",children:[_,b]}),e[14]=_,e[15]=b,e[16]=w):w=e[16],w}function Ed(t){return!t}function Td(t){const e=N.c(10),{content:s}=t;if(typeof s=="string"){let n;return e[0]!==s?(n=r.jsx("pre",{className:"llm-item-content",children:s}),e[0]=s,e[1]=n):n=e[1],n}if(Array.isArray(s)){let n;e[2]!==s?(n=s.map(Ld),e[2]=s,e[3]=n):n=e[3];let o;return e[4]!==n?(o=r.jsx(r.Fragment,{children:n}),e[4]=n,e[5]=o):o=e[5],o}if(typeof s=="object"&&s!==null){let n;return e[6]!==s?(n=r.jsx(ft,{data:s}),e[6]=s,e[7]=n):n=e[7],n}const i=String(s);let l;return e[8]!==i?(l=r.jsx("pre",{className:"llm-item-content",children:i}),e[8]=i,e[9]=l):l=e[9],l}function Ld(t,e){return r.jsx(Rd,{part:t},e)}function Rd(t){const e=N.c(28),{part:s}=t,i=s.type||"text";switch(i){case"text":{let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=r.jsx("div",{className:"llm-msg-part-label",children:"text"}),e[0]=l):l=e[0];const n=s.text;let o;return e[1]!==n?(o=r.jsxs("div",{className:"llm-msg-part",children:[l,r.jsx("pre",{className:"llm-item-content",children:n})]}),e[1]=n,e[2]=o):o=e[2],o}case"tool_use":{const l=s.name;let n;e[3]!==l?(n=r.jsxs("div",{className:"llm-msg-part-label",children:["tool_use: ",l]}),e[3]=l,e[4]=n):n=e[4];let o;e[5]!==s.input?(o=s.input!=null&&r.jsx(ft,{data:s.input}),e[5]=s.input,e[6]=o):o=e[6];let a;return e[7]!==n||e[8]!==o?(a=r.jsxs("div",{className:"llm-msg-part",children:[n,o]}),e[7]=n,e[8]=o,e[9]=a):a=e[9],a}case"tool_result":{const l=s.tool_use_id?`: ${s.tool_use_id}`:"";let n;e[10]!==l?(n=r.jsxs("div",{className:"llm-msg-part-label",children:["tool_result",l]}),e[10]=l,e[11]=n):n=e[11];let o;e[12]!==s.content?(o=typeof s.content=="string"?r.jsx("pre",{className:"llm-item-content",children:s.content}):s.content!=null?r.jsx(ft,{data:s.content}):null,e[12]=s.content,e[13]=o):o=e[13];let a;return e[14]!==n||e[15]!==o?(a=r.jsxs("div",{className:"llm-msg-part",children:[n,o]}),e[14]=n,e[15]=o,e[16]=a):a=e[16],a}case"image":case"image_url":{let l;return e[17]===Symbol.for("react.memo_cache_sentinel")?(l=r.jsx("div",{className:"llm-msg-part-label",children:"[image]"}),e[17]=l):l=e[17],l}case"thinking":{let l;e[18]===Symbol.for("react.memo_cache_sentinel")?(l=r.jsx("div",{className:"llm-msg-part-label",children:"thinking"}),e[18]=l):l=e[18];const n=s.thinking||s.text;let o;return e[19]!==n?(o=r.jsxs("div",{className:"llm-msg-part",children:[l,r.jsx("pre",{className:"llm-item-content",children:n})]}),e[19]=n,e[20]=o):o=e[20],o}default:{let l;e[21]!==i?(l=r.jsx("div",{className:"llm-msg-part-label",children:i}),e[21]=i,e[22]=l):l=e[22];let n;e[23]!==s.text?(n=s.text!=null&&r.jsx("pre",{className:"llm-item-content",children:s.text}),e[23]=s.text,e[24]=n):n=e[24];let o;return e[25]!==l||e[26]!==n?(o=r.jsxs("div",{className:"llm-msg-part",children:[l,n]}),e[25]=l,e[26]=n,e[27]=o):o=e[27],o}}}function ll(t){const e=N.c(2),{flow:s}=t;let i;return e[0]!==s?(i=r.jsx("section",{className:"tcp",children:r.jsx(Fs,{flow:s,messages_meta:s.messages_meta})}),e[0]=s,e[1]=i):i=e[1],i}ll.displayName="Stream Data";function ol(t){const e=N.c(2),{flow:s}=t;let i;return e[0]!==s?(i=r.jsx("section",{className:"udp",children:r.jsx(Fs,{flow:s,messages_meta:s.messages_meta})}),e[0]=s,e[1]=i):i=e[1],i}ol.displayName="Datagrams";const di={request:Br,response:Wr,error:Yr,connection:Jr,timing:Qr,websocket:Xr,tcpmessages:ll,udpmessages:ol,dnsrequest:zr,dnsresponse:Gr,comment:Zr,llmrequest:el,llmrequestjson:nl,llmresponse:tl,llmresponsejson:il};function ws(t){let e;switch(t.type){case"http":e=["request"].filter(s=>t[s]),t.is_llm&&e.push("llmrequestjson","llmrequest"),e.push(...["response","websocket"].filter(s=>t[s])),t.is_llm&&e.push("llmresponsejson","llmresponse");break;case"tcp":e=["tcpmessages"];break;case"udp":e=["udpmessages"];break;case"dns":e=["request","response"].filter(s=>t[s]).map(s=>"dns"+s);break}return t.error&&e.push("error"),e.push("connection"),e.push("timing"),e.push("comment"),e}function Ad(){const t=N.c(15),e=G(),s=F(Dd);let i=F(Fd);if(s==null){let _;return t[0]===Symbol.for("react.memo_cache_sentinel")?(_=r.jsx(r.Fragment,{}),t[0]=_):_=t[0],_}const l=ws(s);l.indexOf(i)<0&&(i==="response"&&s.error?i="error":i==="error"&&"response"in s?i="response":i=l[0]);const n=di[i],o="flow-detail",a="nav-tabs nav-tabs-sm";let d;t[1]!==e?(d=()=>e(Ve([])),t[1]=e,t[2]=d):d=t[2];let f;t[3]===Symbol.for("react.memo_cache_sentinel")?(f=r.jsx("i",{className:"fa fa-times-circle"}),t[3]=f):f=t[3];let h;t[4]!==d?(h=r.jsx("button",{"data-testid":"close-button-id",className:"close-button",onClick:d,children:f}),t[4]=d,t[5]=h):h=t[5];const p=l.map(_=>r.jsx("a",{href:"#",className:je({active:i===_}),onClick:b=>{b.preventDefault(),e(Kt(_))},children:di[_].displayName},_));let g;t[6]!==h||t[7]!==p?(g=r.jsxs("nav",{className:a,children:[h,p]}),t[6]=h,t[7]=p,t[8]=g):g=t[8];let x;t[9]!==n||t[10]!==s?(x=r.jsx(n,{flow:s}),t[9]=n,t[10]=s,t[11]=x):x=t[11];let v;return t[12]!==g||t[13]!==x?(v=r.jsxs("div",{className:o,children:[g,x]}),t[12]=g,t[13]=x,t[14]=v):v=t[14],v}function Fd(t){return t.ui.flow.tab}function Dd(t){return t.flows.selected[0]}function Id(t){if(t.ctrlKey||t.metaKey)return()=>{};const e=t.key;return t.preventDefault(),(s,i)=>{const{flows:l}=i(),n=l.selected,o=n[0];switch(e){case"k":case"ArrowUp":s(gt(l,-1));break;case"j":case"ArrowDown":s(gt(l,1));break;case" ":case"PageDown":s(gt(l,10));break;case"PageUp":s(gt(l,-10));break;case"End":s(gt(l,1e10));break;case"Home":s(gt(l,-1e10));break;case"Escape":i().ui.modal.activeModal?s(Qi()):s(Ve([]));break;case"ArrowLeft":{if(!o)break;const a=ws(o),d=i().ui.flow.tab,f=a[(Math.max(0,a.indexOf(d))-1+a.length)%a.length];s(Kt(f));break}case"Tab":case"ArrowRight":{if(!o)break;const a=ws(o),d=i().ui.flow.tab,f=a[(Math.max(0,a.indexOf(d))+1)%a.length];s(Kt(f));break}case"Delete":case"d":{s(Hi(n));break}case"n":{zt("view.flows.create","get","https://example.com/");break}case"D":{s(Vi(n));break}case"a":{s(Cs(n));break}case"A":{s(Oi());break}case"r":{s(ks(n));break}case"v":{s(Ui(n));break}case"x":{s(qi(n));break}case"X":{s(fc());break}case"z":{s(Bi());break}default:return}}}class Md extends A.Component{static defaultProps={axis:"x"};node=Te.createRef();constructor(e,s){super(e,s),this.state={applied:!1,startPos:0,dragPointer:.1},this.onLostPointerCapture=this.onLostPointerCapture.bind(this),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this)}onPointerDown(e){this.state.dragPointer===.1&&(e.target.setPointerCapture(e.pointerId),this.setState({startPos:this.props.axis==="x"?e.pageX:e.pageY,dragPointer:e.pointerId}))}onLostPointerCapture(e){if(this.state.dragPointer!==e.pointerId)return;const s=this.node.current,i=s.previousElementSibling,l=s.nextElementSibling;s.style.transform="",i.style.flex=`0 0 ${Math.max(0,(this.props.axis==="x"?i.offsetWidth+e.pageX:i.offsetHeight+e.pageY)-this.state.startPos)}px`,l.style.flex="1 1 auto",this.setState({applied:!0,dragPointer:.1}),this.onResize()}onPointerMove(e){this.state.dragPointer===e.pointerId&&(this.node.current.style.transform=this.props.axis==="x"?`translateX(${e.pageX-this.state.startPos}px)`:`translateY(${e.pageY-this.state.startPos}px)`)}onResize(){window.setTimeout(()=>window.dispatchEvent(new CustomEvent("resize")),1)}reset(e){this.state.applied&&(this.node.current?.previousElementSibling instanceof HTMLElement&&(this.node.current.previousElementSibling.style.flex=""),this.node.current?.nextElementSibling instanceof HTMLElement&&(this.node.current.nextElementSibling.style.flex=""),e||this.setState({applied:!1}),this.onResize())}componentWillUnmount(){this.reset(!0)}render(){return r.jsx("div",{ref:this.node,className:je("splitter",this.props.axis==="x"?"splitter-x":"splitter-y"),children:r.jsx("div",{onLostPointerCapture:this.onLostPointerCapture,onPointerDown:this.onPointerDown,onPointerMove:this.onPointerMove})})}}const Ds=t=>{const e=t.current;return e===null||e.scrollTop===0?!1:Math.ceil(e.scrollTop)+e.clientHeight>=e.scrollHeight},cl=t=>{t.current&&!Ds(t)&&(t.current.scrollTop=t.current.scrollHeight)};function Tt(t=void 0){if(!t)return{start:0,end:0,paddingTop:0,paddingBottom:0};const{itemCount:e,rowHeight:s,viewportTop:i,viewportHeight:l,itemHeights:n}=t,o=i+l;let a=0,d=0,f=0,h=0;if(n){let p=0;for(let g=0;g<e;g++){const x=n[g]||s;p<=i&&g%2===0&&(f=p,a=g),p<=o?d=g+1:h+=x,p+=x}if(i>0&&p<i+l)return Tt({itemCount:e,rowHeight:s,viewportTop:p-l,viewportHeight:l,itemHeights:n})}else{const p=Math.min(i,Math.max(0,e*s-l));a=Math.max(0,Math.floor(p/s)-1)&-2,d=Math.min(e,a+Math.ceil(l/s)+2),f=a*s,h=(e-d)*s}return{start:a,end:d,paddingTop:f,paddingBottom:h}}const Is=({flow:t})=>r.jsx("td",{className:je("col-tls",t.client_conn.tls_established?"col-tls-https":"col-tls-http")});Is.headerName="";const Ms=({flow:t})=>{const e=F(s=>s.flows._listIndex.get(t.id));return r.jsx("td",{className:"col-index",children:e+1})};Ms.headerName="#";const Ps=({flow:t})=>r.jsx("td",{className:"col-icon",children:r.jsx("div",{className:je("resource-icon",Ti(t))})});Ps.headerName="";const Os=({flow:t})=>{let e;return t.error&&(t.error.msg==="Connection killed."?e=r.jsx("i",{className:"fa fa-fw fa-times pull-right"}):e=r.jsx("i",{className:"fa fa-fw fa-exclamation pull-right"})),r.jsxs("td",{className:"col-path",children:[t.is_replay==="request"&&r.jsx("i",{className:"fa fa-fw fa-repeat pull-right"}),t.intercepted&&r.jsx("i",{className:"fa fa-fw fa-pause pull-right"}),e,r.jsx("span",{className:"marker pull-right",children:t.marked}),Li(t)]})};Os.headerName="Path";const qs=({flow:t})=>r.jsx("td",{className:"col-method",children:Ai(t)});qs.headerName="Method";const Hs=({flow:t})=>r.jsx("td",{className:"col-http-version",children:Fi(t)});Hs.headerName="Version";const Vs=({flow:t})=>{let e="darkred";return t.type!=="http"&&t.type!="dns"||!t.response?r.jsx("td",{className:"col-status"}):(100<=t.response.status_code&&t.response.status_code<200?e="green":200<=t.response.status_code&&t.response.status_code<300?e="darkgreen":300<=t.response.status_code&&t.response.status_code<400?e="lightblue":(400<=t.response.status_code&&t.response.status_code<500||500<=t.response.status_code&&t.response.status_code<600)&&(e="red"),r.jsx("td",{className:"col-status",style:{color:e},children:Ri(t)}))};Vs.headerName="Status";const Us=({flow:t})=>r.jsx("td",{className:"col-size",children:ji(ki(t))});Us.headerName="Size";const Bs=({flow:t})=>{const e=Gt(t),s=Ci(t);return r.jsx("td",{className:"col-time",children:e&&s?yi(1e3*(s-e)):"..."})};Bs.headerName="Time";const Ws=({flow:t})=>{const e=Gt(t);return r.jsx("td",{className:"col-timestamp",children:e?dt(e):"..."})};Ws.headerName="Start time";const ns=({flow:t})=>{const e=G();let s=null;return t.intercepted?s=r.jsx("a",{href:"#",className:"quickaction",onClick:()=>e(Cs([t])),children:r.jsx("i",{className:"fa fa-fw fa-play text-success"})}):Ss(t)&&(s=r.jsx("a",{href:"#",className:"quickaction",onClick:()=>e(ks([t])),children:r.jsx("i",{className:"fa fa-fw fa-repeat text-primary"})})),r.jsx("td",{className:"col-quickactions",children:s?r.jsx("div",{children:s}):r.jsx(r.Fragment,{})})};ns.headerName="";const Ks=({flow:t})=>{const e=t.comment;return r.jsx("td",{className:"col-comment",children:e})};Ks.headerName="Comment";const al={icon:Ps,index:Ms,method:qs,version:Hs,path:Os,quickactions:ns,size:Us,status:Vs,time:Bs,timestamp:Ws,tls:Is,comment:Ks},Pd=Object.freeze(Object.defineProperty({__proto__:null,comment:Ks,default:al,icon:Ps,index:Ms,method:qs,path:Os,quickactions:ns,size:Us,status:Vs,time:Bs,timestamp:Ws,tls:Is,version:Hs},Symbol.toStringTag,{value:"Module"})),Od=A.memo(function(){const e=N.c(13),s=G(),i=F(qd),l=F(Hd),n=F(Vd),o=i?"sort-desc":"sort-asc";let a;if(e[0]!==s||e[1]!==n||e[2]!==l||e[3]!==i||e[4]!==o){const f=n.filter(rc).concat("quickactions");let h;e[6]!==s||e[7]!==l||e[8]!==i||e[9]!==o?(h=p=>r.jsx("th",{className:je(`col-${p}`,l===p&&o),onClick:()=>s(Ji({column:p===l&&i?void 0:p,desc:p!==l?!1:!i})),children:al[p].headerName},p),e[6]=s,e[7]=l,e[8]=i,e[9]=o,e[10]=h):h=e[10],a=f.map(h),e[0]=s,e[1]=n,e[2]=l,e[3]=i,e[4]=o,e[5]=a}else a=e[5];let d;return e[11]!==a?(d=r.jsx("tr",{children:a}),e[11]=a,e[12]=d):d=e[12],d});function qd(t){return t.flows.sort.desc}function Hd(t){return t.flows.sort.column}function Vd(t){return t.options.web_columns}const Ud=Te.memo(function({flow:e,selected:s,highlighted:i}){const l=G(),n=F(f=>f.options.web_columns),o=je({selected:s,highlighted:i,intercepted:e.intercepted,"has-request":e.type==="http"&&e.request,"has-response":e.type==="http"&&e.response}),a=A.useCallback(f=>{let h=f.target;for(;h.parentNode;){if(h.classList.contains("col-quickactions"))return;h=h.parentNode}f.metaKey||f.ctrlKey?l(gc(e)):f.shiftKey?(window.getSelection()?.empty(),l(xc(e))):l(Ve([e]))},[e]),d=n.map(f=>Pd[f]).filter(f=>f).concat(ns);return r.jsx("tr",{className:o,onClick:a,children:d.map(f=>r.jsx(f,{flow:e},f.name))})});class Bd extends A.Component{static defaultProps={rowHeight:32};viewport=A.createRef();head=A.createRef();constructor(e,s){super(e,s),this.state={vScroll:Tt(),viewportTop:0},this.onViewportUpdate=this.onViewportUpdate.bind(this)}componentDidMount(){window.addEventListener("resize",this.onViewportUpdate),this.onViewportUpdate()}componentWillUnmount(){window.removeEventListener("resize",this.onViewportUpdate)}getSnapshotBeforeUpdate(){return Ds(this.viewport)}componentDidUpdate(e,s,i){i&&cl(this.viewport),this.onViewportUpdate();const{onlySelectedId:l}=this.props;if(l&&l!==e.onlySelectedId){const{rowHeight:o,firstSelectedIndex:a}=this.props,d=this.viewport.current,f=this.head.current,h=f?f.offsetHeight:0,p=a*o+h,g=p+o,x=d.scrollTop,v=d.offsetHeight;p-h<x?d.scrollTop=p-h:g>x+v&&(d.scrollTop=g-v),this.onViewportUpdate()}}onViewportUpdate(){const e=this.viewport.current,s=e.scrollTop||0,i=Tt({viewportTop:s,viewportHeight:e.offsetHeight||0,itemCount:this.props.flowView.length,rowHeight:this.props.rowHeight});if(this.state.viewportTop!==s||!Jt(this.state.vScroll,i)){const l=Math.min(s,i.end*this.props.rowHeight);this.setState({vScroll:i,viewportTop:l})}}render(){const{vScroll:e,viewportTop:s}=this.state,{flowView:i,selectedIds:l,highlightedIds:n}=this.props;return r.jsx("div",{className:"flow-table",onScroll:this.onViewportUpdate,ref:this.viewport,children:r.jsxs("table",{children:[r.jsx("thead",{ref:this.head,style:{transform:`translateY(${s}px)`},children:r.jsx(Od,{})}),r.jsxs("tbody",{children:[r.jsx("tr",{style:{height:e.paddingTop}}),i.slice(e.start,e.end).map(o=>r.jsx(Ud,{flow:o,selected:l.has(o.id),highlighted:n.has(o.id)},o.id)),r.jsx("tr",{style:{height:e.paddingBottom}})]})]})})}}const Wd=Yt(t=>({flowView:t.flows.view,highlightedIds:t.flows.highlightedIds,selectedIds:t.flows.selectedIds,onlySelectedId:t.flows.selected.length===1&&t.flows.selected[0].id,firstSelectedIndex:t.flows._viewIndex.get(t.flows.selected[0]?.id)}))(Bd);function Kd(){const t=N.c(3);let e,s;t[0]===Symbol.for("react.memo_cache_sentinel")?(e={padding:"1em 2em"},s=r.jsx("h3",{children:"mitmproxy is running."}),t[0]=e,t[1]=s):(e=t[0],s=t[1]);let i;return t[2]===Symbol.for("react.memo_cache_sentinel")?(i=r.jsxs("div",{style:e,children:[s,r.jsxs("p",{children:["No flows have been recorded yet.",r.jsx("br",{}),"To start capturing traffic, please configure your settings in the Capture tab."]})]}),t[2]=i):i=t[2],i}function zd(t){const e=N.c(20);let{description:s,listen_addrs:i,is_running:l,wireguard_conf:n,type:o}=t;const a=A.useRef(null);let d,f;e[0]!==n?(d=()=>{n&&a.current&&Go.toCanvas(a.current,n,{margin:0,scale:3})},f=[n],e[0]=n,e[1]=d,e[2]=f):(d=e[1],f=e[2]),A.useEffect(d,f);let h;const p=i.length===1||i.length===2&&i[0][1]===i[1][1],g=i.every(Gd);if(p&&g){let _;e[3]!==i[0][1]?(_=zn(["*",i[0][1]]),e[3]=i[0][1],e[4]=_):_=e[4],h=_}else{let _;e[5]!==i?(_=i.map(zn).join(" and "),e[5]=i,e[6]=_):_=e[6],h=_}s=s[0].toUpperCase()+s.substr(1);let x;if(l){let _;e[9]!==s||e[10]!==h||e[11]!==o?(_=o==="local"?r.jsxs("div",{className:"text-success",children:[s," is active."]}):r.jsxs("div",{className:"text-success",children:[s," listening at ",h,"."]}),e[9]=s,e[10]=h,e[11]=o,e[12]=_):_=e[12];let b;e[13]!==n?(b=n&&r.jsxs("div",{className:"wireguard-config",children:[r.jsx("pre",{children:n}),r.jsx("canvas",{ref:a})]}),e[13]=n,e[14]=b):b=e[14];let w;e[15]!==_||e[16]!==b?(w=r.jsxs(r.Fragment,{children:[_,b]}),e[15]=_,e[16]=b,e[17]=w):w=e[17],x=w}else{let _;e[7]!==s?(_=r.jsx(r.Fragment,{children:r.jsxs("div",{className:"text-warning",children:[s," starting..."]})}),e[7]=s,e[8]=_):_=e[8],x=_}let v;return e[18]!==x?(v=r.jsx("div",{children:x}),e[18]=x,e[19]=v):v=e[19],v}function Gd(t){return["::","0.0.0.0"].includes(t[0])}function et(t){const e=N.c(5),{error:s,backendState:i}=t;let l;e[0]!==i||e[1]!==s?(l=s?r.jsx("div",{className:"text-danger",children:s}):i&&r.jsx(zd,{...i}),e[0]=i,e[1]=s,e[2]=l):l=e[2];let n;return e[3]!==l?(n=r.jsx("div",{className:"mode-status",children:l}),e[3]=l,e[4]=n):n=e[4],n}function tt(t){const e=N.c(13),{value:s,onChange:i,children:l,label:n}=t,o=A.useId(),a=`mode-checkbox-${o}`,d=`mode-checkbox-${o}`;let f;e[0]!==i||e[1]!==a||e[2]!==d||e[3]!==s?(f=r.jsx("input",{type:"checkbox",name:a,id:d,checked:s,onChange:i}),e[0]=i,e[1]=a,e[2]=d,e[3]=s,e[4]=f):f=e[4];const h=`mode-checkbox-${o}`;let p;e[5]===Symbol.for("react.memo_cache_sentinel")?(p={marginBottom:0,fontWeight:"normal"},e[5]=p):p=e[5];let g;e[6]!==n||e[7]!==h?(g=r.jsx("label",{htmlFor:h,style:p,children:n}),e[6]=n,e[7]=h,e[8]=g):g=e[8];let x;return e[9]!==l||e[10]!==f||e[11]!==g?(x=r.jsxs("div",{className:"mode-entry",children:[f,g,l]}),e[9]=l,e[10]=f,e[11]=g,e[12]=x):x=e[12],x}function st(t){const e=N.c(22),{children:s,iconClass:i,classname:l,isVisible:n}=t,o=A.useId();let a;e[0]!==o?(a=[...o].map(Jd),e[0]=o,e[1]=a):a=e[1];const d="--"+a.join(""),f=A.useRef(null),h=A.useRef(null);let p;e[2]!==d?(p=()=>{f.current.style.anchorName=d,h.current.style.positionAnchor=d},e[2]=d,e[3]=p):p=e[3];let g;e[4]===Symbol.for("react.memo_cache_sentinel")?(g=[],e[4]=g):g=e[4],A.useEffect(p,g);let x;e[5]!==o||e[6]!==n?(x=()=>{n===!0&&document.getElementById(o)?.showPopover()},e[5]=o,e[6]=n,e[7]=x):x=e[7];let v;e[8]!==n?(v=[n],e[8]=n,e[9]=v):v=e[9],A.useEffect(x,v);const _=l?`mode-popover ${l}`:"mode-popover";let b;e[10]!==i?(b=r.jsx("i",{className:i,"aria-hidden":"true"}),e[10]=i,e[11]=b):b=e[11];let w;e[12]!==o||e[13]!==b?(w=r.jsx("button",{popoverTarget:o,ref:f,children:b}),e[12]=o,e[13]=b,e[14]=w):w=e[14];let C;e[15]!==s||e[16]!==o?(C=r.jsx("div",{id:o,popover:"auto",ref:h,children:s}),e[15]=s,e[16]=o,e[17]=C):C=e[17];let k;return e[18]!==_||e[19]!==w||e[20]!==C?(k=r.jsxs("div",{className:_,children:[w,C]}),e[18]=_,e[19]=w,e[20]=C,e[21]=k):k=e[21],k}function Jd(t){return t.charCodeAt(0).toString(16)}function Yd(t){const e=N.c(44),{server:s}=t,{currentProcesses:i,isLoading:l}=F(Zd),{selectedProcesses:n}=F(Xd);let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=[],e[0]=o):o=e[0];const[a,d]=A.useState(o),[f,h]=A.useState(""),p=G(),{platform:g}=F(Qd);let x;e[1]===Symbol.for("react.memo_cache_sentinel")?(x=B=>{h(B.target.value)},e[1]=x):x=e[1];const v=x;let _;e[2]!==g?(_=B=>{const le=g.startsWith("win32")?"\\":"/";return _s(B.executable,le)[1]},e[2]=g,e[3]=_):_=e[3];const b=_;let w;e[4]!==p||e[5]!==b||e[6]!==n||e[7]!==s?(w=B=>{const le=typeof B=="string"?B:b(B),q=n?`${n}, ${le}`:le;p(Nt({server:s,value:q}))},e[4]=p,e[5]=b,e[6]=n,e[7]=s,e[8]=w):w=e[8];const C=w;let k;e[9]!==p||e[10]!==b||e[11]!==n||e[12]!==s?(k=B=>{const le=n?.split(/,\s*/).filter(q=>q!==b(B)).join(", ");p(Nt({server:s,value:le}))},e[9]=p,e[10]=b,e[11]=n,e[12]=s,e[13]=k):k=e[13];const T=k,M=B=>{I(B)&&n?T(B):C(B)},I=B=>{const le=b(B);return n?.includes(le)};let P;e[14]!==i||e[15]!==p?(P=()=>{i.length===0&&p(Ct())},e[14]=i,e[15]=p,e[16]=P):P=e[16];let O;e[17]===Symbol.for("react.memo_cache_sentinel")?(O=[],e[17]=O):O=e[17],A.useEffect(P,O);let U;e[18]!==i||e[19]!==f||e[20]!==b||e[21]!==a?(U=()=>{if(f){const B=i.filter(le=>b(le).toLowerCase().includes(f.toLowerCase()));d(B)}else a!==i&&d(i)},e[18]=i,e[19]=f,e[20]=b,e[21]=a,e[22]=U):U=e[22];let V;e[23]!==i||e[24]!==f?(V=[f,i],e[23]=i,e[24]=f,e[25]=V):V=e[25],A.useEffect(U,V);let W;e[26]!==C||e[27]!==f?(W=B=>{B.stopPropagation(),B.key==="Enter"&&(C(f),h(""))},e[26]=C,e[27]=f,e[28]=W):W=e[28];const Y=W,[z,te]=A.useState(!1),J="local-dropdown",Q="dropdown-header",X=n&&n?.length>0?"Add more":"all applications";let Z,ae;e[29]===Symbol.for("react.memo_cache_sentinel")?(Z=()=>te(!0),ae=()=>te(!1),e[29]=Z,e[30]=ae):(Z=e[29],ae=e[30]);let oe;e[31]!==f||e[32]!==Y||e[33]!==X?(oe=r.jsx("input",{type:"text",className:"autocomplete-input",placeholder:X,value:f,onChange:v,onKeyDown:Y,onClick:Z,onBlur:ae}),e[31]=f,e[32]=Y,e[33]=X,e[34]=oe):oe=e[34];const de=st,ye="fa fa-chevron-down",Me="local-popover";let Se;e[35]===Symbol.for("react.memo_cache_sentinel")?(Se=r.jsx("h4",{children:"Current Applications running on machine"}),e[35]=Se):Se=e[35];const Ee=l?r.jsx("i",{className:"fa fa-spinner","aria-hidden":"true"}):a.length>0?r.jsxs("ul",{className:"dropdown-list",children:[r.jsxs("li",{className:`dropdown-item ${n===""?"selected":""}`,onClick:()=>{p(Nt({server:s,value:""}))},role:"menuitem",children:[r.jsxs("div",{className:"process-details",children:[r.jsx("div",{className:"process-icon"}),r.jsx("span",{className:"process-name",children:"All applications"})]}),n===""&&r.jsx("i",{className:"fa fa-check","aria-hidden":"true"})]}),r.jsx("hr",{className:"process-separator"}),a.map((B,le)=>r.jsxs("li",{className:`dropdown-item ${I(B)?"selected":""}`,onClick:()=>M(B),role:"menuitem",children:[r.jsxs("div",{className:"process-details",children:[r.jsx("img",{className:"process-icon",src:`./executable-icon?path=${B.executable}`,loading:"lazy"}),r.jsx("span",{className:"process-name",children:b(B)})]}),I(B)&&r.jsx("i",{className:"fa fa-check","aria-hidden":"true"})]},le))]}):r.jsxs("span",{children:["Press ",r.jsx("strong",{children:"Enter"})," to capture traffic for programs matching: ",r.jsx("strong",{children:f})]});let E;e[36]!==de||e[37]!==z||e[38]!==Se||e[39]!==Ee?(E=r.jsxs(de,{iconClass:ye,classname:Me,isVisible:z,children:[Se,Ee]}),e[36]=de,e[37]=z,e[38]=Se,e[39]=Ee,e[40]=E):E=e[40];let he;return e[41]!==oe||e[42]!==E?(he=r.jsx("div",{className:J,children:r.jsxs("div",{className:Q,children:[oe,E]})}),e[41]=oe,e[42]=E,e[43]=he):he=e[43],he}function Qd(t){return t.backendState}function Xd(t){return t.modes.local[0]}function Zd(t){return t.processes}function ef(){const t=N.c(9),e=F(sf),s=F(tf);let i;if(t[0]!==s||t[1]!==e){let d;t[3]!==s?(d=f=>r.jsx(nf,{server:f,backendState:s[rr(f)]},f.ui_id),t[3]=s,t[4]=d):d=t[4],i=e.map(d),t[0]=s,t[1]=e,t[2]=i}else i=t[2];const l=i;let n,o;t[5]===Symbol.for("react.memo_cache_sentinel")?(n=r.jsx("h4",{className:"mode-title",children:"Local Applications"}),o=r.jsx("p",{className:"mode-description",children:"Transparently Intercept local application(s)."}),t[5]=n,t[6]=o):(n=t[5],o=t[6]);let a;return t[7]!==l?(a=r.jsxs("div",{children:[n,o,l]}),t[7]=l,t[8]=a):a=t[8],a}function tf(t){return t.backendState.servers}function sf(t){return t.modes.local}function nf(t){const e=N.c(31),{server:s,backendState:i}=t,l=G(),n=F(lf),o=s.error||i?.last_exception||n||void 0;let a;e[0]!==l||e[1]!==s?(a=k=>{const T=s.selectedProcesses?.split(/,\s*/).filter(M=>M!==k).join(", ");l(Nt({server:s,value:T}))},e[0]=l,e[1]=s,e[2]=a):a=e[2];const d=a;let f;e[3]!==l||e[4]!==s?(f=()=>l(hr({server:s,value:!s.active})),e[3]=l,e[4]=s,e[5]=f):f=e[5];let h;e[6]!==d||e[7]!==s.selectedProcesses?(h=s.selectedProcesses?.split(/,\s*/).filter(rf).map(k=>r.jsxs("div",{className:"selected-process",children:[k,r.jsx("i",{className:"fa fa-times","aria-hidden":"true",onClick:()=>d(k)})]},k)),e[6]=d,e[7]=s.selectedProcesses,e[8]=h):h=e[8];let p;e[9]!==h?(p=r.jsx("div",{className:"selected-processes",children:h}),e[9]=h,e[10]=p):p=e[10];let g;e[11]!==s?(g=r.jsx(Yd,{server:s}),e[11]=s,e[12]=g):g=e[12];let x;e[13]!==l?(x=r.jsx("i",{className:"fa fa-refresh","aria-hidden":"true",onClick:()=>l(Ct())}),e[13]=l,e[14]=x):x=e[14];let v;e[15]!==g||e[16]!==x?(v=r.jsxs("div",{className:"dropdown-container",children:[g,x]}),e[15]=g,e[16]=x,e[17]=v):v=e[17];let _;e[18]!==p||e[19]!==v?(_=r.jsxs("div",{className:"processes-container",children:[p,v]}),e[18]=p,e[19]=v,e[20]=_):_=e[20];let b;e[21]!==s.active||e[22]!==f||e[23]!==_?(b=r.jsx(tt,{value:s.active,label:"Intercept traffic for",onChange:f,children:_}),e[21]=s.active,e[22]=f,e[23]=_,e[24]=b):b=e[24];let w;e[25]!==i||e[26]!==o?(w=r.jsx(et,{error:o,backendState:i}),e[25]=i,e[26]=o,e[27]=w):w=e[27];let C;return e[28]!==w||e[29]!==b?(C=r.jsxs("div",{className:"mode-local",children:[b,w]}),e[28]=w,e[29]=b,e[30]=C):C=e[30],C}function rf(t){return t.trim()!==""}function lf(t){return t.processes.error}function of(){const t=N.c(9),e=F(af),s=F(cf);let i;if(t[0]!==s||t[1]!==e){let d;t[3]!==s?(d=f=>r.jsx(df,{server:f,backendState:s[ir(f)]},f.ui_id),t[3]=s,t[4]=d):d=t[4],i=e.map(d),t[0]=s,t[1]=e,t[2]=i}else i=t[2];const l=i;let n,o;t[5]===Symbol.for("react.memo_cache_sentinel")?(n=r.jsx("h4",{className:"mode-title",children:"Explicit HTTP(S) Proxy"}),o=r.jsx("p",{className:"mode-description",children:"You manually configure your client application or device to use an HTTP(S) proxy."}),t[5]=n,t[6]=o):(n=t[5],o=t[6]);let a;return t[7]!==l?(a=r.jsxs("div",{children:[n,o,l]}),t[7]=l,t[8]=a):a=t[8],a}function cf(t){return t.backendState.servers}function af(t){return t.modes.regular}function df(t){const e=N.c(33),{server:s,backendState:i}=t,l=G(),n=s.error||i?.last_exception||void 0;let o;e[0]!==l||e[1]!==s?(o=()=>l(fr({server:s,value:!s.active})),e[0]=l,e[1]=s,e[2]=o):o=e[2];let a,d;e[3]===Symbol.for("react.memo_cache_sentinel")?(a=r.jsx("h4",{children:"Advanced Configuration"}),d=r.jsx("p",{children:"Listen Host"}),e[3]=a,e[4]=d):(a=e[3],d=e[4]);const f=s.listen_host||"";let h;e[5]!==l||e[6]!==s?(h=T=>l(ur({server:s,value:T})),e[5]=l,e[6]=s,e[7]=h):h=e[7];let p;e[8]!==f||e[9]!==h?(p=r.jsx(ce,{className:"mode-input",content:f,onEditDone:h}),e[8]=f,e[9]=h,e[10]=p):p=e[10];let g;e[11]===Symbol.for("react.memo_cache_sentinel")?(g=r.jsx("p",{children:"Listen Port"}),e[11]=g):g=e[11];let x;e[12]!==s.listen_port?(x=s.listen_port?s.listen_port.toString():"",e[12]=s.listen_port,e[13]=x):x=e[13];let v;e[14]!==l||e[15]!==s?(v=T=>l(pr({server:s,value:parseInt(T)})),e[14]=l,e[15]=s,e[16]=v):v=e[16];let _;e[17]!==x||e[18]!==v?(_=r.jsx(ce,{className:"mode-input",content:x,placeholder:"8080",onEditDone:v}),e[17]=x,e[18]=v,e[19]=_):_=e[19];let b;e[20]!==_||e[21]!==p?(b=r.jsxs(st,{iconClass:"fa fa-cog",children:[a,d,p,g,_]}),e[20]=_,e[21]=p,e[22]=b):b=e[22];let w;e[23]!==s.active||e[24]!==o||e[25]!==b?(w=r.jsx(tt,{value:s.active,label:"Run HTTP/S Proxy",onChange:o,children:b}),e[23]=s.active,e[24]=o,e[25]=b,e[26]=w):w=e[26];let C;e[27]!==i||e[28]!==n?(C=r.jsx(et,{error:n,backendState:i}),e[27]=i,e[28]=n,e[29]=C):C=e[29];let k;return e[30]!==w||e[31]!==C?(k=r.jsxs("div",{children:[w,C]}),e[30]=w,e[31]=C,e[32]=k):k=e[32],k}function ff(){const t=N.c(9),e=F(pf),s=F(uf);let i;if(t[0]!==s||t[1]!==e){let d;t[3]!==s?(d=f=>r.jsx(hf,{server:f,backendState:s[lr(f)]},f.ui_id),t[3]=s,t[4]=d):d=t[4],i=e.map(d),t[0]=s,t[1]=e,t[2]=i}else i=t[2];const l=i;let n,o;t[5]===Symbol.for("react.memo_cache_sentinel")?(n=r.jsx("h4",{className:"mode-title",children:"WireGuard Server"}),o=r.jsx("p",{className:"mode-description",children:"Start a WireGuard™ server and connect an external device for transparent proxying."}),t[5]=n,t[6]=o):(n=t[5],o=t[6]);let a;return t[7]!==l?(a=r.jsxs("div",{children:[n,o,l]}),t[7]=l,t[8]=a):a=t[8],a}function uf(t){return t.backendState.servers}function pf(t){return t.modes.wireguard}function hf(t){const e=N.c(41),{server:s,backendState:i}=t,l=G(),n=s.error||i?.last_exception||void 0;let o;e[0]!==l||e[1]!==s?(o=()=>l(mr({server:s,value:!s.active})),e[0]=l,e[1]=s,e[2]=o):o=e[2];let a,d;e[3]===Symbol.for("react.memo_cache_sentinel")?(a=r.jsx("h4",{children:"Advanced Configuration"}),d=r.jsx("p",{children:"Listen Host"}),e[3]=a,e[4]=d):(a=e[3],d=e[4]);const f=s.listen_host||"";let h;e[5]!==l||e[6]!==s?(h=O=>l(gr({server:s,value:O})),e[5]=l,e[6]=s,e[7]=h):h=e[7];let p;e[8]!==f||e[9]!==h?(p=r.jsx(ce,{className:"mode-input",content:f,placeholder:"(all interfaces)",onEditDone:h}),e[8]=f,e[9]=h,e[10]=p):p=e[10];let g;e[11]===Symbol.for("react.memo_cache_sentinel")?(g=r.jsx("p",{children:"Listen Port"}),e[11]=g):g=e[11];let x;e[12]!==s.listen_port?(x=s.listen_port?s.listen_port.toString():"",e[12]=s.listen_port,e[13]=x):x=e[13];let v;e[14]!==l||e[15]!==s?(v=O=>l(xr({server:s,value:parseInt(O)})),e[14]=l,e[15]=s,e[16]=v):v=e[16];let _;e[17]!==x||e[18]!==v?(_=r.jsx(ce,{className:"mode-input",content:x,placeholder:"51820",onEditDone:v}),e[17]=x,e[18]=v,e[19]=_):_=e[19];let b;e[20]===Symbol.for("react.memo_cache_sentinel")?(b=r.jsx("p",{children:"Configuration File"}),e[20]=b):b=e[20];const w=s.file_path||"";let C;e[21]!==l||e[22]!==s?(C=O=>l(vr({server:s,value:O})),e[21]=l,e[22]=s,e[23]=C):C=e[23];let k;e[24]!==w||e[25]!==C?(k=r.jsx(ce,{className:"mode-input",content:w,placeholder:"~/.mitmproxy/wireguard.conf",onEditDone:C}),e[24]=w,e[25]=C,e[26]=k):k=e[26];let T;e[27]!==_||e[28]!==k||e[29]!==p?(T=r.jsxs(st,{iconClass:"fa fa-cog",children:[a,d,p,g,_,b,k]}),e[27]=_,e[28]=k,e[29]=p,e[30]=T):T=e[30];let M;e[31]!==s.active||e[32]!==o||e[33]!==T?(M=r.jsx(tt,{value:s.active,label:"Run WireGuard Server",onChange:o,children:T}),e[31]=s.active,e[32]=o,e[33]=T,e[34]=M):M=e[34];let I;e[35]!==i||e[36]!==n?(I=r.jsx(et,{error:n,backendState:i}),e[35]=i,e[36]=n,e[37]=I):I=e[37];let P;return e[38]!==M||e[39]!==I?(P=r.jsxs("div",{children:[M,I]}),e[38]=M,e[39]=I,e[40]=P):P=e[40],P}function mf(){const t=N.c(15),e=G(),s=F(xf),i=F(gf);let l,n;t[0]===Symbol.for("react.memo_cache_sentinel")?(l=r.jsx("h4",{className:"mode-title",children:"Reverse Proxy"}),n=r.jsx("p",{className:"mode-description",children:"Requests are forwarded to a preconfigured destination."}),t[0]=l,t[1]=n):(l=t[0],n=t[1]);let o;if(t[2]!==i||t[3]!==s){let p;t[5]!==i?(p=(g,x)=>r.jsx(vf,{removable:x>0,server:g,backendState:i[As(g)]},g.ui_id),t[5]=i,t[6]=p):p=t[6],o=s.map(p),t[2]=i,t[3]=s,t[4]=o}else o=t[4];let a;t[7]!==e?(a=()=>e(ma()),t[7]=e,t[8]=a):a=t[8];let d;t[9]===Symbol.for("react.memo_cache_sentinel")?(d=r.jsx("i",{className:"fa fa-plus-square-o","aria-hidden":"true"}),t[9]=d):d=t[9];let f;t[10]!==a?(f=r.jsxs("div",{className:"mode-reverse-add-server",onClick:a,children:[d,"Add additional server"]}),t[10]=a,t[11]=f):f=t[11];let h;return t[12]!==o||t[13]!==f?(h=r.jsxs("div",{children:[l,n,r.jsxs("div",{className:"mode-reverse-servers",children:[o,f]})]}),t[12]=o,t[13]=f,t[14]=h):h=t[14],h}function gf(t){return t.backendState.servers}function xf(t){return t.modes.reverse}function vf(t){const e=N.c(56),{removable:s,server:i,backendState:l}=t,n=G();let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=Object.values(Zt),e[0]=o):o=e[0];const a=o;let d;e[1]!==n||e[2]!==i?(d=async()=>{i.active&&await n(ys({server:i,value:!1})).unwrap(),await n(ga(i))},e[1]=n,e[2]=i,e[3]=d):d=e[3];const f=d,h=i.error||l?.last_exception||void 0,p=i.active;let g;e[4]!==n||e[5]!==i?(g=()=>{n(ys({server:i,value:!i.active}))},e[4]=n,e[5]=i,e[6]=g):g=e[6];const x=i.protocol;let v;e[7]!==n||e[8]!==i?(v=Z=>{n(yr({server:i,value:Z.target.value}))},e[7]=n,e[8]=i,e[9]=v):v=e[9];let _;e[10]===Symbol.for("react.memo_cache_sentinel")?(_=a.map(_f),e[10]=_):_=e[10];let b;e[11]!==i.protocol||e[12]!==v?(b=r.jsx("select",{name:"protocols",className:"mode-reverse-dropdown",value:x,onChange:v,children:_}),e[11]=i.protocol,e[12]=v,e[13]=b):b=e[13];let w;e[14]!==i.destination?(w=i.destination?.toString()||"",e[14]=i.destination,e[15]=w):w=e[15];let C;e[16]!==n||e[17]!==i?(C=Z=>n(br({server:i,value:Z})),e[16]=n,e[17]=i,e[18]=C):C=e[18];let k;e[19]!==C||e[20]!==w?(k=r.jsx(ce,{className:"mode-reverse-input",content:w,onEditDone:C,placeholder:"example.com"}),e[19]=C,e[20]=w,e[21]=k):k=e[21];let T,M;e[22]===Symbol.for("react.memo_cache_sentinel")?(T=r.jsx("h4",{children:"Advanced Configuration"}),M=r.jsx("p",{children:"Listen Host"}),e[22]=T,e[23]=M):(T=e[22],M=e[23]);const I=i.listen_host||"";let P;e[24]!==n||e[25]!==i?(P=Z=>n(_r({server:i,value:Z})),e[24]=n,e[25]=i,e[26]=P):P=e[26];let O;e[27]!==I||e[28]!==P?(O=r.jsx(ce,{className:"mode-input",content:I,onEditDone:P,placeholder:"*"}),e[27]=I,e[28]=P,e[29]=O):O=e[29];let U;e[30]===Symbol.for("react.memo_cache_sentinel")?(U=r.jsx("p",{children:"Listen Port"}),e[30]=U):U=e[30];const V=String(i.listen_port||"");let W;e[31]!==n||e[32]!==i?(W=Z=>n(jr({server:i,value:Z})),e[31]=n,e[32]=i,e[33]=W):W=e[33];let Y;e[34]!==V||e[35]!==W?(Y=r.jsx(ce,{className:"mode-input",content:V,onEditDone:W,placeholder:"8080"}),e[34]=V,e[35]=W,e[36]=Y):Y=e[36];let z;e[37]!==O||e[38]!==Y?(z=r.jsxs(st,{iconClass:"fa fa-cog",children:[T,M,O,U,Y]}),e[37]=O,e[38]=Y,e[39]=z):z=e[39];let te;e[40]!==f||e[41]!==s?(te=s&&r.jsx("i",{className:"fa fa-fw fa-trash fa-lg","aria-hidden":"true",onClick:f}),e[40]=f,e[41]=s,e[42]=te):te=e[42];let J;e[43]!==i.active||e[44]!==k||e[45]!==z||e[46]!==te||e[47]!==g||e[48]!==b?(J=r.jsxs(tt,{value:p,label:"Forward",onChange:g,children:[b,"traffic to",k,z,te]}),e[43]=i.active,e[44]=k,e[45]=z,e[46]=te,e[47]=g,e[48]=b,e[49]=J):J=e[49];let Q;e[50]!==l||e[51]!==h?(Q=r.jsx(et,{error:h,backendState:l}),e[50]=l,e[51]=h,e[52]=Q):Q=e[52];let X;return e[53]!==J||e[54]!==Q?(X=r.jsxs("div",{children:[J,Q]}),e[53]=J,e[54]=Q,e[55]=X):X=e[55],X}function _f(t){return r.jsx("option",{value:t,children:t},t)}function jf(){const t=N.c(9),e=F(bf),s=F(yf);let i;if(t[0]!==s||t[1]!==e){let d;t[3]!==s?(d=f=>r.jsx(wf,{server:f,backendState:s[or(f)]},f.ui_id),t[3]=s,t[4]=d):d=t[4],i=e.map(d),t[0]=s,t[1]=e,t[2]=i}else i=t[2];const l=i;let n;t[5]===Symbol.for("react.memo_cache_sentinel")?(n=r.jsx("h4",{className:"mode-title",children:"Transparent Proxy"}),t[5]=n):n=t[5];let o;t[6]===Symbol.for("react.memo_cache_sentinel")?(o=r.jsxs("p",{className:"mode-description",children:["You"," ",r.jsx("a",{href:"https://docs.mitmproxy.org/stable/howto-transparent/",style:{textDecoration:"underline",color:"inherit"},children:"configure your routing table"})," ","to send traffic through mitmproxy."]}),t[6]=o):o=t[6];let a;return t[7]!==l?(a=r.jsxs("div",{children:[n,o,l]}),t[7]=l,t[8]=a):a=t[8],a}function yf(t){return t.backendState.servers}function bf(t){return t.modes.transparent}function wf(t){const e=N.c(33),{server:s,backendState:i}=t,l=G(),n=s.error||i?.last_exception||void 0;let o;e[0]!==l||e[1]!==s?(o=()=>l(Sr({server:s,value:!s.active})),e[0]=l,e[1]=s,e[2]=o):o=e[2];let a,d;e[3]===Symbol.for("react.memo_cache_sentinel")?(a=r.jsx("h4",{children:"Advanced Configuration"}),d=r.jsx("p",{children:"Listen Host"}),e[3]=a,e[4]=d):(a=e[3],d=e[4]);const f=s.listen_host||"";let h;e[5]!==l||e[6]!==s?(h=T=>l($r({server:s,value:T})),e[5]=l,e[6]=s,e[7]=h):h=e[7];let p;e[8]!==f||e[9]!==h?(p=r.jsx(ce,{className:"mode-input",content:f,onEditDone:h}),e[8]=f,e[9]=h,e[10]=p):p=e[10];let g;e[11]===Symbol.for("react.memo_cache_sentinel")?(g=r.jsx("p",{children:"Listen Port"}),e[11]=g):g=e[11];let x;e[12]!==s.listen_port?(x=s.listen_port?s.listen_port.toString():"",e[12]=s.listen_port,e[13]=x):x=e[13];let v;e[14]!==l||e[15]!==s?(v=T=>l(Nr({server:s,value:parseInt(T)})),e[14]=l,e[15]=s,e[16]=v):v=e[16];let _;e[17]!==x||e[18]!==v?(_=r.jsx(ce,{className:"mode-input",content:x,placeholder:"8080",onEditDone:v}),e[17]=x,e[18]=v,e[19]=_):_=e[19];let b;e[20]!==_||e[21]!==p?(b=r.jsxs(st,{iconClass:"fa fa-cog",children:[a,d,p,g,_]}),e[20]=_,e[21]=p,e[22]=b):b=e[22];let w;e[23]!==s.active||e[24]!==o||e[25]!==b?(w=r.jsx(tt,{value:s.active,label:"Run Transparent Proxy",onChange:o,children:b}),e[23]=s.active,e[24]=o,e[25]=b,e[26]=w):w=e[26];let C;e[27]!==i||e[28]!==n?(C=r.jsx(et,{error:n,backendState:i}),e[27]=i,e[28]=n,e[29]=C):C=e[29];let k;return e[30]!==w||e[31]!==C?(k=r.jsxs("div",{children:[w,C]}),e[30]=w,e[31]=C,e[32]=k):k=e[32],k}function Sf(){const t=N.c(9),e=F(Nf),s=F($f);let i;if(t[0]!==s||t[1]!==e){let d;t[3]!==s?(d=f=>r.jsx(Cf,{server:f,backendState:s[cr(f)]},f.ui_id),t[3]=s,t[4]=d):d=t[4],i=e.map(d),t[0]=s,t[1]=e,t[2]=i}else i=t[2];const l=i;let n,o;t[5]===Symbol.for("react.memo_cache_sentinel")?(n=r.jsx("h4",{className:"mode-title",children:"SOCKS Proxy"}),o=r.jsx("p",{className:"mode-description",children:"You manually configure your client application or device to use a SOCKS5 proxy."}),t[5]=n,t[6]=o):(n=t[5],o=t[6]);let a;return t[7]!==l?(a=r.jsxs("div",{children:[n,o,l]}),t[7]=l,t[8]=a):a=t[8],a}function $f(t){return t.backendState.servers}function Nf(t){return t.modes.socks}function Cf(t){const e=N.c(33),{server:s,backendState:i}=t,l=G(),n=s.error||i?.last_exception||void 0;let o;e[0]!==l||e[1]!==s?(o=()=>l(Cr({server:s,value:!s.active})),e[0]=l,e[1]=s,e[2]=o):o=e[2];let a,d;e[3]===Symbol.for("react.memo_cache_sentinel")?(a=r.jsx("h4",{children:"Advanced Configuration"}),d=r.jsx("p",{children:"Listen Host"}),e[3]=a,e[4]=d):(a=e[3],d=e[4]);const f=s.listen_host||"";let h;e[5]!==l||e[6]!==s?(h=T=>l(kr({server:s,value:T})),e[5]=l,e[6]=s,e[7]=h):h=e[7];let p;e[8]!==f||e[9]!==h?(p=r.jsx(ce,{className:"mode-input",content:f,onEditDone:h}),e[8]=f,e[9]=h,e[10]=p):p=e[10];let g;e[11]===Symbol.for("react.memo_cache_sentinel")?(g=r.jsx("p",{children:"Listen Port"}),e[11]=g):g=e[11];let x;e[12]!==s.listen_port?(x=s.listen_port?s.listen_port.toString():"",e[12]=s.listen_port,e[13]=x):x=e[13];let v;e[14]!==l||e[15]!==s?(v=T=>l(Er({server:s,value:parseInt(T)})),e[14]=l,e[15]=s,e[16]=v):v=e[16];let _;e[17]!==x||e[18]!==v?(_=r.jsx(ce,{className:"mode-input",content:x,placeholder:"8080",onEditDone:v}),e[17]=x,e[18]=v,e[19]=_):_=e[19];let b;e[20]!==_||e[21]!==p?(b=r.jsxs(st,{iconClass:"fa fa-cog",children:[a,d,p,g,_]}),e[20]=_,e[21]=p,e[22]=b):b=e[22];let w;e[23]!==s.active||e[24]!==o||e[25]!==b?(w=r.jsx(tt,{value:s.active,label:"Run SOCKS Proxy",onChange:o,children:b}),e[23]=s.active,e[24]=o,e[25]=b,e[26]=w):w=e[26];let C;e[27]!==i||e[28]!==n?(C=r.jsx(et,{error:n,backendState:i}),e[27]=i,e[28]=n,e[29]=C):C=e[29];let k;return e[30]!==w||e[31]!==C?(k=r.jsxs("div",{children:[w,C]}),e[30]=w,e[31]=C,e[32]=k):k=e[32],k}function kf(){const t=N.c(9),e=F(Tf),s=F(Ef);let i;if(t[0]!==s||t[1]!==e){let d;t[3]!==s?(d=f=>r.jsx(Lf,{server:f,backendState:s[ar(f)]},f.ui_id),t[3]=s,t[4]=d):d=t[4],i=e.map(d),t[0]=s,t[1]=e,t[2]=i}else i=t[2];const l=i;let n,o;t[5]===Symbol.for("react.memo_cache_sentinel")?(n=r.jsx("h4",{className:"mode-title",children:"Explicit HTTP(S) Proxy (With Upstream Proxy)"}),o=r.jsx("p",{className:"mode-description",children:"All requests are forwarded to a second HTTP(S) proxy server."}),t[5]=n,t[6]=o):(n=t[5],o=t[6]);let a;return t[7]!==l?(a=r.jsxs("div",{children:[n,o,l]}),t[7]=l,t[8]=a):a=t[8],a}function Ef(t){return t.backendState.servers}function Tf(t){return t.modes.upstream}function Lf(t){const e=N.c(42),{server:s,backendState:i}=t,l=G(),n=s.error||i?.last_exception||void 0;let o;e[0]!==l||e[1]!==s?(o=()=>{l(Tr({server:s,value:!s.active}))},e[0]=l,e[1]=s,e[2]=o):o=e[2];let a;e[3]!==s.destination?(a=s.destination?.toString()||"",e[3]=s.destination,e[4]=a):a=e[4];let d;e[5]!==l||e[6]!==s?(d=P=>l(Ar({server:s,value:P})),e[5]=l,e[6]=s,e[7]=d):d=e[7];let f;e[8]!==a||e[9]!==d?(f=r.jsx(ce,{className:"mode-upstream-input",content:a,onEditDone:d,placeholder:"http://example.com:8080"}),e[8]=a,e[9]=d,e[10]=f):f=e[10];let h,p;e[11]===Symbol.for("react.memo_cache_sentinel")?(h=r.jsx("h4",{children:"Advanced Configuration"}),p=r.jsx("p",{children:"Listen Host"}),e[11]=h,e[12]=p):(h=e[11],p=e[12]);const g=s.listen_host||"";let x;e[13]!==l||e[14]!==s?(x=P=>l(Lr({server:s,value:P})),e[13]=l,e[14]=s,e[15]=x):x=e[15];let v;e[16]!==g||e[17]!==x?(v=r.jsx(ce,{className:"mode-input",content:g,onEditDone:x}),e[16]=g,e[17]=x,e[18]=v):v=e[18];let _;e[19]===Symbol.for("react.memo_cache_sentinel")?(_=r.jsx("p",{children:"Listen Port"}),e[19]=_):_=e[19];let b;e[20]!==s.listen_port?(b=s.listen_port?s.listen_port.toString():"",e[20]=s.listen_port,e[21]=b):b=e[21];let w;e[22]!==l||e[23]!==s?(w=P=>l(Rr({server:s,value:parseInt(P)})),e[22]=l,e[23]=s,e[24]=w):w=e[24];let C;e[25]!==b||e[26]!==w?(C=r.jsx(ce,{className:"mode-input",content:b,placeholder:"8080",onEditDone:w}),e[25]=b,e[26]=w,e[27]=C):C=e[27];let k;e[28]!==C||e[29]!==v?(k=r.jsxs(st,{iconClass:"fa fa-cog",children:[h,p,v,_,C]}),e[28]=C,e[29]=v,e[30]=k):k=e[30];let T;e[31]!==s.active||e[32]!==o||e[33]!==k||e[34]!==f?(T=r.jsxs(tt,{value:s.active,label:"Run HTTP/S Proxy and forward requests to",onChange:o,children:[f,k]}),e[31]=s.active,e[32]=o,e[33]=k,e[34]=f,e[35]=T):T=e[35];let M;e[36]!==i||e[37]!==n?(M=r.jsx(et,{error:n,backendState:i}),e[36]=i,e[37]=n,e[38]=M):M=e[38];let I;return e[39]!==T||e[40]!==M?(I=r.jsxs("div",{children:[T,M]}),e[39]=T,e[40]=M,e[41]=I):I=e[41],I}function Rf(){const t=N.c(9),e=F(Ff),s=F(Af);let i;if(t[0]!==s||t[1]!==e){let d;t[3]!==s?(d=f=>r.jsx(Df,{server:f,backendState:s[dr(f)]},f.ui_id),t[3]=s,t[4]=d):d=t[4],i=e.map(d),t[0]=s,t[1]=e,t[2]=i}else i=t[2];const l=i;let n,o;t[5]===Symbol.for("react.memo_cache_sentinel")?(n=r.jsx("h4",{className:"mode-title",children:"DNS Server"}),o=r.jsx("p",{className:"mode-description",children:"A recursive DNS resolver using the host's DNS configuration."}),t[5]=n,t[6]=o):(n=t[5],o=t[6]);let a;return t[7]!==l?(a=r.jsxs("div",{children:[n,o,l]}),t[7]=l,t[8]=a):a=t[8],a}function Af(t){return t.backendState.servers}function Ff(t){return t.modes.dns}function Df(t){const e=N.c(33),{server:s,backendState:i}=t,l=G(),n=s.error||i?.last_exception||void 0;let o;e[0]!==l||e[1]!==s?(o=()=>l(Fr({server:s,value:!s.active})),e[0]=l,e[1]=s,e[2]=o):o=e[2];let a,d;e[3]===Symbol.for("react.memo_cache_sentinel")?(a=r.jsx("h4",{children:"Advanced Configuration"}),d=r.jsx("p",{children:"Listen Host"}),e[3]=a,e[4]=d):(a=e[3],d=e[4]);const f=s.listen_host||"";let h;e[5]!==l||e[6]!==s?(h=T=>l(Dr({server:s,value:T})),e[5]=l,e[6]=s,e[7]=h):h=e[7];let p;e[8]!==f||e[9]!==h?(p=r.jsx(ce,{className:"mode-input",content:f,onEditDone:h}),e[8]=f,e[9]=h,e[10]=p):p=e[10];let g;e[11]===Symbol.for("react.memo_cache_sentinel")?(g=r.jsx("p",{children:"Listen Port"}),e[11]=g):g=e[11];let x;e[12]!==s.listen_port?(x=s.listen_port?s.listen_port.toString():"",e[12]=s.listen_port,e[13]=x):x=e[13];let v;e[14]!==l||e[15]!==s?(v=T=>l(Ir({server:s,value:parseInt(T)})),e[14]=l,e[15]=s,e[16]=v):v=e[16];let _;e[17]!==x||e[18]!==v?(_=r.jsx(ce,{className:"mode-input",content:x,placeholder:"8080",onEditDone:v}),e[17]=x,e[18]=v,e[19]=_):_=e[19];let b;e[20]!==_||e[21]!==p?(b=r.jsxs(st,{iconClass:"fa fa-cog",children:[a,d,p,g,_]}),e[20]=_,e[21]=p,e[22]=b):b=e[22];let w;e[23]!==s.active||e[24]!==o||e[25]!==b?(w=r.jsx(tt,{value:s.active,label:"Run DNS Server",onChange:o,children:b}),e[23]=s.active,e[24]=o,e[25]=b,e[26]=w):w=e[26];let C;e[27]!==i||e[28]!==n?(C=r.jsx(et,{error:n,backendState:i}),e[27]=i,e[28]=n,e[29]=C):C=e[29];let k;return e[30]!==w||e[31]!==C?(k=r.jsxs("div",{children:[w,C]}),e[30]=w,e[31]=C,e[32]=k):k=e[32],k}function fi(t){const e=N.c(10),{title:s,description:i}=t;let l;e[0]!==s?(l=r.jsx("h4",{className:"mode-title",children:s}),e[0]=s,e[1]=l):l=e[1];let n;e[2]===Symbol.for("react.memo_cache_sentinel")?(n=r.jsx("i",{className:"fa fa-exclamation-triangle","aria-hidden":"true"}),e[2]=n):n=e[2];let o;e[3]!==l?(o=r.jsxs("div",{className:"title-icon-container",children:[l,n]}),e[3]=l,e[4]=o):o=e[4];let a;e[5]!==i?(a=r.jsx("p",{className:"mode-description",children:i}),e[5]=i,e[6]=a):a=e[6];let d;return e[7]!==o||e[8]!==a?(d=r.jsxs("div",{className:"missing-mode-container",children:[o,a]}),e[7]=o,e[8]=a,e[9]=d):d=e[9],d}function If(){const t=N.c(19),{platform:e,localModeUnavailable:s}=F(Mf);let i,l;t[0]===Symbol.for("react.memo_cache_sentinel")?(i=r.jsx("h2",{children:"Intercept Traffic"}),l=r.jsx("p",{children:"Configure how you want to intercept traffic with mitmproxy."}),t[0]=i,t[1]=l):(i=t[0],l=t[1]);let n;t[2]===Symbol.for("react.memo_cache_sentinel")?(n=r.jsx("h3",{children:"Recommended"}),t[2]=n):n=t[2];let o;t[3]===Symbol.for("react.memo_cache_sentinel")?(o=r.jsx(of,{}),t[3]=o):o=t[3];let a;t[4]!==s?(a=s!==null?r.jsx(fi,{title:"Local Redirect Mode",description:s}):r.jsx(ef,{}),t[4]=s,t[5]=a):a=t[5];let d,f;t[6]===Symbol.for("react.memo_cache_sentinel")?(d=r.jsx(ff,{}),f=r.jsx(mf,{}),t[6]=d,t[7]=f):(d=t[6],f=t[7]);let h;t[8]!==a?(h=r.jsxs("div",{className:"modes-category green-left-border",children:[n,r.jsxs("div",{className:"modes-container",children:[o,a,d,f]})]}),t[8]=a,t[9]=h):h=t[9];let p;t[10]===Symbol.for("react.memo_cache_sentinel")?(p=r.jsx("h3",{children:"Advanced"}),t[10]=p):p=t[10];let g,x,v;t[11]===Symbol.for("react.memo_cache_sentinel")?(v=r.jsx(Sf,{}),g=r.jsx(kf,{}),x=r.jsx(Rf,{}),t[11]=g,t[12]=x,t[13]=v):(g=t[11],x=t[12],v=t[13]);let _;t[14]!==e?(_=r.jsxs("div",{className:"modes-category gray-left-border",children:[p,r.jsxs("div",{className:"modes-container",children:[v,g,x,e.startsWith("win32")?r.jsx(fi,{title:"Transparent Proxy",description:"This mode is only supported on Linux and MacOS."}):r.jsx(jf,{})]})]}),t[14]=e,t[15]=_):_=t[15];let b;return t[16]!==_||t[17]!==h?(b=r.jsxs("div",{className:"modes",children:[i,l,h,_]}),t[16]=_,t[17]=h,t[18]=b):b=t[18],b}function Mf(t){return t.backendState}function Pf(){const t=N.c(4),e=F(Hf),s=F(qf),i=F(Of);let l;return t[0]!==i||t[1]!==s||t[2]!==e?(l=r.jsx("div",{className:"main-view",children:i===ve.Capture?r.jsx(If,{}):r.jsxs(r.Fragment,{children:[s?r.jsx(Wd,{}):r.jsx(Kd,{}),e&&r.jsxs(r.Fragment,{children:[r.jsx(Md,{},"splitter"),r.jsx(Ad,{},"flowDetails")]})]})}),t[0]=i,t[1]=s,t[2]=e,t[3]=l):l=t[3],l}function Of(t){return t.ui.tabs.current}function qf(t){return t.flows.list.length>0}function Hf(t){return t.flows.selected.length===1}function vt(t){const e=N.c(2),{children:s}=t;let i;return e[0]!==s?(i=window.MITMWEB_STATIC?null:r.jsx(r.Fragment,{children:s}),e[0]=s,e[1]=i):i=e[1],i}const Vf=A.memo(function(){const e=N.c(20),s=G(),i=F(Uf);let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l={placement:"bottom-start"},e[0]=l):l=e[0];let n;e[1]!==s?(n=r.jsx("li",{children:r.jsx(qr,{icon:"fa-folder-open",text:" Open...",onClick:Bf,onOpenFile:b=>{s(pc(b)),document.body.click()}})}),e[1]=s,e[2]=n):n=e[2];let o;e[3]===Symbol.for("react.memo_cache_sentinel")?(o=r.jsxs(ke,{onClick:Wf,children:[r.jsx("i",{className:"fa fa-fw fa-floppy-o"})," Save"]}),e[3]=o):o=e[3];let a;e[4]!==i?(a=()=>location.replace("/flows/dump?filter="+i),e[4]=i,e[5]=a):a=e[5];let d;e[6]===Symbol.for("react.memo_cache_sentinel")?(d=r.jsx("i",{className:"fa fa-fw fa-floppy-o"}),e[6]=d):d=e[6];let f;e[7]!==a?(f=r.jsxs(ke,{onClick:a,children:[d," Save filtered"]}),e[7]=a,e[8]=f):f=e[8];let h;e[9]!==s?(h=()=>confirm("Delete all flows?")&&s(Bi()),e[9]=s,e[10]=h):h=e[10];let p;e[11]===Symbol.for("react.memo_cache_sentinel")?(p=r.jsx("i",{className:"fa fa-fw fa-trash"}),e[11]=p):p=e[11];let g;e[12]!==h?(g=r.jsxs(ke,{onClick:h,children:[p," Clear All"]}),e[12]=h,e[13]=g):g=e[13];let x;e[14]===Symbol.for("react.memo_cache_sentinel")?(x=r.jsx(qa,{}),e[14]=x):x=e[14];let v;e[15]===Symbol.for("react.memo_cache_sentinel")?(v=r.jsxs(vt,{children:[x,r.jsx("li",{children:r.jsxs("a",{href:"http://mitm.it/",target:"_blank",rel:"noreferrer",children:[r.jsx("i",{className:"fa fa-fw fa-external-link"})," Install Certificates..."]})})]}),e[15]=v):v=e[15];let _;return e[16]!==n||e[17]!==f||e[18]!==g?(_=r.jsxs(Lt,{className:"pull-left special",text:"File",options:l,children:[n,o,f,g,v]}),e[16]=n,e[17]=f,e[18]=g,e[19]=_):_=e[19],_});function Uf(t){return t.ui.filter[xe.Search]}function Bf(t){return t.stopPropagation()}function Wf(){return location.replace("/flows/dump")}const Kf=A.memo(function(){const e=N.c(5),s=F(zf),i=F(Gf);switch(s){case St.INIT:{let l;return e[0]===Symbol.for("react.memo_cache_sentinel")?(l=r.jsx("span",{className:"connection-indicator init",children:"connecting…"}),e[0]=l):l=e[0],l}case St.FETCHING:{let l;return e[1]===Symbol.for("react.memo_cache_sentinel")?(l=r.jsx("span",{className:"connection-indicator fetching",children:"fetching data…"}),e[1]=l):l=e[1],l}case St.ESTABLISHED:{let l;return e[2]===Symbol.for("react.memo_cache_sentinel")?(l=r.jsx("span",{className:"connection-indicator established",children:"connected"}),e[2]=l):l=e[2],l}case St.ERROR:{let l;return e[3]!==i?(l=r.jsx("span",{className:"connection-indicator error",title:i,children:"connection lost"}),e[3]=i,e[4]=l):l=e[4],l}default:kt(s)}});function zf(t){return t.connection.state}function Gf(t){return t.connection.message}dl.title="Capture";function dl(){const t=N.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=r.jsx(r.Fragment,{}),t[0]=e):e=t[0],e}const ui=function(){function t(i,l){function n(){this.constructor=i}n.prototype=l.prototype,i.prototype=new n}function e(i,l,n,o){this.message=i,this.expected=l,this.found=n,this.location=o,this.name="SyntaxError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,e)}t(e,Error);function s(i){var l=arguments.length>1?arguments[1]:{},n={},o={start:$n},a=$n,d={type:"other",description:"filter expression"},f=function(c){return c},h={type:"other",description:"whitespace"},p=/^[ \t\n\r]/,g={type:"class",value:"[ \\t\\n\\r]",description:"[ \\t\\n\\r]"},x={type:"other",description:"control character"},v=/^[|&!()~"]/,_={type:"class",value:'[|&!()~"]',description:'[|&!()~"]'},b={type:"other",description:"optional whitespace"},w="|",C={type:"literal",value:"|",description:'"|"'},k=function(c,u){return go(c,u)},T="&",M={type:"literal",value:"&",description:'"&"'},I=function(c,u){return xo(c,u)},P="!",O={type:"literal",value:"!",description:'"!"'},U=function(c){return vo(c)},V="(",W={type:"literal",value:"(",description:'"("'},Y=")",z={type:"literal",value:")",description:'")"'},te=function(c){return _o(c)},J="~all",Q={type:"literal",value:"~all",description:'"~all"'},X=function(){return Tn},Z="~a",ae={type:"literal",value:"~a",description:'"~a"'},oe=function(){return Rn},de="~b",ye={type:"literal",value:"~b",description:'"~b"'},Me=function(c){return jo(c)},Se="~bq",Ee={type:"literal",value:"~bq",description:'"~bq"'},E=function(c){return yo(c)},he="~bs",B={type:"literal",value:"~bs",description:'"~bs"'},le=function(c){return bo(c)},q="~c",$e={type:"literal",value:"~c",description:'"~c"'},We=function(c){return wo(c)},Pe="~comment",ee={type:"literal",value:"~comment",description:'"~comment"'},Oe=function(c){return So(c)},Le="~d",re={type:"literal",value:"~d",description:'"~d"'},fe=function(c){return $o(c)},ge="~dns",Re={type:"literal",value:"~dns",description:'"~dns"'},nt=function(){return An},Ye="~dst",rs={type:"literal",value:"~dst",description:'"~dst"'},S=function(c){return No(c)},$="~e",R={type:"literal",value:"~e",description:'"~e"'},H=function(){return Fn},Rt="~h",ls={type:"literal",value:"~h",description:'"~h"'},Ne=function(c){return Co(c)},Ae="~hq",pt={type:"literal",value:"~hq",description:'"~hq"'},Ke=function(c){return ko(c)},_t="~hs",At={type:"literal",value:"~hs",description:'"~hs"'},it=function(c){return Eo(c)},Ft="~http",ht={type:"literal",value:"~http",description:'"~http"'},Fe=function(){return Dn},Js="~marked",ml={type:"literal",value:"~marked",description:'"~marked"'},gl=function(){return In},Ys="~marker",xl={type:"literal",value:"~marker",description:'"~marker"'},vl=function(c){return To(c)},Qs="~m",_l={type:"literal",value:"~m",description:'"~m"'},jl=function(c){return Lo(c)},Xs="~q",yl={type:"literal",value:"~q",description:'"~q"'},bl=function(){return Mn},Zs="~replayq",wl={type:"literal",value:"~replayq",description:'"~replayq"'},Sl=function(){return Pn},en="~replays",$l={type:"literal",value:"~replays",description:'"~replays"'},Nl=function(){return On},tn="~replay",Cl={type:"literal",value:"~replay",description:'"~replay"'},kl=function(){return qn},sn="~src",El={type:"literal",value:"~src",description:'"~src"'},Tl=function(c){return Ro(c)},nn="~s",Ll={type:"literal",value:"~s",description:'"~s"'},Rl=function(){return Hn},rn="~tcp",Al={type:"literal",value:"~tcp",description:'"~tcp"'},Fl=function(){return Vn},ln="~udp",Dl={type:"literal",value:"~udp",description:'"~udp"'},Il=function(){return Un},on="~tq",Ml={type:"literal",value:"~tq",description:'"~tq"'},Pl=function(c){return Ao(c)},cn="~ts",Ol={type:"literal",value:"~ts",description:'"~ts"'},ql=function(c){return Fo(c)},an="~t",Hl={type:"literal",value:"~t",description:'"~t"'},Vl=function(c){return Do(c)},dn="~u",Ul={type:"literal",value:"~u",description:'"~u"'},fn=function(c){return Io(c)},un="~websocket",Bl={type:"literal",value:"~websocket",description:'"~websocket"'},Wl=function(){return Bn},Kl={type:"other",description:"integer"},pn=/^['"]/,hn={type:"class",value:`['"]`,description:`['"]`},mn=/^[0-9]/,gn={type:"class",value:"[0-9]",description:"[0-9]"},zl=function(c){return parseInt(c.join(""),10)},Gl={type:"other",description:"string"},xn='"',vn={type:"literal",value:'"',description:'"\\""'},os=function(c){return c.join("")},_n="'",jn={type:"literal",value:"'",description:`"'"`},Jl=/^["\\]/,Yl={type:"class",value:'["\\\\]',description:'["\\\\]'},cs={type:"any",description:"any character"},jt=function(c){return c},yn="\\",bn={type:"literal",value:"\\",description:'"\\\\"'},Ql=/^['\\]/,Xl={type:"class",value:"['\\\\]",description:"['\\\\]"},Zl=/^['"\\]/,eo={type:"class",value:`['"\\\\]`,description:`['"\\\\]`},to="n",so={type:"literal",value:"n",description:'"n"'},no=function(){return`
`},io="r",ro={type:"literal",value:"r",description:'"r"'},lo=function(){return"\r"},oo="t",co={type:"literal",value:"t",description:'"t"'},ao=function(){return"	"},m=0,Dt=[{line:1,column:1,seenCR:!1}],qe=0,as=[],L=0,It;if("startRule"in l){if(!(l.startRule in o))throw new Error(`Can't start parsing from rule "`+l.startRule+'".');a=o[l.startRule]}function wn(c){var u=Dt[c],j,y;if(u)return u;for(j=c-1;!Dt[j];)j--;for(u=Dt[j],u={line:u.line,column:u.column,seenCR:u.seenCR};j<c;)y=i.charAt(j),y===`
`?(u.seenCR||u.line++,u.column=1,u.seenCR=!1):y==="\r"||y==="\u2028"||y==="\u2029"?(u.line++,u.column=1,u.seenCR=!0):(u.column++,u.seenCR=!1),j++;return Dt[c]=u,u}function Sn(c,u){var j=wn(c),y=wn(u);return{start:{offset:c,line:j.line,column:j.column},end:{offset:u,line:y.line,column:y.column}}}function D(c){m<qe||(m>qe&&(qe=m,as=[]),as.push(c))}function fo(c,u,j,y){function He(De){var Qe=1;for(De.sort(function(Ot,rt){return Ot.description<rt.description?-1:Ot.description>rt.description?1:0});Qe<De.length;)De[Qe-1]===De[Qe]?De.splice(Qe,1):Qe++}function Ce(De,Qe){function Ot(Mo){function qt(Ge){return Ge.charCodeAt(0).toString(16).toUpperCase()}return Mo.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(Ge){return"\\x0"+qt(Ge)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(Ge){return"\\x"+qt(Ge)}).replace(/[\u0100-\u0FFF]/g,function(Ge){return"\\u0"+qt(Ge)}).replace(/[\u1000-\uFFFF]/g,function(Ge){return"\\u"+qt(Ge)})}var rt=new Array(De.length),Wn,Kn,yt;for(yt=0;yt<De.length;yt++)rt[yt]=De[yt].description;return Wn=De.length>1?rt.slice(0,-1).join(", ")+" or "+rt[De.length-1]:rt[0],Kn=Qe?'"'+Ot(Qe)+'"':"end of input","Expected "+Wn+" but "+Kn+" found."}return u!==null&&He(u),new e(Ce(u,j),u,j,y)}function $n(){var c,u,j,y;return L++,c=m,u=ze(),u!==n?(j=ds(),j!==n?(y=ze(),y!==n?(u=f(j),c=u):(m=c,c=n)):(m=c,c=n)):(m=c,c=n),L--,c===n&&(u=n,L===0&&D(d)),c}function K(){var c;return L++,p.test(i.charAt(m))?(c=i.charAt(m),m++):(c=n,L===0&&D(g)),L--,c===n&&L===0&&D(h),c}function uo(){var c;return L++,v.test(i.charAt(m))?(c=i.charAt(m),m++):(c=n,L===0&&D(_)),L--,c===n&&L===0&&D(x),c}function ze(){var c,u;for(L++,c=[],u=K();u!==n;)c.push(u),u=K();return L--,c===n&&(u=n,L===0&&D(b)),c}function ds(){var c,u,j,y,He,Ce;return c=m,u=Mt(),u!==n?(j=ze(),j!==n?(i.charCodeAt(m)===124?(y=w,m++):(y=n,L===0&&D(C)),y!==n?(He=ze(),He!==n?(Ce=ds(),Ce!==n?(u=k(u,Ce),c=u):(m=c,c=n)):(m=c,c=n)):(m=c,c=n)):(m=c,c=n)):(m=c,c=n),c===n&&(c=Mt()),c}function Mt(){var c,u,j,y,He,Ce;if(c=m,u=Pt(),u!==n?(j=ze(),j!==n?(i.charCodeAt(m)===38?(y=T,m++):(y=n,L===0&&D(M)),y!==n?(He=ze(),He!==n?(Ce=Mt(),Ce!==n?(u=I(u,Ce),c=u):(m=c,c=n)):(m=c,c=n)):(m=c,c=n)):(m=c,c=n)):(m=c,c=n),c===n){if(c=m,u=Pt(),u!==n){if(j=[],y=K(),y!==n)for(;y!==n;)j.push(y),y=K();else j=n;j!==n?(y=Mt(),y!==n?(u=I(u,y),c=u):(m=c,c=n)):(m=c,c=n)}else m=c,c=n;c===n&&(c=Pt())}return c}function Pt(){var c,u,j,y;return c=m,i.charCodeAt(m)===33?(u=P,m++):(u=n,L===0&&D(O)),u!==n?(j=ze(),j!==n?(y=Pt(),y!==n?(u=U(y),c=u):(m=c,c=n)):(m=c,c=n)):(m=c,c=n),c===n&&(c=po()),c}function po(){var c,u,j,y,He,Ce;return c=m,i.charCodeAt(m)===40?(u=V,m++):(u=n,L===0&&D(W)),u!==n?(j=ze(),j!==n?(y=ds(),y!==n?(He=ze(),He!==n?(i.charCodeAt(m)===41?(Ce=Y,m++):(Ce=n,L===0&&D(z)),Ce!==n?(u=te(y),c=u):(m=c,c=n)):(m=c,c=n)):(m=c,c=n)):(m=c,c=n)):(m=c,c=n),c===n&&(c=ho()),c}function ho(){var c,u,j,y;if(c=m,i.substr(m,4)===J?(u=J,m+=4):(u=n,L===0&&D(Q)),u!==n&&(u=X()),c=u,c===n&&(c=m,i.substr(m,2)===Z?(u=Z,m+=2):(u=n,L===0&&D(ae)),u!==n&&(u=oe()),c=u,c===n)){if(c=m,i.substr(m,2)===de?(u=de,m+=2):(u=n,L===0&&D(ye)),u!==n){if(j=[],y=K(),y!==n)for(;y!==n;)j.push(y),y=K();else j=n;j!==n?(y=me(),y!==n?(u=Me(y),c=u):(m=c,c=n)):(m=c,c=n)}else m=c,c=n;if(c===n){if(c=m,i.substr(m,3)===Se?(u=Se,m+=3):(u=n,L===0&&D(Ee)),u!==n){if(j=[],y=K(),y!==n)for(;y!==n;)j.push(y),y=K();else j=n;j!==n?(y=me(),y!==n?(u=E(y),c=u):(m=c,c=n)):(m=c,c=n)}else m=c,c=n;if(c===n){if(c=m,i.substr(m,3)===he?(u=he,m+=3):(u=n,L===0&&D(B)),u!==n){if(j=[],y=K(),y!==n)for(;y!==n;)j.push(y),y=K();else j=n;j!==n?(y=me(),y!==n?(u=le(y),c=u):(m=c,c=n)):(m=c,c=n)}else m=c,c=n;if(c===n){if(c=m,i.substr(m,2)===q?(u=q,m+=2):(u=n,L===0&&D($e)),u!==n){if(j=[],y=K(),y!==n)for(;y!==n;)j.push(y),y=K();else j=n;j!==n?(y=mo(),y!==n?(u=We(y),c=u):(m=c,c=n)):(m=c,c=n)}else m=c,c=n;if(c===n){if(c=m,i.substr(m,8)===Pe?(u=Pe,m+=8):(u=n,L===0&&D(ee)),u!==n){if(j=[],y=K(),y!==n)for(;y!==n;)j.push(y),y=K();else j=n;j!==n?(y=me(),y!==n?(u=Oe(y),c=u):(m=c,c=n)):(m=c,c=n)}else m=c,c=n;if(c===n){if(c=m,i.substr(m,2)===Le?(u=Le,m+=2):(u=n,L===0&&D(re)),u!==n){if(j=[],y=K(),y!==n)for(;y!==n;)j.push(y),y=K();else j=n;j!==n?(y=me(),y!==n?(u=fe(y),c=u):(m=c,c=n)):(m=c,c=n)}else m=c,c=n;if(c===n&&(c=m,i.substr(m,4)===ge?(u=ge,m+=4):(u=n,L===0&&D(Re)),u!==n&&(u=nt()),c=u,c===n)){if(c=m,i.substr(m,4)===Ye?(u=Ye,m+=4):(u=n,L===0&&D(rs)),u!==n){if(j=[],y=K(),y!==n)for(;y!==n;)j.push(y),y=K();else j=n;j!==n?(y=me(),y!==n?(u=S(y),c=u):(m=c,c=n)):(m=c,c=n)}else m=c,c=n;if(c===n&&(c=m,i.substr(m,2)===$?(u=$,m+=2):(u=n,L===0&&D(R)),u!==n&&(u=H()),c=u,c===n)){if(c=m,i.substr(m,2)===Rt?(u=Rt,m+=2):(u=n,L===0&&D(ls)),u!==n){if(j=[],y=K(),y!==n)for(;y!==n;)j.push(y),y=K();else j=n;j!==n?(y=me(),y!==n?(u=Ne(y),c=u):(m=c,c=n)):(m=c,c=n)}else m=c,c=n;if(c===n){if(c=m,i.substr(m,3)===Ae?(u=Ae,m+=3):(u=n,L===0&&D(pt)),u!==n){if(j=[],y=K(),y!==n)for(;y!==n;)j.push(y),y=K();else j=n;j!==n?(y=me(),y!==n?(u=Ke(y),c=u):(m=c,c=n)):(m=c,c=n)}else m=c,c=n;if(c===n){if(c=m,i.substr(m,3)===_t?(u=_t,m+=3):(u=n,L===0&&D(At)),u!==n){if(j=[],y=K(),y!==n)for(;y!==n;)j.push(y),y=K();else j=n;j!==n?(y=me(),y!==n?(u=it(y),c=u):(m=c,c=n)):(m=c,c=n)}else m=c,c=n;if(c===n&&(c=m,i.substr(m,5)===Ft?(u=Ft,m+=5):(u=n,L===0&&D(ht)),u!==n&&(u=Fe()),c=u,c===n&&(c=m,i.substr(m,7)===Js?(u=Js,m+=7):(u=n,L===0&&D(ml)),u!==n&&(u=gl()),c=u,c===n))){if(c=m,i.substr(m,7)===Ys?(u=Ys,m+=7):(u=n,L===0&&D(xl)),u!==n){if(j=[],y=K(),y!==n)for(;y!==n;)j.push(y),y=K();else j=n;j!==n?(y=me(),y!==n?(u=vl(y),c=u):(m=c,c=n)):(m=c,c=n)}else m=c,c=n;if(c===n){if(c=m,i.substr(m,2)===Qs?(u=Qs,m+=2):(u=n,L===0&&D(_l)),u!==n){if(j=[],y=K(),y!==n)for(;y!==n;)j.push(y),y=K();else j=n;j!==n?(y=me(),y!==n?(u=jl(y),c=u):(m=c,c=n)):(m=c,c=n)}else m=c,c=n;if(c===n&&(c=m,i.substr(m,2)===Xs?(u=Xs,m+=2):(u=n,L===0&&D(yl)),u!==n&&(u=bl()),c=u,c===n&&(c=m,i.substr(m,8)===Zs?(u=Zs,m+=8):(u=n,L===0&&D(wl)),u!==n&&(u=Sl()),c=u,c===n&&(c=m,i.substr(m,8)===en?(u=en,m+=8):(u=n,L===0&&D($l)),u!==n&&(u=Nl()),c=u,c===n&&(c=m,i.substr(m,7)===tn?(u=tn,m+=7):(u=n,L===0&&D(Cl)),u!==n&&(u=kl()),c=u,c===n))))){if(c=m,i.substr(m,4)===sn?(u=sn,m+=4):(u=n,L===0&&D(El)),u!==n){if(j=[],y=K(),y!==n)for(;y!==n;)j.push(y),y=K();else j=n;j!==n?(y=me(),y!==n?(u=Tl(y),c=u):(m=c,c=n)):(m=c,c=n)}else m=c,c=n;if(c===n&&(c=m,i.substr(m,2)===nn?(u=nn,m+=2):(u=n,L===0&&D(Ll)),u!==n&&(u=Rl()),c=u,c===n&&(c=m,i.substr(m,4)===rn?(u=rn,m+=4):(u=n,L===0&&D(Al)),u!==n&&(u=Fl()),c=u,c===n&&(c=m,i.substr(m,4)===ln?(u=ln,m+=4):(u=n,L===0&&D(Dl)),u!==n&&(u=Il()),c=u,c===n)))){if(c=m,i.substr(m,3)===on?(u=on,m+=3):(u=n,L===0&&D(Ml)),u!==n){if(j=[],y=K(),y!==n)for(;y!==n;)j.push(y),y=K();else j=n;j!==n?(y=me(),y!==n?(u=Pl(y),c=u):(m=c,c=n)):(m=c,c=n)}else m=c,c=n;if(c===n){if(c=m,i.substr(m,3)===cn?(u=cn,m+=3):(u=n,L===0&&D(Ol)),u!==n){if(j=[],y=K(),y!==n)for(;y!==n;)j.push(y),y=K();else j=n;j!==n?(y=me(),y!==n?(u=ql(y),c=u):(m=c,c=n)):(m=c,c=n)}else m=c,c=n;if(c===n){if(c=m,i.substr(m,2)===an?(u=an,m+=2):(u=n,L===0&&D(Hl)),u!==n){if(j=[],y=K(),y!==n)for(;y!==n;)j.push(y),y=K();else j=n;j!==n?(y=me(),y!==n?(u=Vl(y),c=u):(m=c,c=n)):(m=c,c=n)}else m=c,c=n;if(c===n){if(c=m,i.substr(m,2)===dn?(u=dn,m+=2):(u=n,L===0&&D(Ul)),u!==n){if(j=[],y=K(),y!==n)for(;y!==n;)j.push(y),y=K();else j=n;j!==n?(y=me(),y!==n?(u=fn(y),c=u):(m=c,c=n)):(m=c,c=n)}else m=c,c=n;c===n&&(c=m,i.substr(m,10)===un?(u=un,m+=10):(u=n,L===0&&D(Bl)),u!==n&&(u=Wl()),c=u,c===n&&(c=m,u=me(),u!==n&&(u=fn(u)),c=u))}}}}}}}}}}}}}}}}}return c}function mo(){var c,u,j,y;if(L++,c=m,pn.test(i.charAt(m))?(u=i.charAt(m),m++):(u=n,L===0&&D(hn)),u===n&&(u=null),u!==n){if(j=[],mn.test(i.charAt(m))?(y=i.charAt(m),m++):(y=n,L===0&&D(gn)),y!==n)for(;y!==n;)j.push(y),mn.test(i.charAt(m))?(y=i.charAt(m),m++):(y=n,L===0&&D(gn));else j=n;j!==n?(pn.test(i.charAt(m))?(y=i.charAt(m),m++):(y=n,L===0&&D(hn)),y===n&&(y=null),y!==n?(u=zl(j),c=u):(m=c,c=n)):(m=c,c=n)}else m=c,c=n;return L--,c===n&&(u=n,L===0&&D(Kl)),c}function me(){var c,u,j,y;if(L++,c=m,i.charCodeAt(m)===34?(u=xn,m++):(u=n,L===0&&D(vn)),u!==n){for(j=[],y=Nn();y!==n;)j.push(y),y=Nn();j!==n?(i.charCodeAt(m)===34?(y=xn,m++):(y=n,L===0&&D(vn)),y!==n?(u=os(j),c=u):(m=c,c=n)):(m=c,c=n)}else m=c,c=n;if(c===n){if(c=m,i.charCodeAt(m)===39?(u=_n,m++):(u=n,L===0&&D(jn)),u!==n){for(j=[],y=Cn();y!==n;)j.push(y),y=Cn();j!==n?(i.charCodeAt(m)===39?(y=_n,m++):(y=n,L===0&&D(jn)),y!==n?(u=os(j),c=u):(m=c,c=n)):(m=c,c=n)}else m=c,c=n;if(c===n)if(c=m,u=m,L++,j=uo(),L--,j===n?u=void 0:(m=u,u=n),u!==n){if(j=[],y=kn(),y!==n)for(;y!==n;)j.push(y),y=kn();else j=n;j!==n?(u=os(j),c=u):(m=c,c=n)}else m=c,c=n}return L--,c===n&&(u=n,L===0&&D(Gl)),c}function Nn(){var c,u,j;return c=m,u=m,L++,Jl.test(i.charAt(m))?(j=i.charAt(m),m++):(j=n,L===0&&D(Yl)),L--,j===n?u=void 0:(m=u,u=n),u!==n?(i.length>m?(j=i.charAt(m),m++):(j=n,L===0&&D(cs)),j!==n?(u=jt(j),c=u):(m=c,c=n)):(m=c,c=n),c===n&&(c=m,i.charCodeAt(m)===92?(u=yn,m++):(u=n,L===0&&D(bn)),u!==n?(j=En(),j!==n?(u=jt(j),c=u):(m=c,c=n)):(m=c,c=n)),c}function Cn(){var c,u,j;return c=m,u=m,L++,Ql.test(i.charAt(m))?(j=i.charAt(m),m++):(j=n,L===0&&D(Xl)),L--,j===n?u=void 0:(m=u,u=n),u!==n?(i.length>m?(j=i.charAt(m),m++):(j=n,L===0&&D(cs)),j!==n?(u=jt(j),c=u):(m=c,c=n)):(m=c,c=n),c===n&&(c=m,i.charCodeAt(m)===92?(u=yn,m++):(u=n,L===0&&D(bn)),u!==n?(j=En(),j!==n?(u=jt(j),c=u):(m=c,c=n)):(m=c,c=n)),c}function kn(){var c,u,j;return c=m,u=m,L++,j=K(),L--,j===n?u=void 0:(m=u,u=n),u!==n?(i.length>m?(j=i.charAt(m),m++):(j=n,L===0&&D(cs)),j!==n?(u=jt(j),c=u):(m=c,c=n)):(m=c,c=n),c}function En(){var c,u;return Zl.test(i.charAt(m))?(c=i.charAt(m),m++):(c=n,L===0&&D(eo)),c===n&&(c=m,i.charCodeAt(m)===110?(u=to,m++):(u=n,L===0&&D(so)),u!==n&&(u=no()),c=u,c===n&&(c=m,i.charCodeAt(m)===114?(u=io,m++):(u=n,L===0&&D(ro)),u!==n&&(u=lo()),c=u,c===n&&(c=m,i.charCodeAt(m)===116?(u=oo,m++):(u=n,L===0&&D(co)),u!==n&&(u=ao()),c=u))),c}function go(c,u){function j(){return c.apply(this,arguments)||u.apply(this,arguments)}return j.desc=c.desc+" or "+u.desc,j}function xo(c,u){function j(){return c.apply(this,arguments)&&u.apply(this,arguments)}return j.desc=c.desc+" and "+u.desc,j}function vo(c){function u(){return!c.apply(this,arguments)}return u.desc="not "+c.desc,u}function _o(c){function u(){return c.apply(this,arguments)}return u.desc="("+c.desc+")",u}function Tn(c){return!0}Tn.desc="all flows";var Ln=[new RegExp("text/javascript"),new RegExp("application/x-javascript"),new RegExp("application/javascript"),new RegExp("text/css"),new RegExp("image/.*"),new RegExp("font/.*"),new RegExp("application/font.*")];function Rn(c){if(c.response){for(var u=xt.getContentType(c.response),j=Ln.length;j--;)if(Ln[j].test(u))return!0}return!1}Rn.desc="is asset";function jo(c){c=new RegExp(c,"i");function u(j){return!0}return u.desc="body matches "+c,u}function yo(c){c=new RegExp(c,"i");function u(j){return!0}return u.desc="body request matches "+c,u}function bo(c){c=new RegExp(c,"i");function u(j){return!0}return u.desc="body response matches "+c,u}function wo(c){function u(j){return j.response&&j.response.status_code===c}return u.desc="resp. code is "+c,u}function So(c){c=new RegExp(c,"i");function u(j){return c.test(j.comment)}return u.desc="comment matches "+c,u}function $o(c){c=new RegExp(c,"i");function u(j){return j.request&&(c.test(j.request.host)||c.test(j.request.pretty_host))}return u.desc="domain matches "+c,u}function An(c){return c.type==="dns"}An.desc="is a DNS Flow";function No(c){c=new RegExp(c,"i");function u(j){return!!j.server_conn.address&&c.test(j.server_conn.address[0]+":"+j.server_conn.address[1])}return u.desc="destination address matches "+c,u}function Fn(c){return!!c.error}Fn.desc="has error";function Co(c){c=new RegExp(c,"i");function u(j){return j.request&&ct.match_header(j.request,c)||j.response&&xt.match_header(j.response,c)}return u.desc="header matches "+c,u}function ko(c){c=new RegExp(c,"i");function u(j){return j.request&&ct.match_header(j.request,c)}return u.desc="req. header matches "+c,u}function Eo(c){c=new RegExp(c,"i");function u(j){return j.response&&xt.match_header(j.response,c)}return u.desc="resp. header matches "+c,u}function Dn(c){return c.type==="http"}Dn.desc="is an HTTP Flow";function In(c){return c.marked}In.desc="is marked";function To(c){c=new RegExp(c,"i");function u(j){return c.test(j.marked)}return u.desc="marker matches "+c,u}function Lo(c){c=new RegExp(c,"i");function u(j){return j.request&&c.test(j.request.method)}return u.desc="method matches "+c,u}function Mn(c){return c.request&&!c.response}Mn.desc="has no response";function Pn(c){return c.is_replay==="request"}Pn.desc="request has been replayed";function On(c){return c.is_replay==="response"}On.desc="response has been replayed";function qn(c){return!!c.is_replay}qn.desc="flow has been replayed";function Ro(c){c=new RegExp(c,"i");function u(j){return!!j.client_conn.peername&&c.test(j.client_conn.peername[0]+":"+j.client_conn.peername[1])}return u.desc="source address matches "+c,u}function Hn(c){return!!c.response}Hn.desc="has response";function Vn(c){return c.type==="tcp"}Vn.desc="is a TCP Flow";function Un(c){return c.type==="udp"}Un.desc="is a UDP Flow";function Ao(c){c=new RegExp(c,"i");function u(j){return j.request&&c.test(ct.getContentType(j.request))}return u.desc="req. content type matches "+c,u}function Fo(c){c=new RegExp(c,"i");function u(j){return j.response&&c.test(xt.getContentType(j.response))}return u.desc="resp. content type matches "+c,u}function Do(c){c=new RegExp(c,"i");function u(j){return j.request&&c.test(ct.getContentType(j.request))||j.response&&c.test(xt.getContentType(j.response))}return u.desc="content type matches "+c,u}function Io(c){c=new RegExp(c,"i");function u(j){if(j.type==="dns"){const y=j.request?.questions[0];return y&&c.test(y.name)}return j.request&&c.test(ct.pretty_url(j.request))}return u.desc="url matches "+c,u}function Bn(c){return!!c.websocket}if(Bn.desc="is a Websocket Flow",It=a(),It!==n&&m===i.length)return It;throw It!==n&&m<i.length&&D({type:"end",description:"end of input"}),fo(null,as,qe<i.length?i.charAt(qe):null,qe<i.length?Sn(qe,qe+1):Sn(qe,qe))}return{SyntaxError:e,parse:s}}();class Je extends A.Component{static xhr;static doc;constructor(e,s){super(e,s),this.state={doc:Je.doc}}componentDidMount(){Je.xhr||(Je.xhr=se("/filter-help").then(e=>e.json()),Je.xhr.catch(()=>{Je.xhr=null})),this.state.doc||Je.xhr.then(e=>{Je.doc=e,this.setState({doc:e})})}render(){const{doc:e}=this.state;return e?r.jsx("table",{className:"table table-condensed",children:r.jsxs("tbody",{children:[e.commands.map(s=>r.jsxs("tr",{onClick:()=>this.props.selectHandler(s[0].split(" ")[0]+" "),children:[r.jsx("td",{children:s[0].replace(" "," ")}),r.jsx("td",{children:s[1]})]},s[1])),r.jsx("tr",{children:r.jsx("td",{colSpan:2,children:r.jsxs("a",{href:"https://mitmproxy.org/docs/latest/concepts-filters/",target:"_blank",rel:"noreferrer",children:[r.jsx("i",{className:"fa fa-external-link"}),"  mitmproxy docs"]})})},"docs-link")]})}):r.jsx("i",{className:"fa fa-spinner fa-spin"})}}var is=(t=>(t.SEARCH="search",t.HIGHLIGHT="tag",t.INTERCEPT="pause",t))(is||{});class zs extends A.Component{inputRef=Te.createRef();constructor(e,s){super(e,s),this.state={value:this.props.value,focus:!1,mousefocus:!1},this.onChange=this.onChange.bind(this),this.onFocus=this.onFocus.bind(this),this.onBlur=this.onBlur.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onMouseEnter=this.onMouseEnter.bind(this),this.onMouseLeave=this.onMouseLeave.bind(this),this.selectFilter=this.selectFilter.bind(this)}UNSAFE_componentWillReceiveProps(e){this.setState({value:e.value})}isValid(e){try{return e&&ui.parse(e),!0}catch{return!1}}getDesc(){if(!this.state.value)return r.jsx(Je,{selectHandler:this.selectFilter});try{return ui.parse(this.state.value).desc}catch(e){return""+e}}onChange(e){const s=e.target.value;this.setState({value:s}),this.isValid(s)&&this.props.onChange(s)}onFocus(){this.setState({focus:!0})}onBlur(){this.setState({focus:!1})}onMouseEnter(){this.setState({mousefocus:!0})}onMouseLeave(){this.setState({mousefocus:!1})}onKeyDown(e){(e.key==="Escape"||e.key==="Enter")&&(this.blur(),this.setState({mousefocus:!1})),e.stopPropagation()}selectFilter(e){this.setState({value:e}),this.inputRef.current?.focus(),this.isValid(e)&&this.props.onChange(e)}blur(){this.inputRef.current?.blur()}select(){this.inputRef.current?.select()}render(){const{icon:e,color:s,placeholder:i}=this.props,{value:l,focus:n,mousefocus:o}=this.state;return r.jsxs("div",{className:je("filter-input input-group",{"has-error":!this.isValid(l)}),children:[r.jsx("span",{className:"input-group-addon",children:r.jsx("i",{className:"fa fa-fw fa-"+e,style:{color:s}})}),r.jsx("input",{type:"text",ref:this.inputRef,placeholder:i,className:"form-control",value:l,onChange:this.onChange,onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown}),(n||o)&&r.jsxs("div",{className:"popover bottom",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[r.jsx("div",{className:"arrow"}),r.jsx("div",{className:"popover-content",children:this.getDesc()})]})]})}}fl.title="Flow List";function fl(){const t=N.c(2);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=r.jsxs("div",{className:"menu-group",children:[r.jsxs("div",{className:"menu-content",children:[r.jsx(Qf,{}),r.jsx(Zf,{})]}),r.jsx("div",{className:"menu-legend",children:"Find"})]}),t[0]=e):e=t[0];let s;return t[1]===Symbol.for("react.memo_cache_sentinel")?(s=r.jsxs("div",{className:"main-menu",children:[e,r.jsxs("div",{className:"menu-group",children:[r.jsxs("div",{className:"menu-content",children:[r.jsx(Jf,{}),r.jsx(tu,{})]}),r.jsx("div",{className:"menu-legend",children:"Intercept"})]})]}),t[1]=s):s=t[1],s}function Jf(){const t=N.c(5),e=G(),i=F(Yf)||"";let l;t[0]!==e?(l=o=>e(Rs("intercept",o)),t[0]=e,t[1]=l):l=t[1];let n;return t[2]!==i||t[3]!==l?(n=r.jsx(zs,{value:i,placeholder:"Intercept",icon:is.INTERCEPT,color:"hsl(208, 56%, 53%)",onChange:l}),t[2]=i,t[3]=l,t[4]=n):n=t[4],n}function Yf(t){return t.options.intercept}function Qf(){const t=N.c(5),e=G(),s=F(Xf);let i;t[0]!==e?(i=n=>e(Mi(n)),t[0]=e,t[1]=i):i=t[1];let l;return t[2]!==i||t[3]!==s?(l=r.jsx(zs,{value:s,placeholder:"Search",icon:is.SEARCH,color:"black",onChange:i}),t[2]=i,t[3]=s,t[4]=l):l=t[4],l}function Xf(t){return t.ui.filter[xe.Search]}function Zf(){const t=N.c(5),e=G(),s=F(eu);let i;t[0]!==e?(i=n=>e(Pi(n)),t[0]=e,t[1]=i):i=t[1];let l;return t[2]!==i||t[3]!==s?(l=r.jsx(zs,{value:s,placeholder:"Highlight",icon:is.HIGHLIGHT,color:"hsl(48, 100%, 50%)",onChange:i}),t[2]=i,t[3]=s,t[4]=l):l=t[4],l}function eu(t){return t.ui.filter[xe.Highlight]}function tu(){const t=N.c(2),e=G();let s;return t[0]!==e?(s=r.jsx(pe,{className:"btn-sm",title:"[a]ccept all",icon:"fa-forward text-success",onClick:()=>e(Oi()),children:"Resume All"}),t[0]=e,t[1]=s):s=t[1],s}function Gs(t){const e=N.c(6),{value:s,onChange:i,children:l}=t;let n;e[0]!==i||e[1]!==s?(n=r.jsx("input",{type:"checkbox",checked:s,onChange:i}),e[0]=i,e[1]=s,e[2]=n):n=e[2];let o;return e[3]!==l||e[4]!==n?(o=r.jsx("div",{className:"menu-entry",children:r.jsxs("label",{children:[n,l]})}),e[3]=l,e[4]=n,e[5]=o):o=e[5],o}function hs(t){const e=N.c(10),{name:s,children:i}=t,l=G();let n;e[0]!==s?(n=h=>h.options[s],e[0]=s,e[1]=n):n=e[1];const o=F(n),a=!!o;let d;e[2]!==l||e[3]!==s||e[4]!==o?(d=()=>l(Rs(s,!o)),e[2]=l,e[3]=s,e[4]=o,e[5]=d):d=e[5];let f;return e[6]!==i||e[7]!==a||e[8]!==d?(f=r.jsx(Gs,{value:a,onChange:d,children:i}),e[6]=i,e[7]=a,e[8]=d,e[9]=f):f=e[9],f}function su(){const t=N.c(5),e=G(),s=F(nu);let i;t[0]!==e?(i=()=>e(Qt()),t[0]=e,t[1]=i):i=t[1];let l;return t[2]!==i||t[3]!==s?(l=r.jsx(Gs,{value:s,onChange:i,children:"Display Event Log"}),t[2]=i,t[3]=s,t[4]=l):l=t[4],l}function nu(t){return t.eventLog.visible}function iu(){const t=N.c(5),e=G(),s=F(ru);let i;t[0]!==e?(i=()=>e(sr()),t[0]=e,t[1]=i):i=t[1];let l;return t[2]!==i||t[3]!==s?(l=r.jsx(Gs,{value:s,onChange:i,children:"Display Command Bar"}),t[2]=i,t[3]=s,t[4]=l):l=t[4],l}function ru(t){return t.commandBar.visible}function ms(t){const e=N.c(5),{children:s,resource:i}=t,l=`https://docs.mitmproxy.org/stable/${i}`;let n;e[0]!==s?(n=s||r.jsx("i",{className:"fa fa-question-circle"}),e[0]=s,e[1]=n):n=e[1];let o;return e[2]!==n||e[3]!==l?(o=r.jsx("a",{target:"_blank",href:l,rel:"noreferrer",children:n}),e[2]=n,e[3]=l,e[4]=o):o=e[4],o}ul.title="Options";function ul(){const t=N.c(16),e=G(),s=lu;let i;t[0]!==e?(i=()=>e(s()),t[0]=e,t[1]=i):i=t[1];let l;t[2]===Symbol.for("react.memo_cache_sentinel")?(l=r.jsx("sup",{children:"alpha"}),t[2]=l):l=t[2];let n;t[3]!==i?(n=r.jsx("div",{className:"menu-content",children:r.jsxs(pe,{title:"Open Options",icon:"fa-cogs text-primary",onClick:i,children:["Edit Options ",l]})}),t[3]=i,t[4]=n):n=t[4];let o;t[5]===Symbol.for("react.memo_cache_sentinel")?(o=r.jsx("div",{className:"menu-legend",children:"Options Editor"}),t[5]=o):o=t[5];let a;t[6]!==n?(a=r.jsxs("div",{className:"menu-group",children:[n,o]}),t[6]=n,t[7]=a):a=t[7];let d;t[8]===Symbol.for("react.memo_cache_sentinel")?(d=r.jsxs(hs,{name:"anticache",children:["Strip cache headers"," ",r.jsx(ms,{resource:"overview/features/#anticache"})]}),t[8]=d):d=t[8];let f;t[9]===Symbol.for("react.memo_cache_sentinel")?(f=r.jsxs(hs,{name:"showhost",children:["Use host header for display"," ",r.jsx(ms,{resource:"concepts/options/#showhost"})]}),t[9]=f):f=t[9];let h;t[10]===Symbol.for("react.memo_cache_sentinel")?(h=r.jsxs("div",{className:"menu-group",children:[r.jsxs("div",{className:"menu-content",children:[d,f,r.jsxs(hs,{name:"ssl_insecure",children:["Don't verify server certificates"," ",r.jsx(ms,{resource:"concepts/options/#ssl_insecure"})]})]}),r.jsx("div",{className:"menu-legend",children:"Quick Options"})]}),t[10]=h):h=t[10];let p;t[11]!==a?(p=r.jsxs(vt,{children:[a,h]}),t[11]=a,t[12]=p):p=t[12];let g;t[13]===Symbol.for("react.memo_cache_sentinel")?(g=r.jsxs("div",{className:"menu-group",children:[r.jsxs("div",{className:"menu-content",children:[r.jsx(su,{}),r.jsx(iu,{})]}),r.jsx("div",{className:"menu-legend",children:"View Options"})]}),t[13]=g):g=t[13];let x;return t[14]!==p?(x=r.jsxs("div",{children:[p,g]}),t[14]=p,t[15]=x):x=t[15],x}function lu(){return bc("OptionModal")}const wt=async(t,e)=>{const s=(async()=>{const i=await zt("export",e,`@${t.id}`);if(i.value)return i.value;throw i.error?i.error:i})();try{await bi(s)}catch(i){alert(i)}};pl.title="Flow";function pl(){const t=N.c(63),e=G(),s=F(ou),i=s[0];let l;t[0]!==s?(l=s.some($s),t[0]=s,t[1]=l):l=t[1];const n=l;if(s.length===0){let X;return t[2]===Symbol.for("react.memo_cache_sentinel")?(X=r.jsx("div",{}),t[2]=X):X=t[2],X}let o;t[3]!==e||t[4]!==s?(o=()=>e(ks(s)),t[3]=e,t[4]=s,t[5]=o):o=t[5];let a;t[6]!==s?(a=s.some(Ss),t[6]=s,t[7]=a):a=t[7];const d=!a;let f;t[8]!==o||t[9]!==d?(f=r.jsx(pe,{title:"[r]eplay flow",icon:"fa-repeat text-primary",onClick:o,disabled:d,children:"Replay"}),t[8]=o,t[9]=d,t[10]=f):f=t[10];let h;t[11]!==e||t[12]!==s?(h=r.jsx(pe,{title:"[D]uplicate flow",icon:"fa-copy text-info",onClick:()=>e(Vi(s)),children:"Duplicate"}),t[11]=e,t[12]=s,t[13]=h):h=t[13];let p;t[14]!==s?(p=s.some(Ei),t[14]=s,t[15]=p):p=t[15];const g=!p;let x;t[16]!==e||t[17]!==s?(x=()=>e(Ui(s)),t[16]=e,t[17]=s,t[18]=x):x=t[18];let v;t[19]!==g||t[20]!==x?(v=r.jsx(pe,{disabled:g,title:"revert changes to flow [V]",icon:"fa-history text-warning",onClick:x,children:"Revert"}),t[19]=g,t[20]=x,t[21]=v):v=t[21];let _;t[22]!==e||t[23]!==s?(_=r.jsx(pe,{title:"[d]elete flow",icon:"fa-trash text-danger",onClick:()=>{e(Hi(s))},children:"Delete"}),t[22]=e,t[23]=s,t[24]=_):_=t[24];let b;t[25]!==s?(b=r.jsx(gu,{flows:s}),t[25]=s,t[26]=b):b=t[26];let w;t[27]!==_||t[28]!==b||t[29]!==f||t[30]!==h||t[31]!==v?(w=r.jsxs("div",{className:"menu-content",children:[f,h,v,_,b]}),t[27]=_,t[28]=b,t[29]=f,t[30]=h,t[31]=v,t[32]=w):w=t[32];let C;t[33]===Symbol.for("react.memo_cache_sentinel")?(C=r.jsx("div",{className:"menu-legend",children:"Flow Modification"}),t[33]=C):C=t[33];let k;t[34]!==w?(k=r.jsx(vt,{children:r.jsxs("div",{className:"menu-group",children:[w,C]})}),t[34]=w,t[35]=k):k=t[35];let T;t[36]!==i?(T=r.jsxs("div",{className:"menu-content",children:[r.jsx(cu,{flow:i}),r.jsx(uu,{flow:i})]}),t[36]=i,t[37]=T):T=t[37];let M;t[38]===Symbol.for("react.memo_cache_sentinel")?(M=r.jsx("div",{className:"menu-legend",children:"Export"}),t[38]=M):M=t[38];let I;t[39]!==T?(I=r.jsxs("div",{className:"menu-group",children:[T,M]}),t[39]=T,t[40]=I):I=t[40];const P=!n;let O;t[41]!==e||t[42]!==s?(O=()=>e(Cs(s)),t[41]=e,t[42]=s,t[43]=O):O=t[43];let U;t[44]!==P||t[45]!==O?(U=r.jsx(pe,{disabled:P,title:"[a]ccept intercepted flow",icon:"fa-play text-success",onClick:O,children:"Resume"}),t[44]=P,t[45]=O,t[46]=U):U=t[46];const V=!n;let W;t[47]!==e||t[48]!==s?(W=()=>e(qi(s)),t[47]=e,t[48]=s,t[49]=W):W=t[49];let Y;t[50]!==V||t[51]!==W?(Y=r.jsx(pe,{disabled:V,title:"kill intercepted flow [x]",icon:"fa-times text-danger",onClick:W,children:"Abort"}),t[50]=V,t[51]=W,t[52]=Y):Y=t[52];let z;t[53]!==U||t[54]!==Y?(z=r.jsxs("div",{className:"menu-content",children:[U,Y]}),t[53]=U,t[54]=Y,t[55]=z):z=t[55];let te;t[56]===Symbol.for("react.memo_cache_sentinel")?(te=r.jsx("div",{className:"menu-legend",children:"Interception"}),t[56]=te):te=t[56];let J;t[57]!==z?(J=r.jsx(vt,{children:r.jsxs("div",{className:"menu-group",children:[z,te]})}),t[57]=z,t[58]=J):J=t[58];let Q;return t[59]!==k||t[60]!==I||t[61]!==J?(Q=r.jsxs("div",{className:"flow-menu",children:[k,I,J]}),t[59]=k,t[60]=I,t[61]=J,t[62]=Q):Q=t[62],Q}function ou(t){return t.flows.selected}const Ut=t=>{const e=window.open(t,"_blank","noopener,noreferrer");e&&(e.opener=null)};function cu(t){const e=N.c(24),{flow:s}=t,i=F(fu);if(s.type!=="http"){let l;return e[0]===Symbol.for("react.memo_cache_sentinel")?(l=r.jsx(pe,{icon:"fa-download",onClick:du,disabled:!0,children:"Download"}),e[0]=l):l=e[0],l}if(s.request.contentLength&&!s.response?.contentLength){let l;e[1]!==s?(l=()=>Ut(be.getContentURL(s,s.request)),e[1]=s,e[2]=l):l=e[2];const n=!i;let o;return e[3]!==l||e[4]!==n?(o=r.jsx(pe,{icon:"fa-download",onClick:l,disabled:n,children:"Download"}),e[3]=l,e[4]=n,e[5]=o):o=e[5],o}if(s.response){const l=s.response;if(!s.request.contentLength&&s.response.contentLength){let n;e[6]!==s||e[7]!==l?(n=()=>Ut(be.getContentURL(s,l)),e[6]=s,e[7]=l,e[8]=n):n=e[8];const o=!i;let a;return e[9]!==n||e[10]!==o?(a=r.jsx(pe,{icon:"fa-download",onClick:n,disabled:o,children:"Download"}),e[9]=n,e[10]=o,e[11]=a):a=e[11],a}if(s.request.contentLength&&s.response.contentLength){const n=!i;let o;e[12]!==n?(o=r.jsx(pe,{icon:"fa-download",onClick:au,disabled:n,children:"Download▾"}),e[12]=n,e[13]=o):o=e[13];let a;e[14]===Symbol.for("react.memo_cache_sentinel")?(a={placement:"bottom-start"},e[14]=a):a=e[14];let d;e[15]!==s?(d=r.jsx(ke,{onClick:()=>Ut(be.getContentURL(s,s.request)),children:"Download request"}),e[15]=s,e[16]=d):d=e[16];let f;e[17]!==s||e[18]!==l?(f=r.jsx(ke,{onClick:()=>Ut(be.getContentURL(s,l)),children:"Download response"}),e[17]=s,e[18]=l,e[19]=f):f=e[19];let h;return e[20]!==o||e[21]!==d||e[22]!==f?(h=r.jsxs(Lt,{text:o,options:a,children:[d,f]}),e[20]=o,e[21]=d,e[22]=f,e[23]=h):h=e[23],h}}return null}function au(){return 1}function du(){return 0}function fu(t){return t.flows.selected.length===1}function uu(t){const e=N.c(20),{flow:s}=t,i=F(hu),l=s.type!=="http"||!i;let n;e[0]!==l?(n=r.jsx(pe,{title:"Export flow.",icon:"fa-clone",onClick:pu,disabled:l,children:"Export▾"}),e[0]=l,e[1]=n):n=e[1];let o;e[2]===Symbol.for("react.memo_cache_sentinel")?(o={placement:"bottom-start"},e[2]=o):o=e[2];let a;e[3]!==s?(a=r.jsx(ke,{onClick:()=>wt(s,"raw_request"),children:"Copy raw request"}),e[3]=s,e[4]=a):a=e[4];let d;e[5]!==s?(d=r.jsx(ke,{onClick:()=>wt(s,"raw_response"),children:"Copy raw response"}),e[5]=s,e[6]=d):d=e[6];let f;e[7]!==s?(f=r.jsx(ke,{onClick:()=>wt(s,"raw"),children:"Copy raw request and response"}),e[7]=s,e[8]=f):f=e[8];let h;e[9]!==s?(h=r.jsx(ke,{onClick:()=>wt(s,"curl"),children:"Copy as cURL"}),e[9]=s,e[10]=h):h=e[10];let p;e[11]!==s?(p=r.jsx(ke,{onClick:()=>wt(s,"httpie"),children:"Copy as HTTPie"}),e[11]=s,e[12]=p):p=e[12];let g;return e[13]!==n||e[14]!==a||e[15]!==d||e[16]!==f||e[17]!==h||e[18]!==p?(g=r.jsxs(Lt,{className:"",text:n,options:o,children:[a,d,f,h,p]}),e[13]=n,e[14]=a,e[15]=d,e[16]=f,e[17]=h,e[18]=p,e[19]=g):g=e[19],g}function pu(){return 1}function hu(t){return t.flows.selected.length===1}const mu={":red_circle:":"🔴",":orange_circle:":"🟠",":yellow_circle:":"🟡",":green_circle:":"🟢",":large_blue_circle:":"🔵",":purple_circle:":"🟣",":brown_circle:":"🟤"};function gu(t){const e=N.c(5),{flows:s}=t,i=G();let l,n;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=r.jsx(pe,{title:"mark flow",icon:"fa-paint-brush text-success",onClick:xu,children:"Mark▾"}),n={placement:"bottom-start"},e[0]=l,e[1]=n):(l=e[0],n=e[1]);let o;return e[2]!==i||e[3]!==s?(o=r.jsxs(Lt,{className:"",text:l,options:n,children:[r.jsx(ke,{onClick:()=>i(Xn(s,"")),children:"⚪ (no marker)"}),Object.entries(mu).map(a=>{const[d,f]=a;return r.jsxs(ke,{onClick:()=>i(Xn(s,d)),children:[f," ",d.replace(/[:_]/g," ")]},d)})]}),e[2]=i,e[3]=s,e[4]=o):o=e[4],o}function xu(){return 1}const pi={[ve.Capture]:dl,[ve.FlowList]:fl,[ve.Options]:ul,[ve.Flow]:pl};function vu(){const t=N.c(26),e=G(),s=F(ju),i=F(_u),[l,n]=A.useState(!1);let o;t[0]!==i.length?(o=[ve.Capture,ve.FlowList,ve.Options],i.length>0&&o.push(ve.Flow),t[0]=i.length,t[1]=o):o=t[1];let a;t[2]!==s||t[3]!==e||t[4]!==i.length||t[5]!==l?(a=()=>{i.length>0&&!l?(e(Wt(ve.Flow)),n(!0)):i.length===0&&(l&&n(!1),s===ve.Flow&&e(Wt(ve.FlowList)))},t[2]=s,t[3]=e,t[4]=i.length,t[5]=l,t[6]=a):a=t[6];let d;t[7]!==s||t[8]!==i||t[9]!==l?(d=[i,l,s],t[7]=s,t[8]=i,t[9]=l,t[10]=d):d=t[10],A.useEffect(a,d);let f;t[11]!==e?(f=function(k,T){T.preventDefault(),e(Wt(k))},t[11]=e,t[12]=f):f=t[12];const h=f,p=pi[s];let g;t[13]===Symbol.for("react.memo_cache_sentinel")?(g=r.jsx(Vf,{}),t[13]=g):g=t[13];let x;t[14]!==s||t[15]!==o||t[16]!==h?(x=o.map(C=>r.jsx("a",{href:"#",className:je({active:C===s}),onClick:k=>h(C,k),children:pi[C].title},C)),t[14]=s,t[15]=o,t[16]=h,t[17]=x):x=t[17];let v;t[18]===Symbol.for("react.memo_cache_sentinel")?(v=r.jsx(vt,{children:r.jsx(Kf,{})}),t[18]=v):v=t[18];let _;t[19]!==x?(_=r.jsxs("nav",{className:"nav-tabs nav-tabs-lg",children:[g,x,v]}),t[19]=x,t[20]=_):_=t[20];let b;t[21]!==p?(b=r.jsx("div",{children:r.jsx(p,{})}),t[21]=p,t[22]=b):b=t[22];let w;return t[23]!==_||t[24]!==b?(w=r.jsxs("header",{children:[_,b]}),t[23]=_,t[24]=b,t[25]=w):w=t[25],w}function _u(t){return t.flows.selected}function ju(t){return t.ui.tabs.current}const gs=function(){function t(i,l){function n(){this.constructor=i}n.prototype=l.prototype,i.prototype=new n}function e(i,l,n,o){this.message=i,this.expected=l,this.found=n,this.location=o,this.name="SyntaxError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,e)}t(e,Error);function s(i){var l=arguments.length>1?arguments[1]:{},n={},o={Expr:Le},a=Le,d=function(S,$){return[S,...$]},f=function(S){return[S]},h=function(){return""},p={type:"other",description:"string"},g='"',x={type:"literal",value:'"',description:'"\\""'},v=function(S){return S.join("")},_="'",b={type:"literal",value:"'",description:`"'"`},w=/^["\\]/,C={type:"class",value:'["\\\\]',description:'["\\\\]'},k={type:"any",description:"any character"},T=function(S){return S},M="\\",I={type:"literal",value:"\\",description:'"\\\\"'},P=/^['\\]/,O={type:"class",value:"['\\\\]",description:"['\\\\]"},U=/^['"\\]/,V={type:"class",value:`['"\\\\]`,description:`['"\\\\]`},W="n",Y={type:"literal",value:"n",description:'"n"'},z=function(){return`
`},te="r",J={type:"literal",value:"r",description:'"r"'},Q=function(){return"\r"},X="t",Z={type:"literal",value:"t",description:'"t"'},ae=function(){return"	"},oe={type:"other",description:"whitespace"},de=/^[ \t\n\r]/,ye={type:"class",value:"[ \\t\\n\\r]",description:"[ \\t\\n\\r]"},Me={type:"other",description:"control character"},Se=/^[|&!()~"]/,Ee={type:"class",value:'[|&!()~"]',description:'[|&!()~"]'},E=0,he=[{line:1,column:1,seenCR:!1}],B=0,le=[],q=0,$e;if("startRule"in l){if(!(l.startRule in o))throw new Error(`Can't start parsing from rule "`+l.startRule+'".');a=o[l.startRule]}function We(S){var $=he[S],R,H;if($)return $;for(R=S-1;!he[R];)R--;for($=he[R],$={line:$.line,column:$.column,seenCR:$.seenCR};R<S;)H=i.charAt(R),H===`
`?($.seenCR||$.line++,$.column=1,$.seenCR=!1):H==="\r"||H==="\u2028"||H==="\u2029"?($.line++,$.column=1,$.seenCR=!0):($.column++,$.seenCR=!1),R++;return he[S]=$,$}function Pe(S,$){var R=We(S),H=We($);return{start:{offset:S,line:R.line,column:R.column},end:{offset:$,line:H.line,column:H.column}}}function ee(S){E<B||(E>B&&(B=E,le=[]),le.push(S))}function Oe(S,$,R,H){function Rt(Ne){var Ae=1;for(Ne.sort(function(pt,Ke){return pt.description<Ke.description?-1:pt.description>Ke.description?1:0});Ae<Ne.length;)Ne[Ae-1]===Ne[Ae]?Ne.splice(Ae,1):Ae++}function ls(Ne,Ae){function pt(Ft){function ht(Fe){return Fe.charCodeAt(0).toString(16).toUpperCase()}return Ft.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(Fe){return"\\x0"+ht(Fe)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(Fe){return"\\x"+ht(Fe)}).replace(/[\u0100-\u0FFF]/g,function(Fe){return"\\u0"+ht(Fe)}).replace(/[\u1000-\uFFFF]/g,function(Fe){return"\\u"+ht(Fe)})}var Ke=new Array(Ne.length),_t,At,it;for(it=0;it<Ne.length;it++)Ke[it]=Ne[it].description;return _t=Ne.length>1?Ke.slice(0,-1).join(", ")+" or "+Ke[Ne.length-1]:Ke[0],At=Ae?'"'+pt(Ae)+'"':"end of input","Expected "+_t+" but "+At+" found."}return $!==null&&Rt($),new e(ls($,R),$,R,H)}function Le(){var S,$,R,H;if(S=E,$=re(),$!==n){if(R=[],H=Ye(),H!==n)for(;H!==n;)R.push(H),H=Ye();else R=n;R!==n?(H=Le(),H!==n?($=d($,H),S=$):(E=S,S=n)):(E=S,S=n)}else E=S,S=n;if(S===n&&(S=E,$=re(),$!==n&&($=f($)),S=$,S===n)){for(S=E,$=[],R=Ye();R!==n;)$.push(R),R=Ye();$!==n&&($=h()),S=$}return S}function re(){var S,$,R,H;if(q++,S=E,i.charCodeAt(E)===34?($=g,E++):($=n,q===0&&ee(x)),$!==n){for(R=[],H=fe();H!==n;)R.push(H),H=fe();R!==n?(i.charCodeAt(E)===34?(H=g,E++):(H=n,q===0&&ee(x)),H!==n?($=v(R),S=$):(E=S,S=n)):(E=S,S=n)}else E=S,S=n;if(S===n){if(S=E,i.charCodeAt(E)===39?($=_,E++):($=n,q===0&&ee(b)),$!==n){for(R=[],H=ge();H!==n;)R.push(H),H=ge();R!==n?(i.charCodeAt(E)===39?(H=_,E++):(H=n,q===0&&ee(b)),H!==n?($=v(R),S=$):(E=S,S=n)):(E=S,S=n)}else E=S,S=n;if(S===n){if(S=E,$=E,q++,R=rs(),q--,R===n?$=void 0:(E=$,$=n),$!==n){if(R=[],H=Re(),H!==n)for(;H!==n;)R.push(H),H=Re();else R=n;R!==n?($=v(R),S=$):(E=S,S=n)}else E=S,S=n;if(S===n){if(S=E,i.charCodeAt(E)===34?($=g,E++):($=n,q===0&&ee(x)),$!==n){for(R=[],H=fe();H!==n;)R.push(H),H=fe();R!==n?($=v(R),S=$):(E=S,S=n)}else E=S,S=n;if(S===n)if(S=E,i.charCodeAt(E)===39?($=_,E++):($=n,q===0&&ee(b)),$!==n){for(R=[],H=ge();H!==n;)R.push(H),H=ge();R!==n?($=v(R),S=$):(E=S,S=n)}else E=S,S=n}}}return q--,S===n&&($=n,q===0&&ee(p)),S}function fe(){var S,$,R;return S=E,$=E,q++,w.test(i.charAt(E))?(R=i.charAt(E),E++):(R=n,q===0&&ee(C)),q--,R===n?$=void 0:(E=$,$=n),$!==n?(i.length>E?(R=i.charAt(E),E++):(R=n,q===0&&ee(k)),R!==n?($=T(R),S=$):(E=S,S=n)):(E=S,S=n),S===n&&(S=E,i.charCodeAt(E)===92?($=M,E++):($=n,q===0&&ee(I)),$!==n?(R=nt(),R!==n?($=T(R),S=$):(E=S,S=n)):(E=S,S=n)),S}function ge(){var S,$,R;return S=E,$=E,q++,P.test(i.charAt(E))?(R=i.charAt(E),E++):(R=n,q===0&&ee(O)),q--,R===n?$=void 0:(E=$,$=n),$!==n?(i.length>E?(R=i.charAt(E),E++):(R=n,q===0&&ee(k)),R!==n?($=T(R),S=$):(E=S,S=n)):(E=S,S=n),S===n&&(S=E,i.charCodeAt(E)===92?($=M,E++):($=n,q===0&&ee(I)),$!==n?(R=nt(),R!==n?($=T(R),S=$):(E=S,S=n)):(E=S,S=n)),S}function Re(){var S,$,R;return S=E,$=E,q++,R=Ye(),q--,R===n?$=void 0:(E=$,$=n),$!==n?(i.length>E?(R=i.charAt(E),E++):(R=n,q===0&&ee(k)),R!==n?($=T(R),S=$):(E=S,S=n)):(E=S,S=n),S}function nt(){var S,$;return U.test(i.charAt(E))?(S=i.charAt(E),E++):(S=n,q===0&&ee(V)),S===n&&(S=E,i.charCodeAt(E)===110?($=W,E++):($=n,q===0&&ee(Y)),$!==n&&($=z()),S=$,S===n&&(S=E,i.charCodeAt(E)===114?($=te,E++):($=n,q===0&&ee(J)),$!==n&&($=Q()),S=$,S===n&&(S=E,i.charCodeAt(E)===116?($=X,E++):($=n,q===0&&ee(Z)),$!==n&&($=ae()),S=$))),S}function Ye(){var S;return q++,de.test(i.charAt(E))?(S=i.charAt(E),E++):(S=n,q===0&&ee(ye)),q--,S===n&&q===0&&ee(oe),S}function rs(){var S;return q++,Se.test(i.charAt(E))?(S=i.charAt(E),E++):(S=n,q===0&&ee(Ee)),q--,S===n&&q===0&&ee(Me),S}if($e=a(),$e!==n&&E===i.length)return $e;throw $e!==n&&E<i.length&&ee({type:"end",description:"end of input"}),Oe(null,le,B<i.length?i.charAt(B):null,B<i.length?Pe(B,B+1):Pe(B,B))}return{SyntaxError:e,parse:s}}();function xs(t,e=""){if(!t)return[];const s=[];for(const i of Object.keys(t))i.startsWith(e)&&s.push(i);return s}function yu(t){const e=N.c(6),{results:s}=t,i=A.useRef(null);let l,n;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=()=>{i&&i.current.addEventListener("DOMNodeInserted",wu)},n=[],e[0]=l,e[1]=n):(l=e[0],n=e[1]),A.useEffect(l,n);let o;e[2]!==s?(o=s.map(bu),e[2]=s,e[3]=o):o=e[3];let a;return e[4]!==o?(a=r.jsx("div",{className:"command-result",ref:i,children:o}),e[4]=o,e[5]=a):a=e[5],a}function bu(t,e){return r.jsxs("div",{children:[r.jsx("div",{children:r.jsxs("strong",{children:["$ ",t.command]})}),t.result]},e)}function wu(t){const e=t.currentTarget;e.scroll({top:e.scrollHeight,behavior:"auto"})}function Su(t){const e=N.c(20),{nextArgs:s,currentArg:i,help:l,description:n,availableCommands:o}=t;let a;if(e[0]!==i||e[1]!==s){a=[];for(let b=0;b<s.length;b++){if(b==i){a.push(r.jsx("mark",{children:s[b]},b));continue}a.push(r.jsxs("span",{children:[s[b]," "]},b))}e[0]=i,e[1]=s,e[2]=a}else a=e[2];let d;e[3]===Symbol.for("react.memo_cache_sentinel")?(d=r.jsx("div",{className:"arrow"}),e[3]=d):d=e[3];let f;e[4]!==a?(f=a.length>0&&r.jsxs("div",{children:[r.jsx("strong",{children:"Argument suggestion:"})," ",a]}),e[4]=a,e[5]=f):f=e[5];let h;e[6]!==l?(h=l?.includes("->")&&r.jsxs("div",{children:[r.jsx("strong",{children:"Signature help: "}),l]}),e[6]=l,e[7]=h):h=e[7];let p;e[8]!==n?(p=n&&r.jsxs("div",{children:["# ",n]}),e[8]=n,e[9]=p):p=e[9];let g;e[10]===Symbol.for("react.memo_cache_sentinel")?(g=r.jsx("strong",{children:"Available Commands: "}),e[10]=g):g=e[10];let x;e[11]!==o?(x=JSON.stringify(o),e[11]=o,e[12]=x):x=e[12];let v;e[13]!==x?(v=r.jsxs("div",{children:[g,r.jsx("p",{className:"available-commands",children:x})]}),e[13]=x,e[14]=v):v=e[14];let _;return e[15]!==f||e[16]!==h||e[17]!==p||e[18]!==v?(_=r.jsxs("div",{className:"argument-suggestion popover top",children:[d,r.jsxs("div",{className:"popover-content",children:[f,h,p,v]})]}),e[15]=f,e[16]=h,e[17]=p,e[18]=v,e[19]=_):_=e[19],_}function $u(){const t=N.c(45),[e,s]=A.useState(""),[i,l]=A.useState(""),[n,o]=A.useState(0);let a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a=[],t[0]=a):a=t[0];const[d,f]=A.useState(a);let h;t[1]===Symbol.for("react.memo_cache_sentinel")?(h=[],t[1]=h):h=t[1];const[p,g]=A.useState(h);let x;t[2]===Symbol.for("react.memo_cache_sentinel")?(x={},t[2]=x):x=t[2];const[v,_]=A.useState(x);let b;t[3]===Symbol.for("react.memo_cache_sentinel")?(b=[],t[3]=b):b=t[3];const[w,C]=A.useState(b),[k,T]=A.useState(0),[M,I]=A.useState(""),[P,O]=A.useState("");let U;t[4]===Symbol.for("react.memo_cache_sentinel")?(U=[],t[4]=U):U=t[4];const[V,W]=A.useState(U);let Y;t[5]===Symbol.for("react.memo_cache_sentinel")?(Y=[],t[5]=Y):Y=t[5];const[z,te]=A.useState(Y),[J,Q]=A.useState(void 0);let X,Z;t[6]===Symbol.for("react.memo_cache_sentinel")?(X=()=>{se("/commands",{method:"GET"}).then(Lu).then(re=>{_(re),f(xs(re)),g(Object.keys(re))}).catch(Tu)},Z=[],t[6]=X,t[7]=Z):(X=t[6],Z=t[7]),A.useEffect(X,Z);let ae,oe;t[8]===Symbol.for("react.memo_cache_sentinel")?(ae=()=>{zt("commands.history.get").then(re=>{te(re.value)}).catch(Eu)},oe=[],t[8]=ae,t[9]=oe):(ae=t[8],oe=t[9]),A.useEffect(ae,oe);let de;t[10]!==v?(de=(re,fe)=>{const ge=gs.parse(fe),Re=gs.parse(re);I(v[ge[0]]?.signature_help),O(v[ge[0]]?.help||""),f(xs(v,Re[0])),g(xs(v,ge[0]));const nt=v[ge[0]]?.parameters.map(ku);nt&&(C([ge[0],...nt]),T(ge.length-1))},t[10]=v,t[11]=de):de=t[11];const ye=de;let Me;t[12]===Symbol.for("react.memo_cache_sentinel")?(Me=re=>{s(re.target.value),l(re.target.value),o(0)},t[12]=Me):Me=t[12];const Se=Me;let Ee;t[13]!==p||t[14]!==d||t[15]!==n||t[16]!==J||t[17]!==z||t[18]!==e||t[19]!==V?(Ee=re=>{if(re.key==="Enter"){const[fe,...ge]=gs.parse(e);te([...z,e]),zt("commands.history.add",e).catch(Cu),se.post(`/commands/${fe}`,{arguments:ge}).then(Nu).then(Re=>{Q(void 0),C([]),W([...V,{command:e,result:JSON.stringify(Re.value||Re.error)}])}).catch(Re=>{Q(void 0),C([]),W([...V,{command:e,result:Re.toString()}])}),I(""),O(""),s(""),l(""),o(0),f(p)}if(re.key==="ArrowUp"){let fe;J===void 0?fe=z.length-1:fe=Math.max(0,J-1),s(z[fe]),l(z[fe]),Q(fe)}if(re.key==="ArrowDown"){if(J===void 0)return;if(J==z.length-1)s(""),l(""),Q(void 0);else{const fe=J+1;s(z[fe]),l(z[fe]),Q(fe)}}re.key==="Tab"&&(s(d[n]),o((n+1)%d.length),re.preventDefault()),re.stopPropagation()},t[13]=p,t[14]=d,t[15]=n,t[16]=J,t[17]=z,t[18]=e,t[19]=V,t[20]=Ee):Ee=t[20];const E=Ee;let he;t[21]!==v||t[22]!==e||t[23]!==i||t[24]!==ye?(he=re=>{if(!e){g(Object.keys(v));return}ye(i,e),re.stopPropagation()},t[21]=v,t[22]=e,t[23]=i,t[24]=ye,t[25]=he):he=t[25];const B=he;let le;t[26]===Symbol.for("react.memo_cache_sentinel")?(le=r.jsx("div",{className:"command-title",children:"Command Result"}),t[26]=le):le=t[26];let q;t[27]!==V?(q=r.jsx(yu,{results:V}),t[27]=V,t[28]=q):q=t[28];let $e;t[29]!==p||t[30]!==k||t[31]!==P||t[32]!==w||t[33]!==M?($e=r.jsx(Su,{nextArgs:w,currentArg:k,help:M,description:P,availableCommands:p}),t[29]=p,t[30]=k,t[31]=P,t[32]=w,t[33]=M,t[34]=$e):$e=t[34];let We;t[35]===Symbol.for("react.memo_cache_sentinel")?(We=je("command-input input-group"),t[35]=We):We=t[35];let Pe;t[36]===Symbol.for("react.memo_cache_sentinel")?(Pe=r.jsx("span",{className:"input-group-addon",children:r.jsx("i",{className:"fa fa-fw fa-terminal"})}),t[36]=Pe):Pe=t[36];const ee=e||"";let Oe;t[37]!==E||t[38]!==B||t[39]!==ee?(Oe=r.jsxs("div",{className:We,children:[Pe,r.jsx("input",{type:"text",placeholder:"Enter command",className:"form-control",value:ee,onChange:Se,onKeyDown:E,onKeyUp:B})]}),t[37]=E,t[38]=B,t[39]=ee,t[40]=Oe):Oe=t[40];let Le;return t[41]!==q||t[42]!==$e||t[43]!==Oe?(Le=r.jsxs("div",{className:"command",children:[le,q,$e,Oe]}),t[41]=q,t[42]=$e,t[43]=Oe,t[44]=Le):Le=t[44],Le}function Nu(t){return t.json()}function Cu(){return 0}function ku(t){return t.name}function Eu(t){return console.error(t)}function Tu(t){return console.error(t)}function Lu(t){return t.json()}function Ru(t){const e=N.c(7),{checked:s,onToggle:i,text:l}=t,n="btn btn-toggle "+(s?"btn-primary":"btn-default"),o="fa fa-fw "+(s?"fa-check-square-o":"fa-square-o");let a;e[0]!==o?(a=r.jsx("i",{className:o}),e[0]=o,e[1]=a):a=e[1];let d;return e[2]!==i||e[3]!==n||e[4]!==a||e[5]!==l?(d=r.jsxs("div",{className:n,onClick:i,children:[a," ",l]}),e[2]=i,e[3]=n,e[4]=a,e[5]=l,e[6]=d):d=e[6],d}class Au extends A.Component{static defaultProps={rowHeight:18};heights;viewport=Te.createRef();constructor(e){super(e),this.heights={},this.state={vScroll:Tt()},this.onViewportUpdate=this.onViewportUpdate.bind(this)}componentDidMount(){window.addEventListener("resize",this.onViewportUpdate),this.onViewportUpdate()}componentWillUnmount(){window.removeEventListener("resize",this.onViewportUpdate)}getSnapshotBeforeUpdate(){return Ds(this.viewport)}componentDidUpdate(e,s,i){i&&cl(this.viewport),this.onViewportUpdate()}onViewportUpdate(){const e=this.viewport.current,s=Tt({itemCount:this.props.events.length,rowHeight:this.props.rowHeight,viewportTop:e.scrollTop,viewportHeight:e.offsetHeight,itemHeights:this.props.events.map(i=>this.heights[i.id])});Jt(this.state.vScroll,s)||this.setState({vScroll:s})}setHeight(e,s){if(s&&!this.heights[e]){const i=s.offsetHeight;this.heights[e]!==i&&(this.heights[e]=i,this.onViewportUpdate())}}render(){const{vScroll:e}=this.state,{events:s}=this.props;return r.jsxs("pre",{ref:this.viewport,onScroll:this.onViewportUpdate,children:[r.jsx("div",{style:{height:e.paddingTop}}),s.slice(e.start,e.end).map(i=>r.jsxs("div",{ref:l=>{this.setHeight(i.id,l)},children:[r.jsx(Fu,{event:i}),i.message]},i.id)),r.jsx("div",{style:{height:e.paddingBottom}})]})}}function Fu(t){const e=N.c(4),{event:s}=t;let i;e[0]!==s.level?(i={web:"html5",debug:"bug",warn:"exclamation-triangle",error:"ban"}[s.level]||"info",e[0]=s.level,e[1]=i):i=e[1];const n=`fa fa-fw fa-${i}`;let o;return e[2]!==n?(o=r.jsx("i",{className:n}),e[2]=n,e[3]=o):o=e[3],o}class Du extends A.Component{static defaultProps={defaultHeight:200};dragStart;constructor(e,s){super(e,s),this.state={height:this.props.defaultHeight},this.onDragStart=this.onDragStart.bind(this),this.onDragMove=this.onDragMove.bind(this),this.onDragStop=this.onDragStop.bind(this)}onDragStart(e){e.preventDefault(),this.dragStart=this.state.height+e.pageY,window.addEventListener("mousemove",this.onDragMove),window.addEventListener("mouseup",this.onDragStop),window.addEventListener("dragend",this.onDragStop)}onDragMove(e){e.preventDefault(),this.setState({height:this.dragStart-e.pageY})}onDragStop(e){e.preventDefault(),window.removeEventListener("mousemove",this.onDragMove)}render(){const{height:e}=this.state,{filters:s,events:i,toggleFilter:l,close:n}=this.props;return r.jsxs("div",{className:"eventlog",style:{height:e},children:[r.jsxs("div",{onMouseDown:this.onDragStart,children:["Eventlog",r.jsxs("div",{className:"pull-right",children:[Object.values(er).map(o=>r.jsx(Ru,{text:o,checked:s[o],onToggle:()=>l(o)},o)),r.jsx("i",{onClick:n,className:"fa fa-close"})]})]}),r.jsx(Au,{events:i})]})}}const Iu=Yt(t=>({filters:t.eventLog.filters,events:t.eventLog.view}),{close:Qt,toggleFilter:Zi})(Du);function Mu(){const t=N.c(56),e=F(Hu),{mode:s,intercept:i,showhost:l,upstream_cert:n,rawtcp:o,http2:a,websocket:d,anticache:f,anticomp:h,stickyauth:p,stickycookie:g,stream_large_bodies:x,listen_host:v,listen_port:_,server:b,ssl_insecure:w}=F(qu),C=F(Ou),k=F(Pu);let T;t[0]!==s?(T=s&&(s.length!==1||s[0]!=="regular")&&r.jsx("span",{className:"label label-success",children:s.join(",")}),t[0]=s,t[1]=T):T=t[1];let M;t[2]!==i?(M=i&&r.jsxs("span",{className:"label label-success",children:["Intercept: ",i]}),t[2]=i,t[3]=M):M=t[3];let I;t[4]!==w?(I=w&&r.jsx("span",{className:"label label-danger",children:"ssl_insecure"}),t[4]=w,t[5]=I):I=t[5];let P;t[6]!==l?(P=l&&r.jsx("span",{className:"label label-success",children:"showhost"}),t[6]=l,t[7]=P):P=t[7];let O;t[8]!==n?(O=!n&&r.jsx("span",{className:"label label-success",children:"no-upstream-cert"}),t[8]=n,t[9]=O):O=t[9];let U;t[10]!==o?(U=!o&&r.jsx("span",{className:"label label-success",children:"no-raw-tcp"}),t[10]=o,t[11]=U):U=t[11];let V;t[12]!==a?(V=!a&&r.jsx("span",{className:"label label-success",children:"no-http2"}),t[12]=a,t[13]=V):V=t[13];let W;t[14]!==d?(W=!d&&r.jsx("span",{className:"label label-success",children:"no-websocket"}),t[14]=d,t[15]=W):W=t[15];let Y;t[16]!==f?(Y=f&&r.jsx("span",{className:"label label-success",children:"anticache"}),t[16]=f,t[17]=Y):Y=t[17];let z;t[18]!==h?(z=h&&r.jsx("span",{className:"label label-success",children:"anticomp"}),t[18]=h,t[19]=z):z=t[19];let te;t[20]!==p?(te=p&&r.jsxs("span",{className:"label label-success",children:["stickyauth: ",p]}),t[20]=p,t[21]=te):te=t[21];let J;t[22]!==g?(J=g&&r.jsxs("span",{className:"label label-success",children:["stickycookie: ",g]}),t[22]=g,t[23]=J):J=t[23];let Q;t[24]!==x?(Q=x&&r.jsxs("span",{className:"label label-success",children:["stream: ",ji(x)]}),t[24]=x,t[25]=Q):Q=t[25];let X;t[26]!==C||t[27]!==k?(X=k>0&&r.jsxs("span",{className:"label label-default",children:[C," of ",k," flows selected"]}),t[26]=C,t[27]=k,t[28]=X):X=t[28];let Z;t[29]!==v||t[30]!==_||t[31]!==b?(Z=b&&r.jsxs("span",{className:"label label-primary",title:"HTTP Proxy Server Address",children:[v||"*",":",_||8080]}),t[29]=v,t[30]=_,t[31]=b,t[32]=Z):Z=t[32];let ae;t[33]!==Z?(ae=r.jsx(vt,{children:Z}),t[33]=Z,t[34]=ae):ae=t[34];let oe;t[35]!==e?(oe=r.jsxs("span",{className:"label label-default",title:"Mitmproxy Version",children:["mitmproxy ",e]}),t[35]=e,t[36]=oe):oe=t[36];let de;t[37]!==ae||t[38]!==oe?(de=r.jsxs("div",{className:"pull-right",children:[ae,oe]}),t[37]=ae,t[38]=oe,t[39]=de):de=t[39];let ye;return t[40]!==T||t[41]!==M||t[42]!==te||t[43]!==J||t[44]!==Q||t[45]!==X||t[46]!==de||t[47]!==I||t[48]!==P||t[49]!==O||t[50]!==U||t[51]!==V||t[52]!==W||t[53]!==Y||t[54]!==z?(ye=r.jsxs("footer",{children:[T,M,I,P,O,U,V,W,Y,z,te,J,Q,X,de]}),t[40]=T,t[41]=M,t[42]=te,t[43]=J,t[44]=Q,t[45]=X,t[46]=de,t[47]=I,t[48]=P,t[49]=O,t[50]=U,t[51]=V,t[52]=W,t[53]=Y,t[54]=z,t[55]=ye):ye=t[55],ye}function Pu(t){return t.flows.list.length}function Ou(t){return t.flows.selected.length}function qu(t){return t.options}function Hu(t){return t.backendState.version}function Vu(t){const e=N.c(3),{children:s}=t;let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=r.jsx("div",{className:"modal-backdrop fade in"}),e[0]=i):i=e[0];let l;return e[1]!==s?(l=r.jsxs("div",{children:[i,r.jsx("div",{className:"modal modal-visible",id:"optionsModal",tabIndex:-1,role:"dialog","aria-labelledby":"options",children:r.jsx("div",{className:"modal-dialog modal-lg",role:"document",children:r.jsx("div",{className:"modal-content",children:s})})})]}),e[1]=s,e[2]=l):l=e[2],l}const Uu=t=>{t.key!=="Escape"&&t.stopPropagation()};function hl(t){const e=N.c(10);let s,i,l;e[0]!==t?({value:l,onChange:s,...i}=t,e[0]=t,e[1]=s,e[2]=i,e[3]=l):(s=e[1],i=e[2],l=e[3]);let n;e[4]!==s?(n=a=>s(a.target.checked),e[4]=s,e[5]=n):n=e[5];let o;return e[6]!==i||e[7]!==n||e[8]!==l?(o=r.jsx("div",{className:"checkbox",children:r.jsxs("label",{children:[r.jsx("input",{type:"checkbox",checked:l,onChange:n,...i}),"Enable"]})}),e[6]=i,e[7]=n,e[8]=l,e[9]=o):o=e[9],o}function hi(t){const e=N.c(10);let s,i,l;e[0]!==t?({value:l,onChange:s,...i}=t,e[0]=t,e[1]=s,e[2]=i,e[3]=l):(s=e[1],i=e[2],l=e[3]);const n=l||"";let o;e[4]!==s?(o=d=>s(d.target.value),e[4]=s,e[5]=o):o=e[5];let a;return e[6]!==i||e[7]!==n||e[8]!==o?(a=r.jsx("input",{type:"text",value:n,onChange:o,...i}),e[6]=i,e[7]=n,e[8]=o,e[9]=a):a=e[9],a}function mi(t){return function({onChange:s,...i}){return r.jsx(t,{onChange:l=>s(l||null),...i})}}function gi(t){const e=N.c(10);let s,i,l;e[0]!==t?({value:l,onChange:s,...i}=t,e[0]=t,e[1]=s,e[2]=i,e[3]=l):(s=e[1],i=e[2],l=e[3]);let n;e[4]!==s?(n=a=>s(parseInt(a.target.value)),e[4]=s,e[5]=n):n=e[5];let o;return e[6]!==i||e[7]!==n||e[8]!==l?(o=r.jsx("input",{type:"number",value:l,onChange:n,...i}),e[6]=i,e[7]=n,e[8]=l,e[9]=o):o=e[9],o}function Bu(t){const e=N.c(12);let s,i,l,n;if(e[0]!==t){const{value:d,onChange:f,choices:h,...p}=t;n=d,s=h,i=p,l=g=>f(g.target.value),e[0]=t,e[1]=s,e[2]=i,e[3]=l,e[4]=n}else s=e[1],i=e[2],l=e[3],n=e[4];let o;e[5]!==s?(o=s.map(Wu),e[5]=s,e[6]=o):o=e[6];let a;return e[7]!==i||e[8]!==l||e[9]!==o||e[10]!==n?(a=r.jsx("select",{onChange:l,value:n,...i,children:o}),e[7]=i,e[8]=l,e[9]=o,e[10]=n,e[11]=a):a=e[11],a}function Wu(t){return r.jsx("option",{value:t,children:t},t)}function Ku(t){const e=N.c(13);let s,i,l;e[0]!==t?({value:l,onChange:s,...i}=t,e[0]=t,e[1]=s,e[2]=i,e[3]=l):(s=e[1],i=e[2],l=e[3]);const n=Math.max(l.length,1);let o;e[4]!==l?(o=l.join(`
`),e[4]=l,e[5]=o):o=e[5];const[a,d]=Te.useState(o);let f;e[6]!==s?(f=g=>{const x=g.target.value;d(x),s(x.split(`
`).map(Gu).filter(zu))},e[6]=s,e[7]=f):f=e[7];const h=f;let p;return e[8]!==h||e[9]!==n||e[10]!==i||e[11]!==a?(p=r.jsx("textarea",{rows:n,value:a,onChange:h,...i}),e[8]=h,e[9]=n,e[10]=i,e[11]=a,e[12]=p):p=e[12],p}function zu(t){return t!==""}function Gu(t){return t.trim()}const Ju={bool:hl,str:hi,int:gi,"optional str":mi(hi),"optional int":mi(gi),"sequence of str":Ku};function Yu(t){const e=N.c(16),{choices:s,type:i,value:l,onChange:n,name:o,error:a}=t;let d,f;if(e[0]!==d||e[1]!==s||e[2]!==n||e[3]!==i||e[4]!==l){if(f={onChange:n,value:l},s)d=Bu,f.choices=s;else if(d=Ju[i],!d)throw`unknown option type ${i}`;d!==hl&&(f.className="form-control"),e[0]=d,e[1]=s,e[2]=n,e[3]=i,e[4]=l,e[5]=f,e[6]=d}else f=e[5],d=e[6];let h;e[7]!==a?(h=je({"has-error":a}),e[7]=a,e[8]=h):h=e[8];let p;e[9]!==d||e[10]!==o||e[11]!==f?(p=r.jsx(d,{name:o,onKeyDown:Uu,...f}),e[9]=d,e[10]=o,e[11]=f,e[12]=p):p=e[12];let g;return e[13]!==h||e[14]!==p?(g=r.jsx("div",{className:h,children:p}),e[13]=h,e[14]=p,e[15]=g):g=e[15],g}function Qu(t){const e=N.c(18),{name:s}=t,i=G();let l;e[0]!==s?(l=v=>v.options_meta[s]?.choices,e[0]=s,e[1]=l):l=e[1];const n=F(l);let o;e[2]!==s?(o=v=>v.options_meta[s]?.type,e[2]=s,e[3]=o):o=e[3];const a=F(o);let d;e[4]!==s?(d=v=>{const _=v.ui.optionsEditor[s];return _?_.value:v.options_meta[s]?.value},e[4]=s,e[5]=d):d=e[5];const f=F(d);let h;e[6]!==s?(h=v=>v.ui.optionsEditor[s]?.error,e[6]=s,e[7]=h):h=e[7];const p=F(h);let g;e[8]!==i||e[9]!==s?(g=v=>i(Rs(s,v)),e[8]=i,e[9]=s,e[10]=g):g=e[10];let x;return e[11]!==n||e[12]!==p||e[13]!==s||e[14]!==g||e[15]!==a||e[16]!==f?(x=r.jsx(Yu,{name:s,choices:n,type:a,value:f,error:p,onChange:g}),e[11]=n,e[12]=p,e[13]=s,e[14]=g,e[15]=a,e[16]=f,e[17]=x):x=e[17],x}function Xu(t){const e=N.c(4),{name:s}=t;let i;e[0]!==s?(i=o=>o.options_meta[s]?.help,e[0]=s,e[1]=i):i=e[1];const l=F(i);let n;return e[2]!==l?(n=r.jsx("div",{className:"help-block small",children:l}),e[2]=l,e[3]=n):n=e[3],n}function Zu(t){const e=N.c(4),{name:s}=t;let i;e[0]!==s?(i=o=>o.options_meta[s]?.error,e[0]=s,e[1]=i):i=e[1];const l=F(i);if(!l)return null;let n;return e[2]!==l?(n=r.jsx("div",{className:"small text-danger",children:l}),e[2]=l,e[3]=n):n=e[3],n}function ep(t){const e=N.c(2);let{value:s,defaultVal:i}=t;if(s===i)return null;{if(typeof i=="boolean")i=i?"true":"false";else if(Array.isArray(i)){if(Bt.isEmpty(Bt.compact(s))&&Bt.isEmpty(i))return null;i="[ ]"}else i===""?i='""':i===null&&(i="null");let l;return e[0]!==i?(l=r.jsxs("div",{className:"small",children:["Default: ",r.jsxs("strong",{children:[" ",i," "]})," "]}),e[0]=i,e[1]=l):l=e[1],l}}const tp=Yt((t,{name:e})=>({value:t.options[e],defaultVal:t.options_meta[e]?.default}))(ep);function sp(){const t=N.c(24),e=G(),s=F(ip,Jt);let i,l,n,o;if(t[0]!==e||t[1]!==s){const p=s.sort();let g;t[6]!==e?(g=()=>e(Qi()),t[6]=e,t[7]=g):g=t[7];let x;t[8]===Symbol.for("react.memo_cache_sentinel")?(x=r.jsx("i",{className:"fa fa-fw fa-times"}),t[8]=x):x=t[8];let v;t[9]!==g?(v=r.jsx("button",{type:"button",className:"close","data-dismiss":"modal",onClick:g,children:x}),t[9]=g,t[10]=v):v=t[10];let _;t[11]===Symbol.for("react.memo_cache_sentinel")?(_=r.jsx("div",{className:"modal-title",children:r.jsx("h4",{children:"Options"})}),t[11]=_):_=t[11],t[12]!==v?(o=r.jsxs("div",{className:"modal-header",children:[v,_]}),t[12]=v,t[13]=o):o=t[13],n="modal-body",i="form-horizontal",l=p.map(np),t[0]=e,t[1]=s,t[2]=i,t[3]=l,t[4]=n,t[5]=o}else i=t[2],l=t[3],n=t[4],o=t[5];let a;t[14]!==i||t[15]!==l?(a=r.jsx("div",{className:i,children:l}),t[14]=i,t[15]=l,t[16]=a):a=t[16];let d;t[17]!==n||t[18]!==a?(d=r.jsx("div",{className:n,children:a}),t[17]=n,t[18]=a,t[19]=d):d=t[19];let f;t[20]===Symbol.for("react.memo_cache_sentinel")?(f=r.jsx("div",{className:"modal-footer"}),t[20]=f):f=t[20];let h;return t[21]!==o||t[22]!==d?(h=r.jsxs("div",{children:[o,d,f]}),t[21]=o,t[22]=d,t[23]=h):h=t[23],h}function np(t){return r.jsxs("div",{className:"form-group",children:[r.jsxs("div",{className:"col-xs-6",children:[r.jsx("label",{htmlFor:t,children:t}),r.jsx(Xu,{name:t})]}),r.jsxs("div",{className:"col-xs-6",children:[r.jsx(Qu,{name:t}),r.jsx(Zu,{name:t}),r.jsx(tp,{name:t})]})]},t)}function ip(t){return Object.keys(t.options_meta)}function rp(){const t=N.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=r.jsx(Vu,{children:r.jsx(sp,{})}),t[0]=e):e=t[0],e}const lp={OptionModal:rp};function op(){const t=N.c(3),e=F(cp),s=e?lp[e]:void 0;if(s){let i;return t[0]!==s?(i=r.jsx(s,{}),t[0]=s,t[1]=i):i=t[1],i}else{let i;return t[2]===Symbol.for("react.memo_cache_sentinel")?(i=r.jsx(r.Fragment,{}),t[2]=i):i=t[2],i}}function cp(t){return t.ui.modal.activeModal}class ap extends A.Component{state={};render=()=>{const{showEventLog:e,showCommandBar:s}=this.props;return this.state.error?(console.log("ERR",this.state),r.jsxs("div",{className:"container",children:[r.jsx("h1",{children:"mitmproxy has crashed."}),r.jsxs("pre",{children:[this.state.error.stack,r.jsx("br",{}),r.jsx("br",{}),"Component Stack:",this.state.errorInfo?.componentStack]}),r.jsxs("p",{children:["Please lodge a bug report at"," ",r.jsx("a",{href:"https://github.com/mitmproxy/mitmproxy/issues",children:"https://github.com/mitmproxy/mitmproxy/issues"}),"."]})]})):r.jsxs("div",{id:"container",tabIndex:0,children:[r.jsx(vu,{}),r.jsx(Pf,{}),s&&r.jsx($u,{},"commandbar"),e&&r.jsx(Iu,{},"eventlog"),r.jsx(Mu,{}),r.jsx(op,{})]})};componentDidMount(){window.addEventListener("keydown",this.props.onKeyDown)}componentWillUnmount(){window.removeEventListener("keydown",this.props.onKeyDown)}componentDidCatch(e,s){this.setState({error:e,errorInfo:s})}}const dp=Yt(t=>({showEventLog:t.eventLog.visible,showCommandBar:t.commandBar.visible}),{onKeyDown:Id})(ap),Ze={SEARCH:"s",HIGHLIGHT:"h",SHOW_EVENTLOG:"e",SHOW_COMMANDBAR:"c"};function fp(t){const[e,s]=window.location.hash.substr(1).split("?",2),i=e.substr(1).split("/");if(i[0]==="flows"){if(i.length==3){const[l,n]=i.slice(1);t.dispatch(Kt(n));const o=()=>{const d=t.getState().flows.byId.get(l);d!==void 0&&(a(),t.dispatch(Ve([d])))},a=t.subscribe(o);o()}}else i[0]==="capture"&&t.dispatch(Wt(ve.Capture));s&&s.split("&").forEach(l=>{const[n,o]=l.split("=",2),a=decodeURIComponent(o);switch(n){case Ze.SEARCH:t.dispatch(Mi(a));break;case Ze.HIGHLIGHT:t.dispatch(Pi(a));break;case Ze.SHOW_EVENTLOG:t.getState().eventLog.visible||t.dispatch(Qt());break;case Ze.SHOW_COMMANDBAR:t.getState().commandBar.visible||t.dispatch(sr());break;default:console.error(`unimplemented query arg: ${l}`)}})}function up(t){const e=t.getState(),s={[Ze.SEARCH]:e.ui.filter[xe.Search],[Ze.HIGHLIGHT]:e.ui.filter[xe.Highlight],[Ze.SHOW_EVENTLOG]:e.eventLog.visible,[Ze.SHOW_COMMANDBAR]:e.commandBar.visible},i=Object.keys(s).filter(o=>s[o]).map(o=>`${o}=${encodeURIComponent(s[o])}`).join("&");let l;e.ui.tabs.current===ve.Capture?l="/capture":e.flows.selected.length>0?l=`/flows/${e.flows.selected[0].id}/${e.ui.flow.tab}`:l="/flows",i&&(l+="?"+i);let n=window.location.pathname;n==="blank"&&(n="/"),window.location.hash.substr(1)!==l&&history.replaceState(void 0,"",`${n}#${l}`)}function pp(t){fp(t),t.subscribe(()=>up(t))}var ot=(t=>(t.State="state",t.Flows="flows",t.Events="events",t.Options="options",t))(ot||{});class hp{activeFetches;store;filterState;socket;messageQueue;constructor(e){this.activeFetches={},this.store=e,this.filterState=Ii,this.messageQueue=[],this.connect(),this.store.subscribe(this.onStoreUpdate.bind(this))}connect(){this.socket=new WebSocket(location.origin.replace("http","ws")+location.pathname.replace(/\/$/,"")+"/updates"),this.socket.addEventListener("open",()=>this.onOpen()),this.socket.addEventListener("close",e=>this.onClose(e)),this.socket.addEventListener("message",e=>this.onMessage(JSON.parse(e.data))),this.socket.addEventListener("error",e=>this.onError(e))}async onOpen(){for(const e of this.messageQueue)this.socket.send(JSON.stringify(e));this.messageQueue=[],this.store.dispatch(Pc()),await Promise.all([this.fetchData("state"),this.fetchData("flows"),this.fetchData("events"),this.fetchData("options")]),this.store.dispatch(Oc())}onStoreUpdate(){const e=this.store.getState().ui.filter;if(e!==this.filterState){for(const s of Object.values(xe))this.filterState[s]!==e[s]&&this.sendMessage({type:"flows/updateFilter",payload:{name:s,expr:e[s]}});this.filterState=e}}fetchData(e){const s=[];return this.activeFetches[e]=s,se(`./${e}`).then(i=>i.json()).then(i=>{this.activeFetches[e]===s&&this.receive(e,i)})}onMessage(e){switch(e.type){case"flows/add":return this.queueOrDispatch("flows",Wi(e.payload));case"flows/update":return this.queueOrDispatch("flows",Ki(e.payload));case"flows/filterUpdate":return this.queueOrDispatch("flows",Gi(e.payload));case"flows/remove":return this.queueOrDispatch("flows",zi(e.payload));case"events/add":return this.queueOrDispatch("events",Ts(e.payload));case"options/update":return this.queueOrDispatch("options",Ls(e.payload));case"state/update":return this.queueOrDispatch("state",Be(e.payload));case"flows/reset":return this.fetchData("flows");case"events/reset":return this.fetchData("events");default:kt(e.type)}}sendMessage(e){this.socket.readyState===WebSocket.OPEN?this.socket.send(JSON.stringify(e)):this.socket.readyState===WebSocket.CONNECTING?this.messageQueue.push(e):console.error("WebSocket is not open. Cannot send:",e)}queueOrDispatch(e,s){const i=this.activeFetches[e];i!==void 0?i.push(s):this.store.dispatch(s)}receive(e,s){switch(e){case"state":this.store.dispatch(Ue(s));break;case"options":this.store.dispatch(Xt(s));break;case"events":this.store.dispatch(Xi(s));break;case"flows":this.store.dispatch(Es(s));break;default:kt(e)}const i=this.activeFetches[e];delete this.activeFetches[e],i.forEach(l=>this.store.dispatch(l))}onClose(e){this.store.dispatch(qc(`Connection closed at ${new Date().toUTCString()} with error code ${e.code}.`)),console.error("websocket connection closed",e)}onError(...e){console.error("websocket connection errored",e)}}class mp{store;constructor(e){this.store=e,this.onOpen()}onOpen(){this.fetchData(ot.Flows),this.fetchData(ot.Options)}fetchData(e){se(`./${e}`).then(s=>s.json()).then(s=>{this.receive(e,s)})}receive(e,s){switch(e){case ot.Flows:this.store.dispatch(Es(s));break;case ot.Options:this.store.dispatch(Xt(s));break;case ot.State:throw"unreachable";case ot.Events:throw"unreachable";default:kt(e)}}}window.MITMWEB_STATIC?window.backend=new mp(Et):window.backend=new hp(Et);pp(Et);window.addEventListener("error",t=>{Et.dispatch(Nc(`${t.message}
${t.error.stack}`))});document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("mitmproxy");Jo.createRoot(t).render(r.jsx(Yo,{store:Et,children:r.jsx(dp,{})}))});
