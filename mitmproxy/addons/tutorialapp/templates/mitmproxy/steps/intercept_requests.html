{% extends "frame.html" %}
{% block content %}

<div class="progress mt-4">
    <div class="progress-bar" role="progressbar" style="width: 40%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
</div>

<hr>

<h2 id="view-flows" class="pt-3 pb-3 mb-3 border-bottom">Step 2: Intercept Requests</h2>

<p>
    A powerful feature of mitmproxy is the interception of requests.
    An intercepted request is paused so that the user can edit (or discard) the request before sending it to the server.
    mitmproxy's <code>set intercept</code> command configures interceptions.
    The command is bound to shortcut <kbd>i</kbd> by default.
</p>

<p>
    Intercepting <em>all</em> requests is usually not desired as it constantly interrupts your browsing.
    Thus, mitmproxy expects a <a href="https://docs.mitmproxy.org/stable/concepts-filters/">flow filter expression</a> as the first argument to <code>set intercept</code> to selectively intercept requests.
    We want to intercept all requests to the <code>/vote/[cat|dog]</code> endpoint of the voting application.
    We use the flow filter <code>~u &lt;regex&gt;</code> that filters flows by matching the regular expressing on the URL of the request.
</p>

<div class="interactions-wrapper">
    <asciinema-player id="asciinema-player" src="/static/recordings/mitmproxy_intercept_requests.cast" font-size="13px" poster="npt:0:1" preload></asciinema-player>
    {% if instructions %}
        {% include 'instructions.html' %}
    {% endif %}
</div>

<p>
    In the next step, you will learn to modify intercepted flows before sending them to the server.
</p>

<hr>

<p class="d-flex">
    <a class="btn btn-outline-primary mr-sm-auto" href="/mitmproxy/user_interface" role="button">Previous Step: User Interface</a>
    <a class="btn btn-primary" href="/mitmproxy/modify_requests" role="button">Next Step: Modify Requests</a>
</p>

{% endblock %}
